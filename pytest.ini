[tool:pytest]
testpaths = tests
python_paths = apps/api
addopts = --tb=short -v
markers =
    integration: marks tests as integration tests
    unit: marks tests as unit tests
    asyncio: marks tests as async tests
    performance: marks tests as performance tests
    slow: marks tests as slow tests
    load: marks tests as load/stress tests
    smoke: marks tests as smoke tests
filterwarnings =
    # Treat our own deprecation warnings as errors (strict mode)
    error::DeprecationWarning:src.*
    # External library warnings - ignore (out of our control)
    ignore::PendingDeprecationWarning:sentry_sdk.*
    ignore::DeprecationWarning:sentry_sdk.*
    ignore::DeprecationWarning:google.protobuf.*
    ignore::DeprecationWarning:starlette.middleware.wsgi.*
    ignore::DeprecationWarning:websockets.legacy.*
    ignore::DeprecationWarning:httpx.*
    ignore::DeprecationWarning:httpcore.*
    ignore::DeprecationWarning:anyio.*
    # Pydantic V2 migration warnings (suppress class-based config warnings from third-party)
    ignore::pydantic.warnings.PydanticDeprecatedSince20:.*
    # Default: show other warnings normally
    default
