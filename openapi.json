{"openapi":"3.1.0","info":{"title":"My Hibachi Chef CRM","description":"Unified API with enterprise architecture patterns - DI, Repository Pattern, Error Handling, CQRS, Event Sourcing","version":"1.0.0"},"paths":{"/":{"get":{"summary":"Root","description":"API root endpoint with basic information","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"tags":["Health"],"summary":"Health Check","description":"Health check endpoint for load balancers","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/ready":{"get":{"tags":["Health"],"summary":"Readiness Check","description":"Kubernetes readiness probe endpoint","operationId":"readiness_check_ready_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/info":{"get":{"tags":["Health"],"summary":"App Info","description":"Application information endpoint","operationId":"app_info_info_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/auth/google/authorize":{"get":{"tags":["Authentication - OAuth","Google OAuth"],"summary":"Google Authorize","description":"Step 1: Redirect user to Google OAuth authorization page\n\nQuery params:\n    redirect_url: Optional URL to redirect to after successful login (deprecated)\n    origin: Frontend origin URL (e.g., https://admin.mysticdatanode.net)\n            Used to redirect back to the correct frontend after OAuth\n\nReturns:\n    Redirect to Google authorization page","operationId":"google_authorize_auth_google_authorize_get","parameters":[{"name":"redirect_url","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Redirect Url"}},{"name":"origin","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Origin"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/google/callback":{"get":{"tags":["Authentication - OAuth","Google OAuth"],"summary":"Google Callback","description":"Step 2: Handle Google OAuth callback\n\nQuery params:\n    code: Authorization code from Google\n    state: CSRF protection token (may contain encoded origin URL)\n\nReturns:\n    Redirect to frontend with token or error","operationId":"google_callback_auth_google_callback_get","parameters":[{"name":"code","in":"query","required":true,"schema":{"type":"string","title":"Code"}},{"name":"state","in":"query","required":true,"schema":{"type":"string","title":"State"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/users":{"get":{"tags":["User Management"],"summary":"List Users","description":"List all users with optional filtering\nRequires super admin privileges","operationId":"list_users_admin_users_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["User Management"],"summary":"Create User","description":"Create a new admin user.\n\nIf password is provided, user is created with that password.\nIf password is NOT provided, sends a password reset email for the user to set their password.\n\nRequires super admin privileges.","operationId":"create_user_admin_users_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api__v1__schemas__user__UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/users/pending":{"get":{"tags":["User Management"],"summary":"List Pending Users","description":"List all users pending approval\nRequires super admin privileges","operationId":"list_pending_users_admin_users_pending_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserListResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/admin/users/{user_id}/approve":{"post":{"tags":["User Management"],"summary":"Approve User","description":"Approve a pending user\nChanges status from PENDING to ACTIVE\nRequires super admin privileges","operationId":"approve_user_admin_users__user_id__approve_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api__v1__schemas__user__UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/users/{user_id}/reject":{"post":{"tags":["User Management"],"summary":"Reject User","description":"Reject a pending user\nChanges status from PENDING to DEACTIVATED\nRequires super admin privileges","operationId":"reject_user_admin_users__user_id__reject_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api__v1__schemas__user__UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/users/{user_id}/suspend":{"post":{"tags":["User Management"],"summary":"Suspend User","description":"Suspend an active user\nChanges status from ACTIVE to SUSPENDED\nRequires super admin privileges","operationId":"suspend_user_admin_users__user_id__suspend_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api__v1__schemas__user__UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/users/{user_id}":{"get":{"tags":["User Management"],"summary":"Get User","description":"Get detailed information about a specific user\nRequires super admin privileges","operationId":"get_user_admin_users__user_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api__v1__schemas__user__UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["User Management"],"summary":"Update User","description":"Update an existing user's profile.\n\nRequires super admin privileges.","operationId":"update_user_admin_users__user_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api__v1__schemas__user__UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["User Management"],"summary":"Delete User","description":"Delete a user (soft delete - sets status to INACTIVE).\n\nCannot delete:\n- Yourself\n- Other super admins\n\nRequires super admin privileges.","operationId":"delete_user_admin_users__user_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api__v1__schemas__user__UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/users/{user_id}/force-reset-password":{"post":{"tags":["User Management"],"summary":"Force Reset Password","description":"Force a password reset for a user.\n\nSends a password reset email to the user's email address.\nThe user will need to click the link and set a new password.\n\nRequires super admin privileges.","operationId":"force_reset_password_admin_users__user_id__force_reset_password_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api__v1__schemas__user__UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/users/{user_id}/reactivate":{"post":{"tags":["User Management"],"summary":"Reactivate User","description":"Reactivate a suspended or inactive user.\n\nChanges status from SUSPENDED/INACTIVE to ACTIVE.\nRequires super admin privileges.","operationId":"reactivate_user_admin_users__user_id__reactivate_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api__v1__schemas__user__UserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/roles":{"get":{"tags":["Role Management","Role Management"],"summary":"List Roles","description":"List all roles with their permissions\n\nRequires: Super Admin","operationId":"list_roles_admin_roles_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/RoleResponse"},"type":"array","title":"Response List Roles Admin Roles Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/admin/roles/{role_id}":{"get":{"tags":["Role Management","Role Management"],"summary":"Get Role","description":"Get role details with all permissions\n\nRequires: Super Admin","operationId":"get_role_admin_roles__role_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"role_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Role Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RoleResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/roles/permissions/all":{"get":{"tags":["Role Management","Role Management"],"summary":"List All Permissions","description":"List all available permissions\n\nRequires: Super Admin","operationId":"list_all_permissions_admin_roles_permissions_all_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/PermissionResponse"},"type":"array","title":"Response List All Permissions Admin Roles Permissions All Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/admin/roles/users/{user_id}/roles":{"post":{"tags":["Role Management","Role Management"],"summary":"Assign Role To User","description":"Assign a role to a user\n\nRequires: Super Admin","operationId":"assign_role_to_user_admin_roles_users__user_id__roles_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"User Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AssignRoleRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/roles/users/{user_id}/roles/{role_id}":{"delete":{"tags":["Role Management","Role Management"],"summary":"Remove Role From User","description":"Remove a role from a user\n\nRequires: Super Admin","operationId":"remove_role_from_user_admin_roles_users__user_id__roles__role_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"User Id"}},{"name":"role_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Role Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/roles/users/{user_id}/permissions":{"get":{"tags":["Role Management","Role Management"],"summary":"Get User Permissions","description":"Get user's roles and effective permissions\n\nRequires: Super Admin","operationId":"get_user_permissions_admin_roles_users__user_id__permissions_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRolesResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/payments/calculate":{"post":{"tags":["Payment Calculator"],"summary":"Calculate Payment With Fees","description":"Calculate payment total with processing fees\n\nShows customer the exact amount they'll pay including processing fees\nfor their selected payment method.\n\n**Example Request**:\n```json\n{\n  \"base_amount\": 500.00,\n  \"tip_amount\": 50.00,\n  \"payment_method\": \"stripe\"\n}\n```\n\n**Example Response**:\n```json\n{\n  \"base_amount\": 500.00,\n  \"tip_amount\": 50.00,\n  \"subtotal\": 550.00,\n  \"selected_method\": {\n    \"method\": \"stripe\",\n    \"method_display_name\": \"Credit Card (Stripe)\",\n    \"processing_fee\": 16.50,\n    \"total_amount\": 566.50\n  },\n  \"all_methods\": [...],\n  \"recommendation\": \"ðŸ’¡ Save $16.50! Use Zelle or Bank Transfer (FREE)\"\n}\n```","operationId":"calculate_payment_with_fees_api_v1_payments_calculate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CalculatePaymentRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CalculatePaymentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/payments/compare":{"post":{"tags":["Payment Calculator"],"summary":"Compare All Payment Methods","description":"Compare all 4 payment methods side-by-side\n\nShows customer all options with fees, helping them make an informed decision.\n\n**Example Request**:\n```json\n{\n  \"base_amount\": 500.00,\n  \"tip_amount\": 50.00\n}\n```\n\n**Example Response**:\n```json\n{\n  \"subtotal\": 550.00,\n  \"methods\": [\n    {\n      \"method\": \"zelle\",\n      \"total_amount\": 550.00,\n      \"processing_fee\": 0.00,\n      \"savings_vs_stripe\": 16.25\n    },\n    {\n      \"method\": \"venmo\",\n      \"total_amount\": 550.00,\n      \"processing_fee\": 0.00,\n      \"savings_vs_stripe\": 16.25\n    },\n    {\n      \"method\": \"stripe\",\n      \"total_amount\": 566.25,\n      \"processing_fee\": 16.25,\n      \"is_instant\": true\n    }\n  ],\n  \"best_value\": \"zelle or venmo (FREE)\",\n  \"fastest\": \"stripe (instant)\",\n  \"recommendation\": \"ðŸ’° Best: Zelle or Venmo - FREE!\"\n}\n```","operationId":"compare_all_payment_methods_api_v1_payments_compare_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompareAllMethodsRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CompareAllMethodsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/payments/methods":{"get":{"tags":["Payment Calculator"],"summary":"Get Payment Methods Info","description":"Get information about all available payment methods\n\nReturns static information about payment methods, fees, and characteristics.\nUseful for building payment selection UI.\n\n**Response**:\n```json\n{\n  \"methods\": [\n    {\n      \"id\": \"zelle\",\n      \"name\": \"Zelle\",\n      \"icon\": \"Z\",\n      \"color\": \"purple\",\n      \"fee_percentage\": 0.00,\n      \"is_free\": true,\n      \"is_instant\": false,\n      \"confirmation_time\": \"1-2 hours\",\n      \"qr_code_available\": true,\n      \"description\": \"Free bank transfer with manual confirmation\"\n    },\n    ...\n  ]\n}\n```","operationId":"get_payment_methods_info_api_v1_payments_methods_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Payment Methods Info Api V1 Payments Methods Get"}}}}}}},"/test/bookings":{"post":{"tags":["Architecture Testing","Testing - New Architecture"],"summary":"Create Booking","description":"Create a new booking\nTests: DI container, repository pattern, business validation, error handling","operationId":"create_booking_test_bookings_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateBookingRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Create Booking Test Bookings Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Architecture Testing","Testing - New Architecture"],"summary":"List Bookings","description":"List bookings with filtering\nTests: Repository pattern with filtering, pagination, admin authentication","operationId":"list_bookings_test_bookings_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/BookingStatus"},{"type":"null"}],"title":"Status"}},{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Start Date"}},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"End Date"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Per Page"}},{"name":"max_per_page","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Max Per Page"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response List Bookings Test Bookings Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/test/bookings/{booking_id}":{"get":{"tags":["Architecture Testing","Testing - New Architecture"],"summary":"Get Booking","description":"Get a specific booking\nTests: Repository pattern, error handling for not found","operationId":"get_booking_test_bookings__booking_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"booking_id","in":"path","required":true,"schema":{"type":"integer","title":"Booking Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Booking Test Bookings  Booking Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/test/bookings/{booking_id}/confirm":{"put":{"tags":["Architecture Testing","Testing - New Architecture"],"summary":"Confirm Booking","description":"Confirm a pending booking\nTests: Admin authentication, business logic validation, state transitions","operationId":"confirm_booking_test_bookings__booking_id__confirm_put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"booking_id","in":"path","required":true,"schema":{"type":"integer","title":"Booking Id"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Per Page"}},{"name":"max_per_page","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Max Per Page"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Confirm Booking Test Bookings  Booking Id  Confirm Put"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/test/customers":{"post":{"tags":["Architecture Testing","Testing - New Architecture"],"summary":"Create Customer","description":"Create a new customer\nTests: Customer repository validation, duplicate detection, business logic","operationId":"create_customer_test_customers_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCustomerRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Create Customer Test Customers Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/test/customers/search":{"get":{"tags":["Architecture Testing","Testing - New Architecture"],"summary":"Search Customers","description":"Search customers\nTests: Repository search functionality, multiple search criteria","operationId":"search_customers_test_customers_search_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"q","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Q"}},{"name":"email","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"}},{"name":"phone","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/CustomerStatus"},{"type":"null"}],"title":"Status"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Per Page"}},{"name":"max_per_page","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Max Per Page"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Search Customers Test Customers Search Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/test/customers/{customer_id}/bookings":{"get":{"tags":["Architecture Testing","Testing - New Architecture"],"summary":"Get Customer Bookings","description":"Get customer booking history\nTests: Repository relationships, business logic methods","operationId":"get_customer_bookings_test_customers__customer_id__bookings_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"customer_id","in":"path","required":true,"schema":{"type":"integer","title":"Customer Id"}},{"name":"include_cancelled","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Cancelled"}},{"name":"limit","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Customer Bookings Test Customers  Customer Id  Bookings Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/test/analytics/bookings":{"get":{"tags":["Architecture Testing","Testing - New Architecture"],"summary":"Get Booking Analytics","description":"Get booking analytics\nTests: Repository analytics methods, admin authentication","operationId":"get_booking_analytics_test_analytics_bookings_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"start_date","in":"query","required":true,"schema":{"type":"string","format":"date","title":"Start Date"}},{"name":"end_date","in":"query","required":true,"schema":{"type":"string","format":"date","title":"End Date"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Per Page"}},{"name":"max_per_page","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Max Per Page"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Booking Analytics Test Analytics Bookings Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/test/analytics/customers":{"get":{"tags":["Architecture Testing","Testing - New Architecture"],"summary":"Get Customer Analytics","description":"Get customer analytics\nTests: Repository analytics, customer segmentation","operationId":"get_customer_analytics_test_analytics_customers_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Customer Analytics Test Analytics Customers Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/test/health":{"get":{"tags":["Architecture Testing","Testing - New Architecture"],"summary":"Health Check","description":"Health check endpoint\nTests: DI container resolution, service availability","operationId":"health_check_test_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Health Check Test Health Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/health":{"get":{"tags":["health"],"summary":"Health Check","description":"Basic health check endpoint.\nReturns overall service health status with comprehensive checks.","operationId":"health_check_api_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/schemas__health__HealthResponse"}}}}}}},"/api/health/ready":{"get":{"tags":["health"],"summary":"Readiness Check","description":"Kubernetes readiness probe endpoint.\nChecks if the service is ready to accept traffic.","operationId":"readiness_check_api_health_ready_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/schemas__health__ReadinessResponse"}}}}}}},"/api/health/live":{"get":{"tags":["health"],"summary":"Liveness Check","description":"Kubernetes liveness probe endpoint.\nSimple check to verify the service is alive.","operationId":"liveness_check_api_health_live_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/health/detailed":{"get":{"tags":["health"],"summary":"Detailed Health Check","description":"Detailed health check with comprehensive system information.\nIncludes database, system metrics, and configuration status.","operationId":"detailed_health_check_api_health_detailed_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/auth/register":{"post":{"tags":["authentication","authentication"],"summary":"Register new user","description":"Create a new user account.\n\n    ## Process:\n    1. Validates email is not already registered\n    2. Validates password strength (minimum 8 characters)\n    3. Hashes password with bcrypt (12 rounds)\n    4. Creates user account with encrypted email\n    5. Returns user information\n\n    ## Security:\n    - Password hashing: bcrypt with 12 rounds\n    - Email encryption: AES-256-GCM\n    - Rate limiting: 3 attempts per hour per IP\n    - Email validation: RFC 5322 compliant\n\n    ## Default Permissions:\n    New users are created with:\n    - Basic user role\n    - Active status\n    - Email verification pending (if enabled)","operationId":"register_api_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"201":{"description":"User registered successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__auth__UserResponse"},"example":{"id":"user-abc123","email":"jane@example.com","name":"Jane Smith","is_admin":false,"created_at":"2024-10-19T10:30:00Z"}}}},"400":{"description":"Invalid input or email already registered","content":{"application/json":{"example":{"detail":"Email already registered"}}}},"422":{"description":"Validation error","content":{"application/json":{"example":{"detail":"Password must be at least 8 characters"}}}}}}},"/api/auth/login":{"post":{"tags":["authentication","authentication"],"summary":"User login","description":"Authenticate user and generate access tokens.\n\n    ## Process:\n    1. Validates user credentials (email + password)\n    2. Generates JWT access token (expires in 1 hour)\n    3. Generates refresh token (expires in 7 days)\n    4. Returns both tokens for client storage\n\n    ## Security:\n    - Password hashing: bcrypt with 12 rounds\n    - JWT signing: HS256 algorithm\n    - Rate limiting: 5 attempts per 15 minutes per IP\n    - Account lockout: After 5 failed attempts\n\n    ## Token Usage:\n    Store access_token securely and include in all API requests:\n    ```\n    Authorization: Bearer <access_token>\n    ```\n\n    When access_token expires, use refresh_token to obtain new tokens via `/refresh` endpoint.","operationId":"login_api_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__auth__LoginRequest"}}},"required":true},"responses":{"200":{"description":"Login successful, tokens generated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"},"example":{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","token_type":"bearer","expires_in":3600,"refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."}}}},"400":{"description":"Invalid request data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__auth__ErrorResponse"},"example":{"detail":"Invalid email format"}}}},"401":{"description":"Invalid credentials","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__auth__ErrorResponse"},"examples":{"invalid_credentials":{"summary":"Wrong password","value":{"detail":"Invalid email or password"}},"account_locked":{"summary":"Too many failed attempts","value":{"detail":"Account locked due to too many failed login attempts. Try again in 15 minutes."}}}}}},"429":{"description":"Too many requests","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__auth__ErrorResponse"},"example":{"detail":"Too many login attempts. Please try again in 15 minutes."}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/me":{"get":{"tags":["authentication","authentication"],"summary":"Get current user information","description":"Retrieve information about the currently authenticated user.\n\n    ## Authentication Required:\n    This endpoint requires a valid JWT Bearer token in the Authorization header.\n\n    ## Use Cases:\n    - Display user profile\n    - Check user permissions\n    - Verify authentication status\n    - Get user ID for other API calls\n\n    ## Response:\n    Returns complete user profile including role and account creation date.","operationId":"get_current_user_info_api_auth_me_get","responses":{"200":{"description":"User information retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__auth__UserResponse"},"example":{"id":"user-abc123","email":"john@example.com","name":"John Doe","is_admin":false,"created_at":"2024-10-19T10:30:00Z"}}}},"401":{"description":"Authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__auth__ErrorResponse"},"examples":{"missing_token":{"summary":"No token provided","value":{"detail":"Not authenticated"}},"invalid_token":{"summary":"Invalid or expired token","value":{"detail":"Invalid authentication credentials"}}}}}}},"security":[{"HTTPBearer":[]}]}},"/api/auth/logout":{"post":{"tags":["authentication","authentication"],"summary":"User logout","description":"Logout user and invalidate tokens.\n\n    ## Process:\n    1. Invalidates current access token\n    2. Invalidates refresh token\n    3. Removes user session from cache\n    4. Logs logout event for security audit\n\n    ## Client Actions Required:\n    After successful logout, client should:\n    - Remove stored access_token\n    - Remove stored refresh_token\n    - Redirect to login page\n    - Clear any cached user data\n\n    ## Note:\n    This endpoint still requires authentication (the token being invalidated).","operationId":"logout_api_auth_logout_post","responses":{"200":{"description":"Logout successful","content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object","title":"Response Logout Api Auth Logout Post"},"example":{"message":"Logged out successfully"}}}},"401":{"description":"Authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__auth__ErrorResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/auth/logout-all-devices":{"post":{"tags":["authentication","authentication"],"summary":"Logout from all devices","description":"Invalidate ALL tokens for the current user.\n\n    ## Use Cases:\n    - Security concern (account may be compromised)\n    - Changed password and want to force re-login everywhere\n    - Lost a device with saved login\n\n    ## Process:\n    1. Identifies the current user from their access token\n    2. Blacklists ALL tokens for that user (access + refresh)\n    3. All other sessions become invalid immediately\n    4. User must re-authenticate on all devices\n\n    ## Returns:\n    - Success message with count of invalidated sessions","operationId":"logout_all_devices_api_auth_logout_all_devices_post","responses":{"200":{"description":"All sessions invalidated successfully","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Logout All Devices Api Auth Logout All Devices Post"},"example":{"message":"All sessions invalidated","sessions_invalidated":5}}}},"401":{"description":"Invalid or expired authentication token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__auth__ErrorResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/auth/refresh":{"post":{"tags":["authentication","authentication"],"summary":"Refresh access token","description":"Generate new access token using refresh token.\n\n    ## When to Use:\n    - Access token has expired (401 error)\n    - Proactively before expiration\n    - After long period of inactivity\n\n    ## Process:\n    1. Validates refresh token\n    2. Generates new access token (1 hour expiry)\n    3. Optionally generates new refresh token (7 days expiry)\n    4. Returns new tokens\n\n    ## Security:\n    - Refresh tokens are single-use only\n    - Old refresh token is immediately invalidated\n    - New refresh token must be stored\n\n    ## Request Body:\n    ```json\n    {\n        \"refresh_token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\"\n    }\n    ```","operationId":"refresh_token_api_auth_refresh_post","parameters":[{"name":"refresh_token","in":"query","required":true,"schema":{"type":"string","title":"Refresh Token"}}],"responses":{"200":{"description":"Tokens refreshed successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"401":{"description":"Invalid or expired refresh token","content":{"application/json":{"examples":{"expired":{"summary":"Refresh token expired","value":{"detail":"Refresh token has expired. Please login again."}},"invalid":{"summary":"Invalid token","value":{"detail":"Invalid refresh token"}},"already_used":{"summary":"Token already used","value":{"detail":"Refresh token has already been used. Please login again."}}},"schema":{"$ref":"#/components/schemas/routers__v1__auth__ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/reset-password":{"post":{"tags":["authentication","authentication"],"summary":"Request password reset","description":"Request a password reset link via email.\n\n    ## Process:\n    1. Validates email exists in system\n    2. Generates secure reset token (expires in 1 hour)\n    3. Sends reset link to user's email\n    4. Logs security event\n\n    ## Security:\n    - Rate limited: 3 requests per hour per email\n    - Token expires in 1 hour\n    - One-time use only\n    - Email verification required\n    - No user enumeration (always returns success)\n\n    ## Reset Link Format:\n    ```\n    https://myhibachichef.com/reset-password?token=<reset_token>\n    ```\n\n    ## Request Body:\n    ```json\n    {\n        \"email\": \"john@example.com\"\n    }\n    ```","operationId":"reset_password_api_auth_reset_password_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordResetRequest"}}},"required":true},"responses":{"200":{"description":"Reset email sent (if account exists)","content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object","title":"Response Reset Password Api Auth Reset Password Post"},"example":{"message":"If an account with that email exists, a password reset link has been sent."}}}},"400":{"description":"Invalid email format","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__auth__ErrorResponse"}}}},"429":{"description":"Too many reset requests","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__auth__ErrorResponse"},"example":{"detail":"Too many password reset requests. Please try again in 1 hour."}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/confirm-reset-password":{"post":{"tags":["authentication","authentication"],"summary":"Confirm password reset with token","description":"Complete password reset using the token from the email link.\n\n    ## Process:\n    1. Validates reset token (not expired, not used)\n    2. Verifies new password meets requirements\n    3. Updates user password (hashed)\n    4. Invalidates all existing sessions (security)\n    5. Marks token as used (one-time use)\n    6. Logs security event\n\n    ## Password Requirements:\n    - Minimum 8 characters\n    - At least one uppercase letter\n    - At least one lowercase letter\n    - At least one number\n\n    ## Security:\n    - Token expires in 1 hour\n    - Token is one-time use only\n    - All existing sessions are invalidated\n    - Password is hashed with bcrypt\n\n    ## Request Body:\n    ```json\n    {\n        \"token\": \"abc123xyz789...\",\n        \"new_password\": \"NewSecurePass123!\"\n    }\n    ```","operationId":"confirm_reset_password_api_auth_confirm_reset_password_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConfirmPasswordResetRequest"}}},"required":true},"responses":{"200":{"description":"Password reset successful","content":{"application/json":{"schema":{"additionalProperties":{"type":"string"},"type":"object","title":"Response Confirm Reset Password Api Auth Confirm Reset Password Post"},"example":{"message":"Password has been reset successfully. Please login with your new password."}}}},"400":{"description":"Invalid or expired token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__auth__ErrorResponse"},"example":{"detail":"Invalid or expired reset token. Please request a new one."}}}},"422":{"description":"Invalid password format","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__auth__ErrorResponse"}}}}}}},"/api/bookings/admin/weekly":{"get":{"tags":["bookings","bookings","bookings"],"summary":"Get bookings for weekly calendar view (ADMIN)","description":"Retrieve all bookings within a specific week for calendar display.\n\n    ## Query Parameters:\n    - **date_from**: Start date (YYYY-MM-DD)\n    - **date_to**: End date (YYYY-MM-DD)\n    - **status**: Optional status filter\n\n    ## Performance:\n    Optimized with eager loading to prevent N+1 queries.","operationId":"get_weekly_bookings_api_bookings_admin_weekly_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"date_from","in":"query","required":true,"schema":{"type":"string","description":"Start date (YYYY-MM-DD)","title":"Date From"},"description":"Start date (YYYY-MM-DD)"},{"name":"date_to","in":"query","required":true,"schema":{"type":"string","description":"End date (YYYY-MM-DD)","title":"Date To"},"description":"End date (YYYY-MM-DD)"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status","title":"Status"},"description":"Filter by status"}],"responses":{"200":{"description":"Weekly bookings retrieved successfully","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Weekly Bookings Api Bookings Admin Weekly Get"}}}},"400":{"description":"Invalid date range","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/bookings/admin/monthly":{"get":{"tags":["bookings","bookings","bookings"],"summary":"Get bookings for monthly calendar view (ADMIN)","description":"Same as weekly view but for monthly date range.","operationId":"get_monthly_bookings_api_bookings_admin_monthly_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"date_from","in":"query","required":true,"schema":{"type":"string","description":"Start date (YYYY-MM-DD)","title":"Date From"},"description":"Start date (YYYY-MM-DD)"},{"name":"date_to","in":"query","required":true,"schema":{"type":"string","description":"End date (YYYY-MM-DD)","title":"Date To"},"description":"End date (YYYY-MM-DD)"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status","title":"Status"},"description":"Filter by status"}],"responses":{"200":{"description":"Monthly bookings retrieved successfully","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Monthly Bookings Api Bookings Admin Monthly Get"}}}},"400":{"description":"Invalid date range","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/bookings/admin/{booking_id}":{"patch":{"tags":["bookings","bookings","bookings"],"summary":"Reschedule booking date/time (ADMIN)","description":"Update a booking's date and time slot (for drag-drop calendar rescheduling).\n\n    ## Validation:\n    - Cannot reschedule to past dates\n    - Cannot reschedule cancelled or completed bookings","operationId":"reschedule_booking_api_bookings_admin__booking_id__patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"booking_id","in":"path","required":true,"schema":{"type":"string","title":"Booking Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","additionalProperties":{"type":"string"},"title":"Update Data"}}}},"responses":{"200":{"description":"Booking rescheduled successfully","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Reschedule Booking Api Bookings Admin  Booking Id  Patch"}}}},"400":{"description":"Invalid update data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__ErrorResponse"}}}},"404":{"description":"Booking not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/bookings/booked-dates":{"get":{"tags":["bookings","bookings","bookings"],"summary":"Get all booked dates","description":"Retrieve a list of all dates that have bookings.\n    Useful for calendar displays and availability checking.\n\n    ## Response:\n    Returns array of dates in YYYY-MM-DD format that have bookings.\n\n    ## Authentication:\n    Optional - public endpoint for availability checking.","operationId":"get_booked_dates_api_bookings_booked_dates_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Booked Dates Api Bookings Booked Dates Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/bookings/availability":{"get":{"tags":["bookings","bookings","bookings"],"summary":"Check availability for a specific date","description":"Check if a specific date is available for bookings.\n\n    ## Query Parameters:\n    - **date**: Date to check in YYYY-MM-DD format\n\n    ## Response:\n    Returns availability status and booking count for the date.\n\n    ## Authentication:\n    Public endpoint - no authentication required.","operationId":"check_availability_api_bookings_availability_get","parameters":[{"name":"date","in":"query","required":true,"schema":{"type":"string","description":"Date to check (YYYY-MM-DD)","title":"Date"},"description":"Date to check (YYYY-MM-DD)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Check Availability Api Bookings Availability Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/bookings/available-times":{"get":{"tags":["bookings","bookings","bookings"],"summary":"Get available time slots for a date","description":"Retrieve available time slots for a specific date.\n\n    ## Query Parameters:\n    - **date**: Date to check in YYYY-MM-DD format\n\n    ## Response:\n    Returns array of time slots with availability status.\n    Time slots are: 12PM, 3PM, 6PM, 9PM\n\n    ## Authentication:\n    Optional - works for both authenticated and public access.","operationId":"get_available_times_api_bookings_available_times_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"date","in":"query","required":true,"schema":{"type":"string","description":"Date to check (YYYY-MM-DD)","title":"Date"},"description":"Date to check (YYYY-MM-DD)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Available Times Api Bookings Available Times Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/bookings/{booking_id}/request-cancellation":{"post":{"tags":["bookings","bookings","bookings"],"summary":"Request booking cancellation (Step 1 of 2)","description":"Request cancellation of a booking. This is step 1 of the 2-step cancellation workflow.\n\n    ## Workflow:\n    1. **This endpoint**: Status changes to CANCELLATION_REQUESTED (slot remains held)\n    2. **Approve or Reject**: Admin must then approve (releases slot) or reject (reverts status)\n\n    ## Why 2 Steps?\n    Hibachi slots are limited. Once a slot is released, another customer may book it immediately.\n    This workflow allows review before permanently releasing the slot.\n\n    ## What Happens:\n    - Booking status changes to `cancellation_requested`\n    - Previous status is stored for potential rejection/revert\n    - Slot remains HELD (not released) until approved\n    - Action is logged to audit trail\n\n    ## Authentication:\n    Requires CUSTOMER_SUPPORT role or higher.\n\n    ## Station Access:\n    STATION_MANAGER can only request cancellation for bookings in their station.","operationId":"request_cancellation_api_bookings__booking_id__request_cancellation_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"booking_id","in":"path","required":true,"schema":{"type":"string","title":"Booking Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CancellationRequestInput"}}}},"responses":{"200":{"description":"Cancellation request recorded","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CancellationResponse"}}}},"400":{"description":"Invalid request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__ErrorResponse"}}}},"403":{"description":"Insufficient permissions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__ErrorResponse"}}}},"404":{"description":"Booking not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/bookings/{booking_id}/approve-cancellation":{"post":{"tags":["bookings","bookings","bookings"],"summary":"Approve booking cancellation (Step 2 of 2 - Approve)","description":"Approve a pending cancellation request. This releases the slot.\n\n    ## What Happens:\n    - Booking status changes from CANCELLATION_REQUESTED to CANCELLED\n    - **Slot is RELEASED** (another customer can now book this slot)\n    - Cancellation notification sent to customer\n    - Action is logged to audit trail\n\n    ## Important:\n    This action is **IRREVERSIBLE** for the slot. Once released,\n    it may be immediately booked by another customer.","operationId":"approve_cancellation_api_bookings__booking_id__approve_cancellation_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"booking_id","in":"path","required":true,"schema":{"type":"string","title":"Booking Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CancellationApprovalInput"}}}},"responses":{"200":{"description":"Cancellation approved","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CancellationResponse"}}}},"400":{"description":"Invalid request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__ErrorResponse"}}}},"403":{"description":"Insufficient permissions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__ErrorResponse"}}}},"404":{"description":"Booking not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/bookings/{booking_id}/reject-cancellation":{"post":{"tags":["bookings","bookings","bookings"],"summary":"Reject booking cancellation (Step 2 of 2 - Reject)","description":"Reject a pending cancellation request. This reverts the booking status.\n\n    ## What Happens:\n    - Booking status REVERTS to the status it had before cancellation was requested\n    - Slot remains HELD (no change to slot availability)\n    - Rejection is logged to audit trail\n\n    ## Use Cases:\n    - Customer changed their mind and wants to proceed\n    - Cancellation request was within no-cancellation window\n    - Deposit is non-refundable per policy","operationId":"reject_cancellation_api_bookings__booking_id__reject_cancellation_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"booking_id","in":"path","required":true,"schema":{"type":"string","title":"Booking Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CancellationRejectionInput"}}}},"responses":{"200":{"description":"Cancellation rejected","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CancellationResponse"}}}},"400":{"description":"Invalid request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__ErrorResponse"}}}},"403":{"description":"Insufficient permissions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__ErrorResponse"}}}},"404":{"description":"Booking not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/bookings/{booking_id}":{"delete":{"tags":["bookings","bookings","bookings"],"summary":"Soft-delete a booking","description":"Soft-delete a booking (mark as deleted without permanent removal).\n\n    ## Authorization\n    Requires one of these roles:\n    - **SUPER_ADMIN**: Can delete any booking\n    - **ADMIN**: Can delete any booking\n    - **CUSTOMER_SUPPORT**: Can delete any booking\n    - **STATION_MANAGER**: Can only delete bookings from their assigned stations\n\n    ## Audit Trail\n    All deletions are logged with:\n    - Who deleted (user ID, role)\n    - When deleted (timestamp)\n    - Why deleted (reason)\n    - Previous state (for recovery)\n\n    ## Recovery\n    Soft-deleted bookings can be restored within 30 days.\n    After 30 days, they are permanently purged.\n\n    ## Compliance\n    - GDPR: Audit trail for data deletion requests\n    - SOC 2: Access control and logging\n    - PCI DSS: Cardholder data handling","operationId":"delete_booking_api_bookings__booking_id__delete","parameters":[{"name":"booking_id","in":"path","required":true,"schema":{"type":"string","title":"Booking Id"}},{"name":"reason","in":"query","required":false,"schema":{"type":"string","default":"Customer request","title":"Reason"}}],"responses":{"200":{"description":"Booking soft-deleted successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteBookingResponse"}}}},"403":{"description":"Not authorized to delete this booking"},"404":{"description":"Booking not found"},"422":{"description":"Cannot delete booking in current state"}}},"get":{"tags":["bookings","bookings","bookings"],"summary":"Get booking details","description":"Retrieve detailed information about a specific booking.","operationId":"get_booking_api_bookings__booking_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"booking_id","in":"path","required":true,"schema":{"type":"string","title":"Booking Id"}}],"responses":{"200":{"description":"Booking details","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Booking Api Bookings  Booking Id  Get","$ref":"#/components/schemas/BookingResponse"}}}},"403":{"description":"Not authorized to view this booking","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__ErrorResponse"}}}},"404":{"description":"Booking not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["bookings","bookings","bookings"],"summary":"Update an existing booking","description":"Update booking details such as date, time, guest count, location, or chef assignment.\n\n    ## Update Rules:\n    - Only pending or confirmed bookings can be updated\n    - Date/time changes must be at least 72 hours before event\n    - Pricing is recalculated if guest count changes\n\n    ## Chef Assignment:\n    - SUPER_ADMIN, ADMIN, or STATION_MANAGER can assign/unassign chefs\n    - Set chef_id to a valid chef UUID to assign\n    - Set chef_id to null to unassign the chef","operationId":"update_booking_api_bookings__booking_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"booking_id","in":"path","required":true,"schema":{"type":"string","title":"Booking Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Update Booking Api Bookings  Booking Id  Put"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/bookings/":{"get":{"tags":["bookings","bookings","bookings"],"summary":"List bookings with cursor pagination","description":"Retrieve a paginated list of bookings.\n\n    ## Pagination\n    Uses cursor-based pagination for O(1) performance.\n    - First page: No cursor required\n    - Next page: Use `next_cursor` from response\n    - Previous page: Use `prev_cursor` from response\n\n    ## Filtering\n    - `user_id`: Filter by customer ID\n    - `status`: Filter by booking status\n\n    ## Multi-Tenant\n    Results are filtered by station based on user role.","operationId":"list_bookings_api_bookings__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by customer ID","title":"User Id"},"description":"Filter by customer ID"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status","title":"Status"},"description":"Filter by status"},{"name":"cursor","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Pagination cursor","title":"Cursor"},"description":"Pagination cursor"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Items per page","default":50,"title":"Limit"},"description":"Items per page"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response List Bookings Api Bookings  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["bookings","bookings","bookings"],"summary":"Create a new booking","description":"Create a new hibachi catering booking.\n\n    ## Requirements:\n    - Valid authentication token\n    - Date must be at least 48 hours in the future\n    - Guest count between 1-50\n    - Valid US phone number and email\n\n    ## Pricing:\n    - Base price: Dynamic from pricing service\n    - Deposit required: $100 fixed (due within 2 hours)\n    - Party minimum: $550","operationId":"create_booking_api_bookings__post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__BookingCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/bookings/admin/weekly":{"get":{"tags":["bookings-v1","bookings","bookings"],"summary":"Get bookings for weekly calendar view (ADMIN)","description":"Retrieve all bookings within a specific week for calendar display.\n\n    ## Query Parameters:\n    - **date_from**: Start date (YYYY-MM-DD)\n    - **date_to**: End date (YYYY-MM-DD)\n    - **status**: Optional status filter\n\n    ## Performance:\n    Optimized with eager loading to prevent N+1 queries.","operationId":"get_weekly_bookings_api_v1_bookings_admin_weekly_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"date_from","in":"query","required":true,"schema":{"type":"string","description":"Start date (YYYY-MM-DD)","title":"Date From"},"description":"Start date (YYYY-MM-DD)"},{"name":"date_to","in":"query","required":true,"schema":{"type":"string","description":"End date (YYYY-MM-DD)","title":"Date To"},"description":"End date (YYYY-MM-DD)"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status","title":"Status"},"description":"Filter by status"}],"responses":{"200":{"description":"Weekly bookings retrieved successfully","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Weekly Bookings Api V1 Bookings Admin Weekly Get"}}}},"400":{"description":"Invalid date range","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/bookings/admin/monthly":{"get":{"tags":["bookings-v1","bookings","bookings"],"summary":"Get bookings for monthly calendar view (ADMIN)","description":"Same as weekly view but for monthly date range.","operationId":"get_monthly_bookings_api_v1_bookings_admin_monthly_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"date_from","in":"query","required":true,"schema":{"type":"string","description":"Start date (YYYY-MM-DD)","title":"Date From"},"description":"Start date (YYYY-MM-DD)"},{"name":"date_to","in":"query","required":true,"schema":{"type":"string","description":"End date (YYYY-MM-DD)","title":"Date To"},"description":"End date (YYYY-MM-DD)"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status","title":"Status"},"description":"Filter by status"}],"responses":{"200":{"description":"Monthly bookings retrieved successfully","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Monthly Bookings Api V1 Bookings Admin Monthly Get"}}}},"400":{"description":"Invalid date range","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/bookings/admin/{booking_id}":{"patch":{"tags":["bookings-v1","bookings","bookings"],"summary":"Reschedule booking date/time (ADMIN)","description":"Update a booking's date and time slot (for drag-drop calendar rescheduling).\n\n    ## Validation:\n    - Cannot reschedule to past dates\n    - Cannot reschedule cancelled or completed bookings","operationId":"reschedule_booking_api_v1_bookings_admin__booking_id__patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"booking_id","in":"path","required":true,"schema":{"type":"string","title":"Booking Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","additionalProperties":{"type":"string"},"title":"Update Data"}}}},"responses":{"200":{"description":"Booking rescheduled successfully","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Reschedule Booking Api V1 Bookings Admin  Booking Id  Patch"}}}},"400":{"description":"Invalid update data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__ErrorResponse"}}}},"404":{"description":"Booking not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/bookings/booked-dates":{"get":{"tags":["bookings-v1","bookings","bookings"],"summary":"Get all booked dates","description":"Retrieve a list of all dates that have bookings.\n    Useful for calendar displays and availability checking.\n\n    ## Response:\n    Returns array of dates in YYYY-MM-DD format that have bookings.\n\n    ## Authentication:\n    Optional - public endpoint for availability checking.","operationId":"get_booked_dates_api_v1_bookings_booked_dates_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Booked Dates Api V1 Bookings Booked Dates Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/bookings/availability":{"get":{"tags":["bookings-v1","bookings","bookings"],"summary":"Check availability for a specific date","description":"Check if a specific date is available for bookings.\n\n    ## Query Parameters:\n    - **date**: Date to check in YYYY-MM-DD format\n\n    ## Response:\n    Returns availability status and booking count for the date.\n\n    ## Authentication:\n    Public endpoint - no authentication required.","operationId":"check_availability_api_v1_bookings_availability_get","parameters":[{"name":"date","in":"query","required":true,"schema":{"type":"string","description":"Date to check (YYYY-MM-DD)","title":"Date"},"description":"Date to check (YYYY-MM-DD)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Check Availability Api V1 Bookings Availability Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/bookings/available-times":{"get":{"tags":["bookings-v1","bookings","bookings"],"summary":"Get available time slots for a date","description":"Retrieve available time slots for a specific date.\n\n    ## Query Parameters:\n    - **date**: Date to check in YYYY-MM-DD format\n\n    ## Response:\n    Returns array of time slots with availability status.\n    Time slots are: 12PM, 3PM, 6PM, 9PM\n\n    ## Authentication:\n    Optional - works for both authenticated and public access.","operationId":"get_available_times_api_v1_bookings_available_times_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"date","in":"query","required":true,"schema":{"type":"string","description":"Date to check (YYYY-MM-DD)","title":"Date"},"description":"Date to check (YYYY-MM-DD)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Available Times Api V1 Bookings Available Times Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/bookings/{booking_id}/request-cancellation":{"post":{"tags":["bookings-v1","bookings","bookings"],"summary":"Request booking cancellation (Step 1 of 2)","description":"Request cancellation of a booking. This is step 1 of the 2-step cancellation workflow.\n\n    ## Workflow:\n    1. **This endpoint**: Status changes to CANCELLATION_REQUESTED (slot remains held)\n    2. **Approve or Reject**: Admin must then approve (releases slot) or reject (reverts status)\n\n    ## Why 2 Steps?\n    Hibachi slots are limited. Once a slot is released, another customer may book it immediately.\n    This workflow allows review before permanently releasing the slot.\n\n    ## What Happens:\n    - Booking status changes to `cancellation_requested`\n    - Previous status is stored for potential rejection/revert\n    - Slot remains HELD (not released) until approved\n    - Action is logged to audit trail\n\n    ## Authentication:\n    Requires CUSTOMER_SUPPORT role or higher.\n\n    ## Station Access:\n    STATION_MANAGER can only request cancellation for bookings in their station.","operationId":"request_cancellation_api_v1_bookings__booking_id__request_cancellation_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"booking_id","in":"path","required":true,"schema":{"type":"string","title":"Booking Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CancellationRequestInput"}}}},"responses":{"200":{"description":"Cancellation request recorded","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CancellationResponse"}}}},"400":{"description":"Invalid request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__ErrorResponse"}}}},"403":{"description":"Insufficient permissions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__ErrorResponse"}}}},"404":{"description":"Booking not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/bookings/{booking_id}/approve-cancellation":{"post":{"tags":["bookings-v1","bookings","bookings"],"summary":"Approve booking cancellation (Step 2 of 2 - Approve)","description":"Approve a pending cancellation request. This releases the slot.\n\n    ## What Happens:\n    - Booking status changes from CANCELLATION_REQUESTED to CANCELLED\n    - **Slot is RELEASED** (another customer can now book this slot)\n    - Cancellation notification sent to customer\n    - Action is logged to audit trail\n\n    ## Important:\n    This action is **IRREVERSIBLE** for the slot. Once released,\n    it may be immediately booked by another customer.","operationId":"approve_cancellation_api_v1_bookings__booking_id__approve_cancellation_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"booking_id","in":"path","required":true,"schema":{"type":"string","title":"Booking Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CancellationApprovalInput"}}}},"responses":{"200":{"description":"Cancellation approved","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CancellationResponse"}}}},"400":{"description":"Invalid request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__ErrorResponse"}}}},"403":{"description":"Insufficient permissions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__ErrorResponse"}}}},"404":{"description":"Booking not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/bookings/{booking_id}/reject-cancellation":{"post":{"tags":["bookings-v1","bookings","bookings"],"summary":"Reject booking cancellation (Step 2 of 2 - Reject)","description":"Reject a pending cancellation request. This reverts the booking status.\n\n    ## What Happens:\n    - Booking status REVERTS to the status it had before cancellation was requested\n    - Slot remains HELD (no change to slot availability)\n    - Rejection is logged to audit trail\n\n    ## Use Cases:\n    - Customer changed their mind and wants to proceed\n    - Cancellation request was within no-cancellation window\n    - Deposit is non-refundable per policy","operationId":"reject_cancellation_api_v1_bookings__booking_id__reject_cancellation_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"booking_id","in":"path","required":true,"schema":{"type":"string","title":"Booking Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CancellationRejectionInput"}}}},"responses":{"200":{"description":"Cancellation rejected","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CancellationResponse"}}}},"400":{"description":"Invalid request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__ErrorResponse"}}}},"403":{"description":"Insufficient permissions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__ErrorResponse"}}}},"404":{"description":"Booking not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/bookings/{booking_id}":{"delete":{"tags":["bookings-v1","bookings","bookings"],"summary":"Soft-delete a booking","description":"Soft-delete a booking (mark as deleted without permanent removal).\n\n    ## Authorization\n    Requires one of these roles:\n    - **SUPER_ADMIN**: Can delete any booking\n    - **ADMIN**: Can delete any booking\n    - **CUSTOMER_SUPPORT**: Can delete any booking\n    - **STATION_MANAGER**: Can only delete bookings from their assigned stations\n\n    ## Audit Trail\n    All deletions are logged with:\n    - Who deleted (user ID, role)\n    - When deleted (timestamp)\n    - Why deleted (reason)\n    - Previous state (for recovery)\n\n    ## Recovery\n    Soft-deleted bookings can be restored within 30 days.\n    After 30 days, they are permanently purged.\n\n    ## Compliance\n    - GDPR: Audit trail for data deletion requests\n    - SOC 2: Access control and logging\n    - PCI DSS: Cardholder data handling","operationId":"delete_booking_api_v1_bookings__booking_id__delete","parameters":[{"name":"booking_id","in":"path","required":true,"schema":{"type":"string","title":"Booking Id"}},{"name":"reason","in":"query","required":false,"schema":{"type":"string","default":"Customer request","title":"Reason"}}],"responses":{"200":{"description":"Booking soft-deleted successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DeleteBookingResponse"}}}},"403":{"description":"Not authorized to delete this booking"},"404":{"description":"Booking not found"},"422":{"description":"Cannot delete booking in current state"}}},"get":{"tags":["bookings-v1","bookings","bookings"],"summary":"Get booking details","description":"Retrieve detailed information about a specific booking.","operationId":"get_booking_api_v1_bookings__booking_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"booking_id","in":"path","required":true,"schema":{"type":"string","title":"Booking Id"}}],"responses":{"200":{"description":"Booking details","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Booking Api V1 Bookings  Booking Id  Get","$ref":"#/components/schemas/BookingResponse"}}}},"403":{"description":"Not authorized to view this booking","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__ErrorResponse"}}}},"404":{"description":"Booking not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["bookings-v1","bookings","bookings"],"summary":"Update an existing booking","description":"Update booking details such as date, time, guest count, location, or chef assignment.\n\n    ## Update Rules:\n    - Only pending or confirmed bookings can be updated\n    - Date/time changes must be at least 72 hours before event\n    - Pricing is recalculated if guest count changes\n\n    ## Chef Assignment:\n    - SUPER_ADMIN, ADMIN, or STATION_MANAGER can assign/unassign chefs\n    - Set chef_id to a valid chef UUID to assign\n    - Set chef_id to null to unassign the chef","operationId":"update_booking_api_v1_bookings__booking_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"booking_id","in":"path","required":true,"schema":{"type":"string","title":"Booking Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Update Booking Api V1 Bookings  Booking Id  Put"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/bookings/":{"get":{"tags":["bookings-v1","bookings","bookings"],"summary":"List bookings with cursor pagination","description":"Retrieve a paginated list of bookings.\n\n    ## Pagination\n    Uses cursor-based pagination for O(1) performance.\n    - First page: No cursor required\n    - Next page: Use `next_cursor` from response\n    - Previous page: Use `prev_cursor` from response\n\n    ## Filtering\n    - `user_id`: Filter by customer ID\n    - `status`: Filter by booking status\n\n    ## Multi-Tenant\n    Results are filtered by station based on user role.","operationId":"list_bookings_api_v1_bookings__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by customer ID","title":"User Id"},"description":"Filter by customer ID"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status","title":"Status"},"description":"Filter by status"},{"name":"cursor","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Pagination cursor","title":"Cursor"},"description":"Pagination cursor"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Items per page","default":50,"title":"Limit"},"description":"Items per page"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response List Bookings Api V1 Bookings  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["bookings-v1","bookings","bookings"],"summary":"Create a new booking","description":"Create a new hibachi catering booking.\n\n    ## Requirements:\n    - Valid authentication token\n    - Date must be at least 48 hours in the future\n    - Guest count between 1-50\n    - Valid US phone number and email\n\n    ## Pricing:\n    - Base price: Dynamic from pricing service\n    - Deposit required: $100 fixed (due within 2 hours)\n    - Party minimum: $550","operationId":"create_booking_api_v1_bookings__post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__bookings__schemas__BookingCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/public/bookings/booked-dates":{"get":{"tags":["public-bookings","public-bookings"],"summary":"Get all booked dates (PUBLIC)","description":"Retrieve dates that are fully booked.\n    No authentication required - used for calendar display on customer website.\n\n    ## Response:\n    Returns array of dates in YYYY-MM-DD format that are fully booked.","operationId":"get_booked_dates_public_api_v1_public_bookings_booked_dates_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookedDatesResponse"}}}}}}},"/api/v1/public/bookings/available-times":{"get":{"tags":["public-bookings","public-bookings"],"summary":"Get available time slots for a date (PUBLIC)","description":"Retrieve available time slots for a specific date.\n    No authentication required - used for booking form on customer website.\n\n    ## Query Parameters:\n    - **date**: Date to check in YYYY-MM-DD format\n\n    ## Response:\n    Returns array of time slots with availability status.\n    Time slots are: 12PM, 3PM, 6PM, 9PM","operationId":"get_available_times_api_v1_public_bookings_available_times_get","parameters":[{"name":"date","in":"query","required":true,"schema":{"type":"string","description":"Date to check (YYYY-MM-DD)","title":"Date"},"description":"Date to check (YYYY-MM-DD)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AvailableTimeSlotsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/public/bookings/":{"post":{"tags":["public-bookings","public-bookings"],"summary":"Create a new booking (PUBLIC)","description":"Create a new hibachi catering booking request.\n    No authentication required - for customer website use.\n\n    ## Requirements:\n    - Date must be at least 48 hours in the future\n    - Guest count between 1-50\n    - Valid US phone number and email\n    - Complete location address\n\n    ## Process:\n    1. Validates booking data\n    2. Checks availability for requested date/time\n    3. Calculates pricing based on guests\n    4. Creates booking with 'pending' status\n    5. Sends WhatsApp notification to business\n\n    ## Pricing (from BusinessConfig):\n    - Adult price: $55/person (ages 13+)\n    - Child price: $30/person (ages 6-12)\n    - Minimum party: $550\n    - Fixed deposit: $100 (due within 2 hours)","operationId":"create_public_booking_api_v1_public_bookings__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicBookingCreate"}}},"required":true},"responses":{"201":{"description":"Booking created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicBookingResponse"}}}},"400":{"description":"Invalid booking data"},"409":{"description":"Time slot not available"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/public/quote/calculate":{"post":{"tags":["public-quote","public-quote"],"summary":"Calculate party quote (PUBLIC)","description":"Calculate a hibachi party quote with dynamic pricing from BusinessConfig.\n    No authentication required - used by customer website.\n\n    ## Pricing (from BusinessConfig):\n    - Adult price: $55/person (13+)\n    - Child price: $30/person (6-12)\n    - Children under 5: FREE\n    - Party minimum: $550\n\n    ## Upgrades (per serving):\n    - Salmon: +$7\n    - Scallops: +$9\n    - Filet Mignon: +$10\n    - Lobster Tail: +$20\n    - Extra Protein: +$10 (premium adds upgrade price)\n\n    ## Add-ons (per serving):\n    - Yakisoba Noodles: +$5\n    - Extra Fried Rice: +$5\n    - Extra Vegetables: +$5\n    - Edamame: +$5\n    - Gyoza: +$10\n\n    ## Travel Fee:\n    - First 30 miles: FREE\n    - After 30 miles: $2/mile\n\n    ## Deposit:\n    - Fixed $100 deposit required","operationId":"calculate_quote_api_v1_public_quote_calculate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QuoteRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QuoteResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/public/quote/email":{"post":{"tags":["public-quote","public-quote"],"summary":"Email Quote to Customer","description":"Send the calculated quote to customer's email in plain text format.","operationId":"email_quote_api_v1_public_quote_email_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailQuoteRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailQuoteResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/config/all":{"get":{"tags":["public-config","public-config"],"summary":"Get All Config","description":"Get complete business configuration.\n\nThis endpoint is PUBLIC (no authentication required).\nUsed by customer website to display pricing, policies, etc.\n\nReturns:\n    BusinessConfigResponse: Nested configuration matching frontend interfaces\n\nFrontend Consumer:\n    apps/customer/src/hooks/useConfig.ts","operationId":"get_all_config_api_v1_config_all_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BusinessConfigResponse"}}}}}}},"/api/v1/policies/current":{"get":{"tags":["public-config","public-config"],"summary":"Get Current Policies","description":"Get current policies with human-readable text.\n\nThis endpoint is PUBLIC (no authentication required).\nUsed by customer website to display policy information.\n\nReturns:\n    PoliciesResponse: Policies with computed text fields\n\nFrontend Consumer:\n    apps/customer/src/hooks/usePolicies.ts","operationId":"get_current_policies_api_v1_policies_current_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PoliciesResponse"}}}}}}},"/api/v1/contact/":{"post":{"tags":["contact","contact"],"summary":"Submit Contact Form","description":"Submit a contact form inquiry.\n\nCreates a new lead with contact information for follow-up.\nThis endpoint is public and does not require authentication.\n\nArgs:\n    request: Contact form data including name, email, subject, and message\n\nReturns:\n    Success response with lead ID for tracking\n\nRaises:\n    HTTPException: 500 if database operation fails","operationId":"submit_contact_form_api_v1_contact__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContactFormRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ContactFormResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/login":{"post":{"tags":["Authentication","Authentication"],"summary":"Login","description":"Login with email and password.\n\nQueries identity.users table for user authentication.\nReturns JWT access token with user information.\n\nTest credentials:\n- admin@myhibachichef.com / Test2025!Secure (SUPER_ADMIN role)\n- station.admin@myhibachichef.com / Test2025!Secure (ADMIN role)\n- support@myhibachichef.com / Test2025!Secure (CUSTOMER_SUPPORT role)\n- manager@myhibachichef.com / Test2025!Secure (STATION_MANAGER role)\n- chef@myhibachichef.com / Test2025!Secure (CHEF role)","operationId":"login_api_v1_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/api__v1__endpoints__auth__LoginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/logout":{"post":{"tags":["Authentication","Authentication"],"summary":"Logout","description":"Logout current user.\nIn a stateless JWT system, logout is handled client-side by discarding the token.","operationId":"logout_api_v1_auth_logout_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/auth/me":{"get":{"tags":["Authentication","Authentication"],"summary":"Get Current User Info","description":"Get current authenticated user information.","operationId":"get_current_user_info_api_v1_auth_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api__v1__endpoints__auth__UserResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/auth/refresh":{"post":{"tags":["Authentication","Authentication"],"summary":"Refresh Token Endpoint","description":"Refresh access token using refresh token.\n\nDelegates to the full implementation in routers/v1/auth.py which provides:\n- Token validation with separate refresh secret\n- Token blacklist checking\n- Secure token rotation (new tokens, old one blacklisted)\n\nArgs:\n    refresh_data: Request body containing refresh_token\n\nReturns:\n    New access_token and refresh_token pair","operationId":"refresh_token_endpoint_api_v1_auth_refresh_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/mfa/status":{"get":{"tags":["MFA","Authentication","MFA"],"summary":"Get Mfa Status","description":"Get current user's MFA setup status.\n\nReturns whether WebAuthn and/or PIN are configured.","operationId":"get_mfa_status_api_v1_mfa_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MFAStatusResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/mfa/pin/setup":{"post":{"tags":["MFA","Authentication","MFA"],"summary":"Setup Pin","description":"Set up a PIN for the current user.\n\nPIN must be 4-6 digits. This is used as a fallback when WebAuthn is unavailable.","operationId":"setup_pin_api_v1_mfa_pin_setup_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PINSetupRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/mfa/pin/verify":{"post":{"tags":["MFA","Authentication","MFA"],"summary":"Verify Pin","description":"Verify PIN for 2nd factor authentication.\n\nFeatures:\n- Progressive lockout (15min â†’ 30min â†’ 1hr â†’ 24hr â†’ permanent)\n- Security alerts to Super Admins on lockout\n- Brute force detection\n\nReturns a new JWT token with MFA verified claim.","operationId":"verify_pin_api_v1_mfa_pin_verify_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PINVerifyRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MFAVerifiedResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/mfa/webauthn/register/start":{"post":{"tags":["MFA","Authentication","MFA"],"summary":"Webauthn Register Start","description":"Start WebAuthn registration process.\n\nReturns a challenge and options for the client to create a credential.\nThis works with Face ID, Touch ID, Windows Hello, and fingerprint sensors.","operationId":"webauthn_register_start_api_v1_mfa_webauthn_register_start_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebAuthnRegisterStartResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/mfa/webauthn/register/finish":{"post":{"tags":["MFA","Authentication","MFA"],"summary":"Webauthn Register Finish","description":"Complete WebAuthn registration.\n\nStores the credential for future authentication.","operationId":"webauthn_register_finish_api_v1_mfa_webauthn_register_finish_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebAuthnRegisterFinishRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/mfa/webauthn/verify/start":{"post":{"tags":["MFA","Authentication","MFA"],"summary":"Webauthn Verify Start","description":"Start WebAuthn verification process.\n\nReturns a challenge and list of allowed credentials.","operationId":"webauthn_verify_start_api_v1_mfa_webauthn_verify_start_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebAuthnVerifyStartResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/mfa/webauthn/verify/finish":{"post":{"tags":["MFA","Authentication","MFA"],"summary":"Webauthn Verify Finish","description":"Complete WebAuthn verification.\n\nVerifies the signature and issues an MFA-verified token.","operationId":"webauthn_verify_finish_api_v1_mfa_webauthn_verify_finish_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebAuthnVerifyFinishRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MFAVerifiedResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/mfa/pin/reset":{"post":{"tags":["MFA","Authentication","MFA","Admin"],"summary":"Reset User Pin","description":"Reset a user's PIN (SUPER_ADMIN only).\n\nThis forces the user to set up a new PIN on next login.","operationId":"reset_user_pin_api_v1_mfa_pin_reset_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PINResetRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/mfa/webauthn/device/{credential_id}":{"delete":{"tags":["MFA","Authentication","MFA"],"summary":"Remove Webauthn Device","description":"Remove a WebAuthn device (user can remove their own, SUPER_ADMIN can remove any).","operationId":"remove_webauthn_device_api_v1_mfa_webauthn_device__credential_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"credential_id","in":"path","required":true,"schema":{"type":"string","title":"Credential Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/mfa/devices":{"get":{"tags":["MFA","Authentication","MFA"],"summary":"List Webauthn Devices","description":"List all WebAuthn devices registered for the current user.","operationId":"list_webauthn_devices_api_v1_mfa_devices_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/security/stats":{"get":{"tags":["Security","Super Admin","Security Dashboard"],"summary":"Get Security Stats","description":"Get security dashboard statistics (SUPER_ADMIN only).\n\nReturns counts of alerts, events, lockouts, etc.","operationId":"get_security_stats_api_v1_security_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SecurityStats"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/security/alerts":{"get":{"tags":["Security","Super Admin","Security Dashboard"],"summary":"Get Alerts","description":"Get security alerts (SUPER_ADMIN only).\n\nFilters:\n- status: new, acknowledged, resolved, dismissed\n- severity: low, medium, high, critical","operationId":"get_alerts_api_v1_security_alerts_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string","pattern":"^(new|acknowledged|resolved|dismissed)$"},{"type":"null"}],"title":"Status"}},{"name":"severity","in":"query","required":false,"schema":{"anyOf":[{"type":"string","pattern":"^(low|medium|high|critical)$"},{"type":"null"}],"title":"Severity"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/security/alerts/{alert_id}":{"patch":{"tags":["Security","Super Admin","Security Dashboard"],"summary":"Update Alert Status","description":"Update alert status (SUPER_ADMIN only).\n\nValid statuses: acknowledged, resolved, dismissed","operationId":"update_alert_status_api_v1_security_alerts__alert_id__patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"alert_id","in":"path","required":true,"schema":{"type":"string","title":"Alert Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AlertStatusUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/security/events":{"get":{"tags":["Security","Super Admin","Security Dashboard"],"summary":"Get Security Events","description":"Get security event log (SUPER_ADMIN only).\n\nFilters:\n- event_type: login_failed, mfa_failed, account_locked, etc.\n- user_id: Filter by specific user\n- ip_address: Filter by IP\n- hours: How far back to look (default 24, max 168)","operationId":"get_security_events_api_v1_security_events_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"event_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Event Type"}},{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Id"}},{"name":"ip_address","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ip Address"}},{"name":"hours","in":"query","required":false,"schema":{"type":"integer","maximum":168,"minimum":1,"default":24,"title":"Hours"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"minimum":1,"default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/security/blocked-ips":{"get":{"tags":["Security","Super Admin","Security Dashboard"],"summary":"Get Blocked Ips","description":"Get list of blocked IP addresses (SUPER_ADMIN only).","operationId":"get_blocked_ips_api_v1_security_blocked_ips_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]},"post":{"tags":["Security","Super Admin","Security Dashboard"],"summary":"Block Ip","description":"Block an IP address (SUPER_ADMIN only).","operationId":"block_ip_api_v1_security_blocked_ips_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BlockIPRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/security/blocked-ips/{ip_address}":{"delete":{"tags":["Security","Super Admin","Security Dashboard"],"summary":"Unblock Ip","description":"Unblock an IP address (SUPER_ADMIN only).","operationId":"unblock_ip_api_v1_security_blocked_ips__ip_address__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"ip_address","in":"path","required":true,"schema":{"type":"string","title":"Ip Address"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/security/restore-account":{"post":{"tags":["Security","Super Admin","Security Dashboard"],"summary":"Restore Account","description":"Restore a security-disabled account (SUPER_ADMIN only).\n\nThis action:\n- Removes security disabled flag\n- Resets lockout count\n- Clears PIN lock\n- Optionally resets PIN (requiring user to set new one)","operationId":"restore_account_api_v1_security_restore_account_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RestoreAccountRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/security/disabled-accounts":{"get":{"tags":["Security","Super Admin","Security Dashboard"],"summary":"Get Disabled Accounts","description":"Get list of security-disabled accounts (SUPER_ADMIN only).","operationId":"get_disabled_accounts_api_v1_security_disabled_accounts_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/security/login-history":{"get":{"tags":["Security","Super Admin","Security Dashboard"],"summary":"Get Login History","description":"Get login history with IP tracking (SUPER_ADMIN only).\n\nFilters:\n- user_id: Filter by specific user\n- ip_address: Filter by IP address\n- suspicious_only: Show only flagged logins\n- hours: How far back to look (default 24, max 720)","operationId":"get_login_history_api_v1_security_login_history_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Id"}},{"name":"ip_address","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ip Address"}},{"name":"suspicious_only","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Suspicious Only"}},{"name":"hours","in":"query","required":false,"schema":{"type":"integer","maximum":720,"minimum":1,"default":24,"title":"Hours"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"minimum":1,"default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/security/login-history/user/{user_id}":{"get":{"tags":["Security","Super Admin","Security Dashboard"],"summary":"Get User Login History","description":"Get login history for a specific user (SUPER_ADMIN only).\n\nShows all logins with device and location info.","operationId":"get_user_login_history_api_v1_security_login_history_user__user_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/security/login-history/ip/{ip_address}":{"get":{"tags":["Security","Super Admin","Security Dashboard"],"summary":"Get Ip Login History","description":"Get login history for a specific IP address (SUPER_ADMIN only).\n\nShows all accounts that logged in from this IP.","operationId":"get_ip_login_history_api_v1_security_login_history_ip__ip_address__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"ip_address","in":"path","required":true,"schema":{"type":"string","title":"Ip Address"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/security/known-ips/{user_id}":{"get":{"tags":["Security","Super Admin","Security Dashboard"],"summary":"Get User Known Ips","description":"Get list of known/trusted IPs for a user (SUPER_ADMIN only).\n\nShows all IPs the user has logged in from.","operationId":"get_user_known_ips_api_v1_security_known_ips__user_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/security/suspicious-logins":{"get":{"tags":["Security","Super Admin","Security Dashboard"],"summary":"Get Suspicious Logins","description":"Get recent suspicious logins (SUPER_ADMIN only).\n\nShows logins flagged as suspicious due to:\n- New IP address\n- Geo-impossible travel\n- Bad IP reputation\n- Multiple accounts from same IP","operationId":"get_suspicious_logins_api_v1_security_suspicious_logins_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"hours","in":"query","required":false,"schema":{"type":"integer","maximum":720,"minimum":1,"default":168,"title":"Hours"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"minimum":1,"default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/customers/":{"get":{"tags":["Customers"],"summary":"List Customers","description":"List customers with pagination and search\nAdmin rate limit: 100 requests/minute","operationId":"list_customers_api_v1_customers__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Items per page","default":20,"title":"Per Page"},"description":"Items per page"},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Search by name, email, or phone","title":"Search"},"description":"Search by name, email, or phone"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/CustomerStatus"},{"type":"null"}],"description":"Filter by status","title":"Status"},"description":"Filter by status"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerSearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Customers"],"summary":"Create Customer","description":"Create new customer\nAdmin rate limit: 100 requests/minute","operationId":"create_customer_api_v1_customers__post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/customers/{customer_id}":{"get":{"tags":["Customers"],"summary":"Get Customer","description":"Get specific customer by ID\nAdmin rate limit: 100 requests/minute","operationId":"get_customer_api_v1_customers__customer_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"customer_id","in":"path","required":true,"schema":{"type":"integer","title":"Customer Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Customers"],"summary":"Update Customer","description":"Update existing customer\nAdmin rate limit: 100 requests/minute","operationId":"update_customer_api_v1_customers__customer_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"customer_id","in":"path","required":true,"schema":{"type":"integer","title":"Customer Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Customers"],"summary":"Delete Customer","description":"Delete customer (soft delete)\nAdmin rate limit: 100 requests/minute","operationId":"delete_customer_api_v1_customers__customer_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"customer_id","in":"path","required":true,"schema":{"type":"integer","title":"Customer Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/customers/{customer_id}/bookings":{"get":{"tags":["Customers"],"summary":"Get Customer Bookings","description":"Get all bookings for a specific customer\nAdmin rate limit: 100 requests/minute","operationId":"get_customer_bookings_api_v1_customers__customer_id__bookings_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"customer_id","in":"path","required":true,"schema":{"type":"integer","title":"Customer Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/leads/":{"get":{"tags":["Leads"],"summary":"List Leads","description":"List leads with pagination and search\nAdmin rate limit: 100 requests/minute","operationId":"list_leads_api_v1_leads__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Items per page","default":20,"title":"Per Page"},"description":"Items per page"},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Search by name, email, or phone","title":"Search"},"description":"Search by name, email, or phone"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/LeadStatus"},{"type":"null"}],"description":"Filter by status","title":"Status"},"description":"Filter by status"},{"name":"source","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/LeadSource"},{"type":"null"}],"description":"Filter by source","title":"Source"},"description":"Filter by source"},{"name":"assigned_to","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by assigned user","title":"Assigned To"},"description":"Filter by assigned user"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeadSearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Leads"],"summary":"Create Lead","description":"Create new lead\nAdmin rate limit: 100 requests/minute","operationId":"create_lead_api_v1_leads__post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/api__v1__endpoints__leads__LeadCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api__v1__endpoints__leads__LeadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/leads/pipeline/stats":{"get":{"tags":["Leads"],"summary":"Get Pipeline Stats","description":"Get lead pipeline statistics\nAdmin rate limit: 100 requests/minute","operationId":"get_pipeline_stats_api_v1_leads_pipeline_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeadPipelineStats"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/leads/{lead_id}":{"get":{"tags":["Leads"],"summary":"Get Lead","description":"Get specific lead by ID\nAdmin rate limit: 100 requests/minute","operationId":"get_lead_api_v1_leads__lead_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"integer","title":"Lead Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api__v1__endpoints__leads__LeadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Leads"],"summary":"Update Lead","description":"Update existing lead\nAdmin rate limit: 100 requests/minute","operationId":"update_lead_api_v1_leads__lead_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"integer","title":"Lead Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/api__v1__endpoints__leads__LeadUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api__v1__endpoints__leads__LeadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Leads"],"summary":"Delete Lead","description":"Delete lead\nAdmin rate limit: 100 requests/minute","operationId":"delete_lead_api_v1_leads__lead_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"integer","title":"Lead Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/leads/{lead_id}/assign":{"post":{"tags":["Leads"],"summary":"Assign Lead","description":"Assign lead to admin user\nAdmin rate limit: 100 requests/minute","operationId":"assign_lead_api_v1_leads__lead_id__assign_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"integer","title":"Lead Id"}},{"name":"assigned_to","in":"query","required":true,"schema":{"type":"string","description":"Email of admin to assign to","title":"Assigned To"},"description":"Email of admin to assign to"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/inbox/threads":{"get":{"tags":["unified-inbox","Unified Inbox"],"summary":"Get Threads","description":"Get threads with filtering and pagination","operationId":"get_threads_api_v1_inbox_threads_get","parameters":[{"name":"channel","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/api__v1__inbox__models__MessageChannel"},{"type":"null"}],"title":"Channel"}},{"name":"contact_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Contact Id"}},{"name":"is_active","in":"query","required":false,"schema":{"type":"boolean","default":true,"title":"Is Active"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/api__v1__inbox__schemas__ThreadResponse"},"title":"Response Get Threads Api V1 Inbox Threads Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["unified-inbox","Unified Inbox"],"summary":"Create Thread","description":"Create a new message thread","operationId":"create_thread_api_v1_inbox_threads_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ThreadCreateRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api__v1__inbox__schemas__ThreadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/inbox/threads/{thread_id}":{"get":{"tags":["unified-inbox","Unified Inbox"],"summary":"Get Thread With Messages","description":"Get thread with message history","operationId":"get_thread_with_messages_api_v1_inbox_threads__thread_id__get","parameters":[{"name":"thread_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Thread Id"}},{"name":"include_messages","in":"query","required":false,"schema":{"type":"boolean","default":true,"title":"Include Messages"}},{"name":"message_limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"minimum":1,"default":100,"title":"Message Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ThreadWithMessagesResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Inbox"],"summary":"Update Thread","description":"Update thread properties (status, assignment, etc.)\nAdmin rate limit: 100 requests/minute","operationId":"update_thread_api_v1_inbox_threads__thread_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"thread_id","in":"path","required":true,"schema":{"type":"integer","title":"Thread Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ThreadUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api__v1__endpoints__inbox__ThreadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["unified-inbox","Unified Inbox"],"summary":"Update Thread","description":"Update thread properties","operationId":"update_thread_api_v1_inbox_threads__thread_id__patch","parameters":[{"name":"thread_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Thread Id"}},{"name":"is_active","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},{"name":"is_archived","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Archived"}},{"name":"subject","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subject"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/inbox/threads/{thread_id}/messages":{"post":{"tags":["Inbox"],"summary":"Send Message","description":"Send message in thread\nAdmin rate limit: 100 requests/minute","operationId":"send_message_api_v1_inbox_threads__thread_id__messages_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"thread_id","in":"path","required":true,"schema":{"type":"integer","title":"Thread Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api__v1__endpoints__inbox__MessageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/inbox/stats":{"get":{"tags":["unified-inbox","Unified Inbox"],"summary":"Get Message Stats","description":"Get message statistics","operationId":"get_message_stats_api_v1_inbox_stats_get","parameters":[{"name":"channel","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/api__v1__inbox__models__MessageChannel"},{"type":"null"}],"title":"Channel"}},{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"default":7,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageStatsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/inbox/threads/{thread_id}/ai-reply":{"post":{"tags":["Inbox"],"summary":"Generate Ai Reply","description":"Generate AI-suggested reply for thread\nAdmin rate limit: 100 requests/minute (but AI endpoint is 10/min)","operationId":"generate_ai_reply_api_v1_inbox_threads__thread_id__ai_reply_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"thread_id","in":"path","required":true,"schema":{"type":"integer","title":"Thread Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/inbox/threads/{thread_id}/assign":{"post":{"tags":["Inbox"],"summary":"Assign Thread","description":"Assign thread to admin user\nAdmin rate limit: 100 requests/minute","operationId":"assign_thread_api_v1_inbox_threads__thread_id__assign_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"thread_id","in":"path","required":true,"schema":{"type":"integer","title":"Thread Id"}},{"name":"assigned_to","in":"query","required":true,"schema":{"type":"string","description":"Email of admin to assign to","title":"Assigned To"},"description":"Email of admin to assign to"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/pricing/current":{"get":{"tags":["Pricing"],"summary":"Get Current Pricing","description":"Get current menu pricing and addon items\n\nUses BusinessConfig for dynamic pricing values (Single Source of Truth).\nMenu items and addons are hardcoded as they rarely change.","operationId":"get_current_pricing_api_v1_pricing_current_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Current Pricing Api V1 Pricing Current Get"}}}}}}},"/api/v1/pricing/calculate":{"post":{"tags":["Pricing"],"summary":"Calculate Quote","description":"Calculate party quote with breakdown\nUses BusinessConfig for dynamic pricing values.\n\nNOTE: For public quote calculation without auth, use /api/v1/public/quote/calculate","operationId":"calculate_quote_api_v1_pricing_calculate_post","parameters":[{"name":"adults","in":"query","required":true,"schema":{"type":"integer","title":"Adults"}},{"name":"children","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Children"}},{"name":"children_under_5","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Children Under 5"}},{"name":"customer_address","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Address"}},{"name":"customer_zipcode","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Zipcode"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Body_calculate_quote_api_v1_pricing_calculate_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Calculate Quote Api V1 Pricing Calculate Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/pricing/summary":{"get":{"tags":["Pricing"],"summary":"Get Pricing Summary","description":"Get comprehensive pricing summary for display\nDelegates to /pricing/current","operationId":"get_pricing_summary_api_v1_pricing_summary_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Pricing Summary Api V1 Pricing Summary Get"}}}}}}},"/api/v1/menu-items":{"get":{"tags":["Pricing","Menu Items","menu-items"],"summary":"Get Menu Items","description":"Get all menu items\n\nArgs:\n    active_only: If True, only return active items\n    session: Database session\n\nReturns:\n    List of menu items","operationId":"get_menu_items_api_v1_menu_items_get","parameters":[{"name":"active_only","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Active Only"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MenuItemResponse"},"title":"Response Get Menu Items Api V1 Menu Items Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Pricing","Menu Items","menu-items"],"summary":"Create Menu Item","description":"Create a new menu item\n\nArgs:\n    data: Menu item creation data\n    session: Database session\n\nReturns:\n    Created menu item","operationId":"create_menu_item_api_v1_menu_items_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MenuItemCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MenuItemResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/menu-items/{item_id}":{"get":{"tags":["Pricing","Menu Items","menu-items"],"summary":"Get Menu Item","description":"Get a specific menu item by ID\n\nArgs:\n    item_id: Menu item UUID\n    session: Database session\n\nReturns:\n    Menu item details","operationId":"get_menu_item_api_v1_menu_items__item_id__get","parameters":[{"name":"item_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Item Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MenuItemResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Pricing","Menu Items","menu-items"],"summary":"Update Menu Item","description":"Update an existing menu item\n\nArgs:\n    item_id: Menu item UUID\n    data: Update data\n    session: Database session\n\nReturns:\n    Updated menu item","operationId":"update_menu_item_api_v1_menu_items__item_id__put","parameters":[{"name":"item_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Item Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MenuItemUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MenuItemResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Pricing","Menu Items","menu-items"],"summary":"Delete Menu Item","description":"Delete a menu item\n\nArgs:\n    item_id: Menu item UUID\n    session: Database session","operationId":"delete_menu_item_api_v1_menu_items__item_id__delete","parameters":[{"name":"item_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Item Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/addon-items":{"get":{"tags":["Pricing","Addon Items","addon-items"],"summary":"Get Addon Items","description":"Get all addon items\n\nArgs:\n    active_only: If True, only return active items\n    session: Database session\n\nReturns:\n    List of addon items","operationId":"get_addon_items_api_v1_addon_items_get","parameters":[{"name":"active_only","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Active Only"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AddonItemResponse"},"title":"Response Get Addon Items Api V1 Addon Items Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Pricing","Addon Items","addon-items"],"summary":"Create Addon Item","description":"Create a new addon item\n\nArgs:\n    data: Addon item creation data\n    session: Database session\n\nReturns:\n    Created addon item","operationId":"create_addon_item_api_v1_addon_items_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddonItemCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddonItemResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/addon-items/{item_id}":{"get":{"tags":["Pricing","Addon Items","addon-items"],"summary":"Get Addon Item","description":"Get a specific addon item by ID\n\nArgs:\n    item_id: Addon item UUID\n    session: Database session\n\nReturns:\n    Addon item details","operationId":"get_addon_item_api_v1_addon_items__item_id__get","parameters":[{"name":"item_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Item Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddonItemResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Pricing","Addon Items","addon-items"],"summary":"Update Addon Item","description":"Update an existing addon item\n\nArgs:\n    item_id: Addon item UUID\n    data: Update data\n    session: Database session\n\nReturns:\n    Updated addon item","operationId":"update_addon_item_api_v1_addon_items__item_id__put","parameters":[{"name":"item_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Item Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddonItemUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddonItemResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Pricing","Addon Items","addon-items"],"summary":"Delete Addon Item","description":"Delete an addon item\n\nArgs:\n    item_id: Addon item UUID\n    session: Database session","operationId":"delete_addon_item_api_v1_addon_items__item_id__delete","parameters":[{"name":"item_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Item Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/chat":{"post":{"tags":["AI","AI Chat"],"summary":"Send Chat Message","description":"Send message to AI chatbot\n\nRate Limited: 10 requests/minute for all users (cost control)\n\nSupports multiple channels:\n- web: Website chat widget\n- sms: SMS conversations via RingCentral\n- instagram: Instagram DM automation\n- facebook: Facebook Messenger automation","operationId":"send_chat_message_api_v1_ai_chat_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/ai/chat/threads/{thread_id}":{"get":{"tags":["AI","AI Chat"],"summary":"Get Chat Thread","description":"Get chat thread history","operationId":"get_chat_thread_api_v1_ai_chat_threads__thread_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"thread_id","in":"path","required":true,"schema":{"type":"string","title":"Thread Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatThread"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["AI","AI Chat"],"summary":"Delete Chat Thread","description":"Delete chat thread","operationId":"delete_chat_thread_api_v1_ai_chat_threads__thread_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"thread_id","in":"path","required":true,"schema":{"type":"string","title":"Thread Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/chat/history":{"get":{"tags":["AI","AI Chat"],"summary":"Get Chat History","description":"Get chat history for user or admin","operationId":"get_chat_history_api_v1_ai_chat_history_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"per_page","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Per Page"}},{"name":"channel","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Channel"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatHistory"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/chat/stats":{"get":{"tags":["AI","AI Chat"],"summary":"Get Chat Stats","description":"Get AI chat statistics\nPublic stats for all users, detailed stats for admins","operationId":"get_chat_stats_api_v1_ai_chat_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/ai/orchestrator/process":{"post":{"tags":["AI Orchestrator"],"summary":"Process Inquiry","description":"Process customer inquiry with AI orchestrator.\n\nThis endpoint:\n1. Receives customer inquiry from any channel\n2. Uses OpenAI function calling to determine tool usage\n3. Executes tools (pricing, travel fees, protein costs)\n4. Generates AI response with tool results\n5. Returns response for admin review\n\n**Example Request:**\n```json\n{\n    \"message\": \"I need a hibachi chef for 10 adults with filet mignon in Sacramento 95630\",\n    \"channel\": \"email\",\n    \"customer_context\": {\n        \"name\": \"John Doe\",\n        \"email\": \"john@example.com\",\n        \"phone\": \"(916) 555-0123\",\n        \"zipcode\": \"95630\"\n    }\n}\n```\n\n**Example Response:**\n```json\n{\n    \"success\": true,\n    \"response\": \"I'd be happy to help you with a quote! For 10 adults...\",\n    \"tools_used\": [\n        {\n            \"tool_name\": \"calculate_party_quote\",\n            \"parameters\": {...},\n            \"result\": {...},\n            \"execution_time_ms\": 150.5,\n            \"success\": true\n        }\n    ],\n    \"requires_admin_review\": true,\n    \"conversation_id\": \"conv_20251031_123456\"\n}\n```\n\nArgs:\n    request: Customer inquiry request\n    orchestrator: AI orchestrator instance\n\nReturns:\n    AI-generated response with tool execution details\n\nRaises:\n    HTTPException: If inquiry processing fails","operationId":"process_inquiry_api_v1_ai_orchestrator_process_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrchestratorRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrchestratorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/orchestrator/batch-process":{"post":{"tags":["AI Orchestrator"],"summary":"Batch Process Inquiries","description":"Process multiple inquiries in batch.\n\nThis endpoint is useful for:\n- Processing multiple customer inquiries at once\n- Bulk email responses\n- Admin review queue processing\n\n**Example Request:**\n```json\n[\n    {\n        \"message\": \"Quote for 10 adults...\",\n        \"channel\": \"email\",\n        \"customer_context\": {...}\n    },\n    {\n        \"message\": \"Quote for 15 adults...\",\n        \"channel\": \"email\",\n        \"customer_context\": {...}\n    }\n]\n```\n\nArgs:\n    requests: List of customer inquiry requests\n    background_tasks: FastAPI background tasks\n    orchestrator: AI orchestrator instance\n\nReturns:\n    List of AI-generated responses","operationId":"batch_process_inquiries_api_v1_ai_orchestrator_batch_process_post","requestBody":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/OrchestratorRequest"},"type":"array","title":"Requests"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/orchestrator/config":{"get":{"tags":["AI Orchestrator"],"summary":"Get Orchestrator Config","description":"Get current orchestrator configuration.\n\nReturns:\n    Current orchestrator configuration including Phase 3 feature flags","operationId":"get_orchestrator_config_api_v1_ai_orchestrator_config_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/ai/orchestrator/health":{"get":{"tags":["AI Orchestrator"],"summary":"Health Check","description":"Health check endpoint for orchestrator.\n\nReturns:\n    Health status of orchestrator service","operationId":"health_check_api_v1_ai_orchestrator_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/ai/orchestrator/tools":{"get":{"tags":["AI Orchestrator"],"summary":"List Tools","description":"List all available tools.\n\nReturns:\n    List of tools with their schemas","operationId":"list_tools_api_v1_ai_orchestrator_tools_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/ai/costs/summary":{"get":{"tags":["AI Cost Monitoring","AI Cost Monitoring"],"summary":"Get Cost Summary","description":"Get comprehensive cost summary including:\n- Current month spending vs threshold\n- Today's costs\n- Model breakdown\n- Llama3 upgrade recommendations","operationId":"get_cost_summary_api_v1_ai_costs_summary_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Cost Summary Api V1 Ai Costs Summary Get"}}}}}}},"/api/v1/ai/costs/trend":{"get":{"tags":["AI Cost Monitoring","AI Cost Monitoring"],"summary":"Get Cost Trend","description":"Get daily cost trend for the specified number of days","operationId":"get_cost_trend_api_v1_ai_costs_trend_get","parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":90,"minimum":1,"default":30,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Cost Trend Api V1 Ai Costs Trend Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/costs/hourly":{"get":{"tags":["AI Cost Monitoring","AI Cost Monitoring"],"summary":"Get Hourly Costs","description":"Get hourly cost breakdown for a specific date","operationId":"get_hourly_costs_api_v1_ai_costs_hourly_get","parameters":[{"name":"date","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Date in YYYY-MM-DD format (defaults to today)","title":"Date"},"description":"Date in YYYY-MM-DD format (defaults to today)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":true},"title":"Response Get Hourly Costs Api V1 Ai Costs Hourly Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/costs/alerts":{"get":{"tags":["AI Cost Monitoring","AI Cost Monitoring"],"summary":"Check Cost Alerts","description":"Check if any cost thresholds have been exceeded\nReturns alerts that should trigger notifications","operationId":"check_cost_alerts_api_v1_ai_costs_alerts_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Check Cost Alerts Api V1 Ai Costs Alerts Get"}}}}}}},"/api/v1/ai/costs/top-expensive":{"get":{"tags":["AI Cost Monitoring","AI Cost Monitoring"],"summary":"Get Top Expensive Queries","description":"Get the most expensive API calls\nUseful for identifying optimization opportunities","operationId":"get_top_expensive_queries_api_v1_ai_costs_top_expensive_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":10,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":true},"title":"Response Get Top Expensive Queries Api V1 Ai Costs Top Expensive Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/costs/set-budget":{"post":{"tags":["AI Cost Monitoring","AI Cost Monitoring"],"summary":"Set Monthly Budget","description":"Update the monthly budget threshold","operationId":"set_monthly_budget_api_v1_ai_costs_set_budget_post","parameters":[{"name":"budget_usd","in":"query","required":true,"schema":{"type":"number","exclusiveMinimum":0,"description":"Monthly budget in USD","title":"Budget Usd"},"description":"Monthly budget in USD"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Set Monthly Budget Api V1 Ai Costs Set Budget Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/shadow/health":{"get":{"tags":["Shadow Learning","Shadow Learning"],"summary":"Shadow Learning Health","description":"Check Shadow Learning system health\n\nVerifies:\n- Ollama service is running\n- Llama-3 model is installed\n- Service connectivity","operationId":"shadow_learning_health_api_v1_ai_shadow_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/ai/shadow/model-info":{"get":{"tags":["Shadow Learning","Shadow Learning"],"summary":"Get Shadow Model Info","description":"Get detailed information about the local Llama-3 model","operationId":"get_shadow_model_info_api_v1_ai_shadow_model_info_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/ai/shadow/test-generate":{"post":{"tags":["Shadow Learning","Shadow Learning"],"summary":"Test Local Generation","description":"Test local model generation\n\nUse this endpoint to manually test the Llama-3 model\nwithout logging to the database.","operationId":"test_local_generation_api_v1_ai_shadow_test_generate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Body_test_local_generation_api_v1_ai_shadow_test_generate_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/shadow/stats":{"get":{"tags":["Shadow Learning","Shadow Learning"],"summary":"Get Shadow Learning Stats","description":"Get Shadow Learning training statistics\n\nShows how many teacher-student pairs have been collected,\naverage similarity scores, and response time comparisons.","operationId":"get_shadow_learning_stats_api_v1_ai_shadow_stats_get","parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","default":7,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/shadow/training-data":{"get":{"tags":["Shadow Learning","Shadow Learning"],"summary":"Get Training Data Preview","description":"Preview high-quality training data pairs\n\nShows examples of teacher-student pairs that would be\nused for fine-tuning the local model.","operationId":"get_training_data_preview_api_v1_ai_shadow_training_data_get","parameters":[{"name":"min_similarity","in":"query","required":false,"schema":{"type":"number","default":0.85,"title":"Min Similarity"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/shadow/readiness":{"get":{"tags":["Shadow Learning","Shadow Learning"],"summary":"Check Deployment Readiness","description":"Check if Shadow Learning system is ready for deployment\n\nEvaluates:\n- Ollama service health\n- Data collection progress\n- Model performance metrics","operationId":"check_deployment_readiness_api_v1_ai_shadow_readiness_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/ai/readiness/dashboard":{"get":{"tags":["AI Readiness","AI Readiness & Monitoring"],"summary":"Get Readiness Dashboard","description":"ðŸŽ¯ **MAIN DASHBOARD** - Complete AI readiness overview\n\nShows:\n- Overall readiness score\n- Per-intent breakdown\n- Quality metrics\n- Actionable recommendations\n\n**Use this endpoint to decide when to activate Ollama!**","operationId":"get_readiness_dashboard_api_v1_ai_readiness_dashboard_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/ai/readiness/intent/{intent}":{"get":{"tags":["AI Readiness","AI Readiness & Monitoring"],"summary":"Get Intent Readiness","description":"Get detailed readiness for specific intent\n\n**Intent categories:**\n- `faq`: FAQ and general info\n- `quote`: Price quotes and estimates\n- `booking`: Booking and scheduling","operationId":"get_intent_readiness_api_v1_ai_readiness_intent__intent__get","parameters":[{"name":"intent","in":"path","required":true,"schema":{"type":"string","title":"Intent"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/readiness/overall":{"get":{"tags":["AI Readiness","AI Readiness & Monitoring"],"summary":"Get Overall Status","description":"Quick overall readiness check\n\nReturns simplified status (green/yellow/red)","operationId":"get_overall_status_api_v1_ai_readiness_overall_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/ai/readiness/routing/stats":{"get":{"tags":["AI Readiness","AI Readiness & Monitoring"],"summary":"Get Routing Stats","description":"Get routing statistics\n\nShows how traffic is split between OpenAI and Ollama","operationId":"get_routing_stats_api_v1_ai_readiness_routing_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/ai/readiness/routing/update-split":{"post":{"tags":["AI Readiness","AI Readiness & Monitoring"],"summary":"Update Traffic Split","description":"ðŸŽšï¸ **GRADUAL ROLLOUT CONTROL** - Update traffic split\n\nExample: Set FAQ to 10% local traffic\n```json\n{\n  \"intent\": \"faq\",\n  \"percentage\": 10\n}\n```\n\n**Recommended rollout:**\n- Week 1: 10%\n- Week 2: 25%\n- Week 3: 50%\n- Week 4+: 75-100%","operationId":"update_traffic_split_api_v1_ai_readiness_routing_update_split_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrafficSplitUpdate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/readiness/activation/enable":{"post":{"tags":["AI Readiness","AI Readiness & Monitoring"],"summary":"Enable Local Ai","description":"ðŸš€ **ONE-CLICK ACTIVATION** - Enable local AI mode\n\n**Modes:**\n- `shadow`: Learning only (no customer impact)\n- `active`: Production use (based on traffic splits)\n\n**âš ï¸ WARNING:** Only enable 'active' mode when readiness >= 85%\n\nExample:\n```json\n{\n  \"mode\": \"active\",\n  \"reason\": \"FAQ intent at 92% readiness, starting 10% rollout\"\n}\n```","operationId":"enable_local_ai_api_v1_ai_readiness_activation_enable_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ActivationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/readiness/activation/disable":{"post":{"tags":["AI Readiness","AI Readiness & Monitoring"],"summary":"Disable Local Ai","description":"ðŸ›‘ **EMERGENCY STOP** - Disable local AI immediately\n\nSwitches back to shadow mode (OpenAI only for customers)","operationId":"disable_local_ai_api_v1_ai_readiness_activation_disable_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/ai/readiness/quality/alerts":{"get":{"tags":["AI Readiness","AI Readiness & Monitoring"],"summary":"Get Quality Alerts","description":"Get quality alerts\n\n**Severity levels:**\n- `info`: Informational\n- `warning`: Needs attention\n- `critical`: Auto-rollback triggered\n\nExample: `GET /quality/alerts?severity=critical&limit=5`","operationId":"get_quality_alerts_api_v1_ai_readiness_quality_alerts_get","parameters":[{"name":"severity","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Severity"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/readiness/quality/comparison":{"get":{"tags":["AI Readiness","AI Readiness & Monitoring"],"summary":"Get Quality Comparison","description":"Teacher vs Student quality comparison\n\nShows side-by-side metrics:\n- Similarity scores\n- Response times\n- Cost analysis\n\nExample: `GET /quality/comparison?intent=faq&days=7`","operationId":"get_quality_comparison_api_v1_ai_readiness_quality_comparison_get","parameters":[{"name":"intent","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Intent"}},{"name":"days","in":"query","required":false,"schema":{"type":"integer","default":7,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/readiness/quality/rollback/{intent}":{"post":{"tags":["AI Readiness","AI Readiness & Monitoring"],"summary":"Manual Rollback","description":"ðŸ”„ **MANUAL ROLLBACK** - Disable local model for specific intent\n\nUseful if you notice quality issues","operationId":"manual_rollback_api_v1_ai_readiness_quality_rollback__intent__post","parameters":[{"name":"intent","in":"path","required":true,"schema":{"type":"string","title":"Intent"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/readiness/quality/rollback-history":{"get":{"tags":["AI Readiness","AI Readiness & Monitoring"],"summary":"Get Rollback History","description":"Get history of automatic rollbacks\n\nShows when and why rollbacks occurred","operationId":"get_rollback_history_api_v1_ai_readiness_quality_rollback_history_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/ai/readiness/ml/predictor-stats":{"get":{"tags":["AI Readiness","AI Readiness & Monitoring"],"summary":"Get Predictor Stats","description":"Get ML confidence predictor statistics\n\nShows training status and performance","operationId":"get_predictor_stats_api_v1_ai_readiness_ml_predictor_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/ai/readiness/ml/test-confidence":{"post":{"tags":["AI Readiness","AI Readiness & Monitoring"],"summary":"Test Confidence Prediction","description":"ðŸ§ª **TEST CONFIDENCE** - Predict quality for a test message\n\nExample:\n```json\n{\n  \"message\": \"What are your business hours?\",\n  \"intent\": \"faq\"\n}\n```\n\nReturns predicted confidence (0-1)","operationId":"test_confidence_prediction_api_v1_ai_readiness_ml_test_confidence_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConfidenceTestRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/readiness/ml/retrain":{"post":{"tags":["AI Readiness","AI Readiness & Monitoring"],"summary":"Retrain Predictor","description":"ðŸ”„ **RETRAIN PREDICTOR** - Force ML model retraining\n\nNormally runs automatically every 24 hours","operationId":"retrain_predictor_api_v1_ai_readiness_ml_retrain_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/ai/readiness/config":{"get":{"tags":["AI Readiness","AI Readiness & Monitoring"],"summary":"Get Readiness Config","description":"Get current readiness configuration\n\nShows all thresholds and settings","operationId":"get_readiness_config_api_v1_ai_readiness_config_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/ai/readiness/reset-stats":{"post":{"tags":["AI Readiness","AI Readiness & Monitoring"],"summary":"Reset All Stats","description":"ðŸ”„ **RESET STATS** - Clear all statistics and alerts\n\nUseful for fresh start after testing","operationId":"reset_all_stats_api_v1_ai_readiness_reset_stats_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/monitoring/rate-limit/status":{"get":{"tags":["Monitoring"],"summary":"Get Rate Limit Status","description":"Get overall rate limiting system status","operationId":"get_rate_limit_status_api_v1_monitoring_rate_limit_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/monitoring/rate-limit/metrics":{"get":{"tags":["Monitoring"],"summary":"Get Rate Limit Metrics","description":"Get rate limiting metrics and usage statistics","operationId":"get_rate_limit_metrics_api_v1_monitoring_rate_limit_metrics_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/monitoring/rate-limit/test":{"get":{"tags":["Monitoring"],"summary":"Test Rate Limits","description":"Test endpoint to demonstrate rate limiting tiers","operationId":"test_rate_limits_api_v1_monitoring_rate_limit_test_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/monitoring/rate-limit/admin/stats":{"get":{"tags":["Monitoring"],"summary":"Get Admin Rate Limit Stats","description":"Admin-only endpoint for detailed rate limiting statistics","operationId":"get_admin_rate_limit_stats_api_v1_monitoring_rate_limit_admin_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/marketing/newsletters/generate":{"get":{"tags":["AI Marketing","Newsletters"],"summary":"Generate AI-powered newsletters for upcoming holidays","description":"Automatically generates newsletter content for all upcoming holidays using GPT-4","operationId":"generate_newsletters_api_v1_marketing_newsletters_generate_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"days_ahead","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"description":"How many days ahead to look","default":60,"title":"Days Ahead"},"description":"How many days ahead to look"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewsletterListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/marketing/newsletters/generate-content":{"post":{"tags":["AI Marketing","Newsletters"],"summary":"Generate content for specific holiday and segment","description":"Generate AI-powered newsletter content for a specific holiday and customer segment","operationId":"generate_newsletter_content_api_v1_marketing_newsletters_generate_content_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewsletterContentRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewsletterContentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/marketing/newsletters/send":{"post":{"tags":["AI Marketing","Newsletters"],"summary":"Send newsletter to subscribers","description":"Send generated newsletter to specific customer segment","operationId":"send_newsletter_api_v1_marketing_newsletters_send_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewsletterSendRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewsletterSendResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/marketing/newsletters/preview/{holiday_key}":{"get":{"tags":["AI Marketing","Newsletters"],"summary":"Preview newsletter content","description":"Get preview of newsletter content without sending","operationId":"preview_newsletter_api_v1_marketing_newsletters_preview__holiday_key__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"holiday_key","in":"path","required":true,"schema":{"type":"string","title":"Holiday Key"}},{"name":"segment","in":"query","required":false,"schema":{"$ref":"#/components/schemas/CustomerSegment","default":"all"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Preview Newsletter Api V1 Marketing Newsletters Preview  Holiday Key  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/marketing/campaigns/annual":{"get":{"tags":["AI Marketing","Campaigns"],"summary":"Generate annual campaign calendar","description":"Automatically generates marketing campaigns for all holidays in the year using GPT-4","operationId":"generate_annual_campaigns_api_v1_marketing_campaigns_annual_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"days_ahead","in":"query","required":false,"schema":{"type":"integer","maximum":730,"minimum":1,"description":"Days ahead to plan","default":365,"title":"Days Ahead"},"description":"Days ahead to plan"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/marketing/campaigns/generate-content":{"post":{"tags":["AI Marketing","Campaigns"],"summary":"Generate multi-channel campaign content","description":"Generate AI-powered campaign content for specific holiday across multiple channels","operationId":"generate_campaign_content_api_v1_marketing_campaigns_generate_content_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignContentRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignContentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/marketing/campaigns/launch":{"post":{"tags":["AI Marketing","Campaigns"],"summary":"Launch marketing campaign","description":"Launch campaign across selected channels","operationId":"launch_campaign_api_v1_marketing_campaigns_launch_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignLaunchRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignLaunchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/marketing/campaigns/budget-recommendations":{"get":{"tags":["AI Marketing","Campaigns"],"summary":"Get budget recommendations","description":"Get AI-powered budget allocation recommendations for upcoming holidays","operationId":"get_budget_recommendations_api_v1_marketing_campaigns_budget_recommendations_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"days_ahead","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"default":90,"title":"Days Ahead"}},{"name":"total_budget","in":"query","required":false,"schema":{"type":"number","maximum":100000.0,"minimum":100.0,"default":5000.0,"title":"Total Budget"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Budget Recommendations Api V1 Marketing Campaigns Budget Recommendations Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/marketing/analytics/holidays/trends":{"get":{"tags":["AI Marketing","Analytics"],"summary":"Get seasonal trends for all holidays","description":"Analyze booking and revenue trends for all major holidays in a given year","operationId":"get_seasonal_trends_api_v1_marketing_analytics_holidays_trends_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"year","in":"query","required":false,"schema":{"type":"integer","description":"Year to analyze (default: current year)","title":"Year"},"description":"Year to analyze (default: current year)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SeasonalTrendsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/marketing/analytics/holidays/summary":{"get":{"tags":["AI Marketing","Analytics"],"summary":"Get high-level holiday analytics summary","description":"Dashboard summary with key metrics and top-performing holidays","operationId":"get_holiday_summary_api_v1_marketing_analytics_holidays_summary_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"year","in":"query","required":false,"schema":{"type":"integer","description":"Year to analyze (default: current year)","title":"Year"},"description":"Year to analyze (default: current year)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DashboardSummaryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/marketing/analytics/holidays/peaks":{"get":{"tags":["AI Marketing","Analytics"],"summary":"Get top revenue-generating holidays","description":"Identify which holidays drive the most revenue","operationId":"get_peak_seasons_api_v1_marketing_analytics_holidays_peaks_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"year","in":"query","required":false,"schema":{"type":"integer","description":"Year to analyze (default: current year)","title":"Year"},"description":"Year to analyze (default: current year)"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":20,"minimum":1,"description":"How many top holidays to return","default":5,"title":"Limit"},"description":"How many top holidays to return"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PeakSeasonResponse"},"title":"Response Get Peak Seasons Api V1 Marketing Analytics Holidays Peaks Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/marketing/analytics/holidays/forecast/{holiday_key}":{"get":{"tags":["AI Marketing","Analytics"],"summary":"Forecast bookings for upcoming holiday","description":"AI-powered forecast based on historical trends","operationId":"forecast_holiday_api_v1_marketing_analytics_holidays_forecast__holiday_key__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"holiday_key","in":"path","required":true,"schema":{"type":"string","title":"Holiday Key"}},{"name":"year","in":"query","required":false,"schema":{"type":"integer","description":"Year to forecast (default: next occurrence)","title":"Year"},"description":"Year to forecast (default: next occurrence)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HolidayForecastResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/marketing/analytics/holidays/comparison":{"get":{"tags":["AI Marketing","Analytics"],"summary":"Compare holiday performance across years","description":"Compare specific holiday performance year-over-year","operationId":"compare_holiday_performance_api_v1_marketing_analytics_holidays_comparison_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"holiday_key","in":"query","required":true,"schema":{"type":"string","description":"Holiday to compare","title":"Holiday Key"},"description":"Holiday to compare"},{"name":"start_year","in":"query","required":true,"schema":{"type":"integer","description":"Start year","title":"Start Year"},"description":"Start year"},{"name":"end_year","in":"query","required":true,"schema":{"type":"integer","description":"End year","title":"End Year"},"description":"End year"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Compare Holiday Performance Api V1 Marketing Analytics Holidays Comparison Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/status":{"get":{"summary":"Api Status","description":"API status endpoint","operationId":"api_status_api_v1_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/endpoints":{"get":{"summary":"List Endpoints","description":"List all available endpoints","operationId":"list_endpoints_api_v1_endpoints_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/scheduling/availability/check":{"post":{"tags":["scheduling","Scheduling"],"summary":"Check Availability","description":"Check if a requested time slot is available.\n\nIf unavailable, returns smart suggestions for alternative times.\nSuggestions are ranked by proximity to requested time.","operationId":"check_availability_api_v1_scheduling_availability_check_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AvailabilityCheckRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuggestionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/scheduling/availability/calendar":{"post":{"tags":["scheduling","Scheduling"],"summary":"Get Calendar Availability","description":"Get availability for all slots across a date range.\n\nUseful for displaying a calendar view with available slots.\nLimited to 30 days max.","operationId":"get_calendar_availability_api_v1_scheduling_availability_calendar_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CalendarAvailabilityRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CalendarAvailabilityResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/scheduling/travel-time/calculate":{"post":{"tags":["scheduling","Scheduling"],"summary":"Calculate Travel Time","description":"Calculate travel time between two locations.\n\nAccounts for:\n- Rush hour traffic (Mon-Fri 3-7 PM = +50%)\n- Caches results for efficiency","operationId":"calculate_travel_time_api_v1_scheduling_travel_time_calculate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TravelTimeRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TravelTimeResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/scheduling/geocode":{"post":{"tags":["scheduling","Scheduling"],"summary":"Geocode Address","description":"Convert a street address to geographic coordinates.\n\nReturns normalized address and lat/lng coordinates.","operationId":"geocode_address_api_v1_scheduling_geocode_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddressInput"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GeocodedAddressResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/scheduling/geocode/validate":{"get":{"tags":["scheduling","Scheduling"],"summary":"Validate Address","description":"Validate an address string.\n\nReturns whether the address is valid and a normalized version.","operationId":"validate_address_api_v1_scheduling_geocode_validate_get","parameters":[{"name":"address","in":"query","required":true,"schema":{"type":"string","minLength":10,"title":"Address"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/scheduling/chef/recommend":{"post":{"tags":["scheduling","Scheduling"],"summary":"Recommend Chef","description":"Get optimal chef assignment recommendation for a booking.\n\nScoring factors:\n- Travel time efficiency (closest chef)\n- Skill match for party size\n- Workload balance\n- Customer history\n- Customer preference\n\nRequires: Station Manager role or higher","operationId":"recommend_chef_api_v1_scheduling_chef_recommend_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChefAssignmentRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChefAssignmentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/scheduling/chef/top-recommendations":{"get":{"tags":["scheduling","Scheduling"],"summary":"Get Top Chef Recommendations","description":"Get top N chef recommendations for manual selection.\n\nReturns scored list of available chefs for station manager to choose from.","operationId":"get_top_chef_recommendations_api_v1_scheduling_chef_top_recommendations_get","parameters":[{"name":"booking_id","in":"query","required":true,"schema":{"type":"string","format":"uuid","title":"Booking Id"}},{"name":"event_date","in":"query","required":true,"schema":{"type":"string","format":"date","title":"Event Date"}},{"name":"event_time","in":"query","required":true,"schema":{"type":"string","format":"time","title":"Event Time"}},{"name":"venue_lat","in":"query","required":true,"schema":{"anyOf":[{"type":"number"},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"}],"title":"Venue Lat"}},{"name":"venue_lng","in":"query","required":true,"schema":{"anyOf":[{"type":"number"},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"}],"title":"Venue Lng"}},{"name":"guest_count","in":"query","required":true,"schema":{"type":"integer","title":"Guest Count"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":10,"minimum":1,"default":3,"title":"Limit"}},{"name":"customer_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Customer Id"}},{"name":"preferred_chef_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Preferred Chef Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ChefScoreResponse"},"title":"Response Get Top Chef Recommendations Api V1 Scheduling Chef Top Recommendations Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/scheduling/negotiations":{"post":{"tags":["scheduling","Scheduling"],"summary":"Create Negotiation","description":"Create a request to shift an existing booking's time.\n\nSends a polite notification to the customer asking if they\ncan accommodate a time change. Optional incentive (discount)\ncan be offered.\n\nRequires: Station Manager role or higher","operationId":"create_negotiation_api_v1_scheduling_negotiations_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateNegotiationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NegotiationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/scheduling/negotiations/respond":{"post":{"tags":["scheduling","Scheduling"],"summary":"Respond To Negotiation","description":"Customer response to a negotiation request.\n\nIf accepted, the booking time is automatically updated.","operationId":"respond_to_negotiation_api_v1_scheduling_negotiations_respond_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RespondToNegotiationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NegotiationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/scheduling/negotiations/pending":{"get":{"tags":["scheduling","Scheduling"],"summary":"Get Pending Negotiations","description":"Get all pending negotiation requests.\n\nFor admin dashboard to track outstanding requests.\n\nRequires: Station Manager role or higher","operationId":"get_pending_negotiations_api_v1_scheduling_negotiations_pending_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PendingNegotiationsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/scheduling/slots/config":{"get":{"tags":["scheduling","Scheduling"],"summary":"Get Slot Configurations","description":"Get all available time slot configurations.\n\nReturns slot times and their adjustment limits.","operationId":"get_slot_configurations_api_v1_scheduling_slots_config_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AllSlotsConfigResponse"}}}}}}},"/api/v1/scheduling/duration/calculate":{"post":{"tags":["scheduling","Scheduling"],"summary":"Calculate Event Duration","description":"Calculate event duration based on party size.\n\nFormula: min(60 + (guests Ã— 3), 120) minutes\n\n- Minimum: 63 minutes (1 guest)\n- Maximum: 120 minutes (20+ guests)","operationId":"calculate_event_duration_api_v1_scheduling_duration_calculate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventDurationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventDurationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chef-portal/me":{"get":{"tags":["chef-portal","Chef Portal"],"summary":"Get My Chef Profile","description":"Get the authenticated chef's profile information","operationId":"get_my_chef_profile_api_v1_chef_portal_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChefProfileResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/chef-portal/me/availability":{"get":{"tags":["chef-portal","Chef Portal"],"summary":"Get My Weekly Availability","description":"Get the chef's complete weekly availability schedule","operationId":"get_my_availability_api_v1_chef_portal_me_availability_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChefWeeklyAvailabilityResponse"}}}}},"security":[{"HTTPBearer":[]}]},"post":{"tags":["chef-portal","Chef Portal"],"summary":"Add Availability Slot","description":"Add a single availability slot to the chef's schedule","operationId":"add_availability_slot_api_v1_chef_portal_me_availability_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChefAvailabilityCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChefAvailabilityResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/chef-portal/me/availability/{slot_id}":{"put":{"tags":["chef-portal","Chef Portal"],"summary":"Update Availability Slot","description":"Update an existing availability slot","operationId":"update_availability_slot_api_v1_chef_portal_me_availability__slot_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"slot_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Slot Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChefAvailabilityUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChefAvailabilityResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["chef-portal","Chef Portal"],"summary":"Delete Availability Slot","description":"Remove an availability slot from the chef's schedule","operationId":"delete_availability_slot_api_v1_chef_portal_me_availability__slot_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"slot_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Slot Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chef-portal/me/availability/bulk":{"put":{"tags":["chef-portal","Chef Portal"],"summary":"Bulk Update Weekly Availability","description":"Replace all availability slots with new schedule (max 21 slots)","operationId":"bulk_update_availability_api_v1_chef_portal_me_availability_bulk_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkAvailabilityUpdate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChefWeeklyAvailabilityResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/chef-portal/me/timeoff":{"get":{"tags":["chef-portal","Chef Portal"],"summary":"Get My Time Off Requests","description":"Get all time-off requests for the authenticated chef","operationId":"get_my_timeoff_requests_api_v1_chef_portal_me_timeoff_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"status_filter","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/db__models__ops__TimeOffStatus"},{"type":"null"}],"description":"Filter by status (pending, approved, denied, cancelled)","title":"Status Filter"},"description":"Filter by status (pending, approved, denied, cancelled)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TimeOffRequestResponse"},"title":"Response Get My Timeoff Requests Api V1 Chef Portal Me Timeoff Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["chef-portal","Chef Portal"],"summary":"Submit Time Off Request","description":"Submit a new time-off request for approval","operationId":"submit_timeoff_request_api_v1_chef_portal_me_timeoff_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TimeOffRequestCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TimeOffRequestResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chef-portal/me/timeoff/{request_id}":{"delete":{"tags":["chef-portal","Chef Portal"],"summary":"Cancel Time Off Request","description":"Cancel a pending time-off request","operationId":"cancel_timeoff_request_api_v1_chef_portal_me_timeoff__request_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"request_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Request Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chef-portal/station/chefs":{"get":{"tags":["chef-portal","Chef Portal"],"summary":"List Chefs (Station Manager)","description":"Get all chefs visible to station manager","operationId":"list_station_chefs_api_v1_chef_portal_station_chefs_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"status_filter","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/db__models__ops__ChefStatus"},{"type":"null"}],"description":"Filter by chef status","title":"Status Filter"},"description":"Filter by chef status"},{"name":"is_active","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Filter by active status","title":"Is Active"},"description":"Filter by active status"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StationChefListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chef-portal/station/chefs/{chef_id}/availability":{"get":{"tags":["chef-portal","Chef Portal"],"summary":"View Chef Availability (Station Manager)","description":"View a chef's availability schedule","operationId":"get_chef_availability_api_v1_chef_portal_station_chefs__chef_id__availability_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"chef_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Chef Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChefWeeklyAvailabilityResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chef-portal/station/timeoff/pending":{"get":{"tags":["chef-portal","Chef Portal"],"summary":"List Pending Time Off (Station Manager)","description":"Get all pending time-off requests for approval","operationId":"list_pending_timeoff_api_v1_chef_portal_station_timeoff_pending_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/TimeOffRequestResponse"},"type":"array","title":"Response List Pending Timeoff Api V1 Chef Portal Station Timeoff Pending Get"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/chef-portal/station/timeoff/{request_id}/approve":{"post":{"tags":["chef-portal","Chef Portal"],"summary":"Approve/Deny Time Off (Station Manager)","description":"Approve or deny a pending time-off request","operationId":"process_timeoff_request_api_v1_chef_portal_station_timeoff__request_id__approve_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"request_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Request Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TimeOffApprovalRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TimeOffRequestResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agreements/templates/{agreement_type}":{"get":{"tags":["agreements","Agreements"],"summary":"Get Agreement Template","description":"Get the active agreement template with variables rendered.\n\nAgreement types:\n- `liability_waiver`: Service agreement and liability release\n- `allergen_disclosure`: Allergen acknowledgment and disclosure\n\nVariables are interpolated from database (SSoT) values.","operationId":"get_agreement_template_api_v1_agreements_templates__agreement_type__get","parameters":[{"name":"agreement_type","in":"path","required":true,"schema":{"type":"string","title":"Agreement Type"}},{"name":"station_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"description":"Station for variable interpolation","title":"Station Id"},"description":"Station for variable interpolation"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TemplateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agreements/holds":{"post":{"tags":["agreements","Agreements"],"summary":"Create Slot Hold","description":"Create a temporary slot hold while customer signs agreements.\n\nHold expires in 2 hours if not converted to booking.\nThis prevents double-booking during the signing process.","operationId":"create_slot_hold_api_v1_agreements_holds_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SlotHoldRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SlotHoldResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agreements/holds/{token}":{"get":{"tags":["agreements","Agreements"],"summary":"Get Hold Status","description":"Check the status of a slot hold by token.\n\nReturns hold details, station info, and agreement content for the signing page.\n\nResponse matches frontend SigningPageResponse interface:\n- success: boolean\n- hold: HoldInfo (id, station_id, station_name, slot_datetime, customer_email, ...)\n- agreement: AgreementContent (title, content_html, version, effective_date)\n- error_code: optional error code (SLOT_HOLD_EXPIRED, SLOT_HOLD_NOT_FOUND)","operationId":"get_hold_status_api_v1_agreements_holds__token__get","parameters":[{"name":"token","in":"path","required":true,"schema":{"type":"string","title":"Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SigningPageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["agreements","Agreements"],"summary":"Release Hold","description":"Release a slot hold (cancel signing process).\n\nCall this if customer abandons the signing flow.","operationId":"release_hold_api_v1_agreements_holds__token__delete","parameters":[{"name":"token","in":"path","required":true,"schema":{"type":"string","title":"Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agreements/validate-signature":{"post":{"tags":["agreements","Agreements"],"summary":"Validate Signature","description":"Validate a signature image before submission.\n\nChecks:\n- Format (PNG/JPEG/WEBP)\n- Size (max 500KB)\n- Dimensions (100-2000px width, 50-1000px height)\n- Not blank/empty","operationId":"validate_signature_api_v1_agreements_validate_signature_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidateSignatureRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidateSignatureResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agreements/sign":{"post":{"tags":["agreements","Agreements"],"summary":"Sign Agreement","description":"Sign an agreement digitally.\n\nAccepts EITHER:\n- hold_token: Pre-booking flow (slot hold before booking created)\n- booking_id: Post-booking flow (signing after booking exists)\n\nProcess:\n1. Validate hold_token OR fetch booking by booking_id\n2. Validate signature image\n3. Get active template\n4. Create signed_agreement record (immutable)\n5. Generate PDF with signature embedded (background)\n6. Send confirmation email with PDF link (background)\n\nAllergen information is stored in the booking record, not a separate table.","operationId":"sign_agreement_api_v1_agreements_sign_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignAgreementRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignAgreementResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agreements/status/{booking_id}":{"get":{"tags":["agreements","Agreements"],"summary":"Get Agreement Status","description":"Check which agreements have been signed for a booking.\n\nReturns status of liability waiver and allergen disclosure.","operationId":"get_agreement_status_api_v1_agreements_status__booking_id__get","parameters":[{"name":"booking_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Booking Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AgreementStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agreements/send-link":{"post":{"tags":["agreements","Agreements"],"summary":"Send Signing Link","description":"Send agreement signing link via SMS or email.\n\nUsed for phone bookings where customer signs later.\nRate limited to 5 sends per hold (enforced by database).","operationId":"send_signing_link_api_v1_agreements_send_link_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendLinkRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/agreements/holds/{hold_id}/link-status":{"get":{"tags":["agreements","Agreements"],"summary":"Get Signing Link Status","description":"Get the signing link send status for a slot hold.\n\nUsed by admin dashboard to see if/when links were sent.","operationId":"get_signing_link_status_api_v1_agreements_holds__hold_id__link_status_get","parameters":[{"name":"hold_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Hold Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/addresses/":{"post":{"tags":["addresses","Addresses"],"summary":"Create Or Find Address","description":"Create a new address or return existing cached address.\n\nEnterprise Pattern:\n- If address already exists in cache: return immediately (no API call)\n- If new address: geocode with Google and cache permanently\n\nBenefits:\n- Pay Google once per unique address\n- Instant response for returning customers\n- \"My Addresses\" feature for customer portal","operationId":"create_or_find_address_api_v1_addresses__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddressCreateRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddressResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/addresses/check-service-area":{"get":{"tags":["addresses","Addresses"],"summary":"Check Service Area","description":"Check if an address is within our service area.\n\nMulti-station support: Finds nearest active station and checks distance.\nService Area: California - 150 mile radius from nearest station.\nDistances > 150 miles require human escalation.\n\nAlso returns geocoded coordinates for travel fee calculation.","operationId":"check_service_area_api_v1_addresses_check_service_area_get","parameters":[{"name":"address","in":"query","required":true,"schema":{"type":"string","minLength":10,"description":"Full street address","title":"Address"},"description":"Full street address"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/addresses/bulk-geocode":{"post":{"tags":["addresses","Addresses"],"summary":"Bulk Geocode Addresses","description":"Geocode multiple addresses at once.\n\nRate-limited to prevent Google API abuse.\nMaximum 50 addresses per request.","operationId":"bulk_geocode_addresses_api_v1_addresses_bulk_geocode_post","requestBody":{"content":{"application/json":{"schema":{"items":{"type":"string"},"type":"array","title":"Addresses"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/addresses/customer/{customer_id}":{"get":{"tags":["addresses","Addresses"],"summary":"Get Customer Addresses","description":"Get all saved addresses for a customer.\n\nUse Case: \"My Addresses\" feature in customer portal.\nReturns addresses ordered by: default first, then by most recent.","operationId":"get_customer_addresses_api_v1_addresses_customer__customer_id__get","parameters":[{"name":"customer_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Customer Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerAddressListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/addresses/customer/{customer_id}/default/{address_id}":{"post":{"tags":["addresses","Addresses"],"summary":"Set Default Address","description":"Set an address as the customer's default.\n\nClears is_default from all other addresses for this customer.","operationId":"set_default_address_api_v1_addresses_customer__customer_id__default__address_id__post","parameters":[{"name":"customer_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Customer Id"}},{"name":"address_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Address Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/addresses/{address_id}":{"get":{"tags":["addresses","Addresses"],"summary":"Get Address","description":"Get address by ID.","operationId":"get_address_api_v1_addresses__address_id__get","parameters":[{"name":"address_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Address Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddressResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/knowledge/sync/status":{"get":{"tags":["Knowledge Sync","Knowledge Sync"],"summary":"Get Knowledge Sync Status","description":"Get current sync status for all knowledge sources (menu, FAQs, terms)","operationId":"get_sync_status_api_v1_ai_knowledge_sync_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__knowledge_sync__SyncStatusResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/ai/knowledge/sync/diff":{"get":{"tags":["Knowledge Sync","Knowledge Sync"],"summary":"Get Knowledge Changes (Diff)","description":"Detect changes between source files and database without syncing","operationId":"get_sync_diff_api_v1_ai_knowledge_sync_diff_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__knowledge_sync__DiffResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/ai/knowledge/sync/trigger":{"post":{"tags":["Knowledge Sync","Knowledge Sync"],"summary":"Trigger Knowledge Sync","description":"Manually trigger synchronization of knowledge sources","operationId":"trigger_sync_api_v1_ai_knowledge_sync_trigger_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SyncTriggerRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SyncResultResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/ai/knowledge/sync/history":{"get":{"tags":["Knowledge Sync","Knowledge Sync"],"summary":"Get Sync History","description":"Get historical sync operations with pagination","operationId":"get_sync_history_api_v1_ai_knowledge_sync_history_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Items per page","default":20,"title":"Page Size"},"description":"Items per page"},{"name":"source","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by source (menu, faqs, terms)","title":"Source"},"description":"Filter by source (menu, faqs, terms)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SyncHistoryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/knowledge/sync/auto":{"post":{"tags":["Knowledge Sync","Knowledge Sync"],"summary":"Auto Sync (Safe Mode)","description":"Automatically sync changes without conflicts (safe mode)","operationId":"auto_sync_api_v1_ai_knowledge_sync_auto_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SyncResultResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/ai/knowledge/sync/force":{"post":{"tags":["Knowledge Sync","Knowledge Sync"],"summary":"Force Sync (Override Conflicts)","description":"Force sync all changes, overriding conflicts (requires superadmin)","operationId":"force_sync_api_v1_ai_knowledge_sync_force_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SyncResultResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/stripe/checkout/session":{"post":{"tags":["stripe","stripe-checkout"],"summary":"Create Checkout Session","description":"Create a Stripe Checkout Session for payment collection.\n\nThis creates a hosted checkout page where customers can securely\nenter payment information.","operationId":"create_checkout_session_api_v1_stripe_checkout_session_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckoutSessionRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckoutSessionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/stripe/checkout/session/{session_id}":{"get":{"tags":["stripe","stripe-checkout"],"summary":"Verify Checkout Session","description":"Verify the status of a Checkout Session.\n\nUsed to confirm payment completion after redirect from Stripe.","operationId":"verify_checkout_session_api_v1_stripe_checkout_session__session_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"session_id","in":"path","required":true,"schema":{"type":"string","title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/stripe/payment-intent":{"post":{"tags":["stripe","stripe-payment-intents"],"summary":"Create Payment Intent","description":"Create a Payment Intent for client-side payment processing.\n\nUse this for custom payment forms with Stripe Elements.","operationId":"create_payment_intent_api_v1_stripe_payment_intent_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentIntentRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentIntentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/stripe/payment-intent/{payment_intent_id}":{"get":{"tags":["stripe","stripe-payment-intents"],"summary":"Get Payment Intent","description":"Retrieve details of a Payment Intent.","operationId":"get_payment_intent_api_v1_stripe_payment_intent__payment_intent_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"payment_intent_id","in":"path","required":true,"schema":{"type":"string","title":"Payment Intent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/stripe/portal":{"post":{"tags":["stripe","stripe-payment-intents"],"summary":"Create Portal Session","description":"Create a Stripe Customer Portal session.\n\nAllows customers to manage their payment methods and billing.","operationId":"create_portal_session_api_v1_stripe_portal_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PortalSessionRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PortalSessionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/stripe/v1/payments/create-intent":{"post":{"tags":["stripe","stripe-payment-intents"],"summary":"Create Payment Intent V1","description":"V1 API: Create a Payment Intent with enhanced customer management.","operationId":"create_payment_intent_v1_api_v1_stripe_v1_payments_create_intent_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentIntentRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentIntentResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/stripe/v1/payments/create-intent/{payment_intent_id}":{"get":{"tags":["stripe","stripe-payment-intents"],"summary":"Get Payment Intent V1","description":"V1 API: Retrieve Payment Intent details with enhanced response.","operationId":"get_payment_intent_v1_api_v1_stripe_v1_payments_create_intent__payment_intent_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"payment_intent_id","in":"path","required":true,"schema":{"type":"string","title":"Payment Intent Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/stripe/refund":{"post":{"tags":["stripe","stripe-refunds"],"summary":"Create Refund","description":"Process a refund for a payment.\n\nAdmin only. Supports full or partial refunds.","operationId":"create_refund_api_v1_stripe_refund_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefundRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefundResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/stripe/refund/{refund_id}":{"get":{"tags":["stripe","stripe-refunds"],"summary":"Get Refund","description":"Retrieve details of a specific refund.\n\nAdmin only.","operationId":"get_refund_api_v1_stripe_refund__refund_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"refund_id","in":"path","required":true,"schema":{"type":"string","title":"Refund Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/stripe/payment/{payment_id}/refunds":{"get":{"tags":["stripe","stripe-refunds"],"summary":"List Refunds For Payment","description":"List all refunds for a specific payment.\n\nAdmin only.","operationId":"list_refunds_for_payment_api_v1_stripe_payment__payment_id__refunds_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"payment_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Payment Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/stripe/payments":{"get":{"tags":["stripe","stripe-payments"],"summary":"Get Payments","description":"List payments for the current user.\n\nSupports cursor-based pagination and filtering.","operationId":"get_payments_api_v1_stripe_payments_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/PaymentStatus"},{"type":"null"}],"title":"Status"}},{"name":"booking_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Booking Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Limit"}},{"name":"cursor","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cursor"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/stripe/payments/{payment_id}":{"get":{"tags":["stripe","stripe-payments"],"summary":"Get Payment","description":"Get details of a specific payment.","operationId":"get_payment_api_v1_stripe_payments__payment_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"payment_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Payment Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/stripe/admin/payments":{"get":{"tags":["stripe","stripe-payments"],"summary":"Admin List Payments","description":"Admin: List all payments with optional filters.","operationId":"admin_list_payments_api_v1_stripe_admin_payments_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"User Id"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/PaymentStatus"},{"type":"null"}],"title":"Status"}},{"name":"booking_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Booking Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/stripe/invoices":{"get":{"tags":["stripe","stripe-invoices"],"summary":"Get Invoices","description":"List invoices for the current user.\n\nSupports cursor-based pagination and filtering.","operationId":"get_invoices_api_v1_stripe_invoices_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/InvoiceStatus"},{"type":"null"}],"title":"Status"}},{"name":"booking_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Booking Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Limit"}},{"name":"cursor","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cursor"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/InvoiceListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/stripe/invoices/{invoice_id}":{"get":{"tags":["stripe","stripe-invoices"],"summary":"Get Invoice","description":"Get details of a specific invoice.","operationId":"get_invoice_api_v1_stripe_invoices__invoice_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"invoice_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Invoice Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/stripe/admin/invoices":{"get":{"tags":["stripe","stripe-invoices"],"summary":"Admin List Invoices","description":"Admin: List all invoices with optional filters.","operationId":"admin_list_invoices_api_v1_stripe_admin_invoices_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"User Id"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/InvoiceStatus"},{"type":"null"}],"title":"Status"}},{"name":"booking_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Booking Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/stripe/analytics":{"get":{"tags":["stripe","stripe-analytics"],"summary":"Get Payment Analytics","description":"Get payment analytics for admin dashboard.\n\nReturns:\n    - Total revenue in period\n    - Number of successful payments\n    - Average payment amount\n    - Payment method breakdown\n    - Refund summary","operationId":"get_payment_analytics_api_v1_stripe_analytics_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"default":30,"title":"Days"}},{"name":"station_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Station Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentAnalyticsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/stripe/analytics/daily":{"get":{"tags":["stripe","stripe-analytics"],"summary":"Get Daily Analytics","description":"Get daily payment breakdown for charts.","operationId":"get_daily_analytics_api_v1_stripe_analytics_daily_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":90,"minimum":1,"default":30,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/stripe/dashboard":{"get":{"tags":["stripe","stripe-dashboard"],"summary":"Get Customer Dashboard","description":"Get comprehensive customer dashboard data.\n\nIncludes:\n- Payment history (last 10)\n- Invoice history (last 10)\n- Total spent (all time)\n- Loyalty tier status\n- Zelle savings (3% of total)\n- Pending amounts","operationId":"get_customer_dashboard_api_v1_stripe_dashboard_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerDashboardResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/stripe/customer-portal":{"post":{"tags":["stripe","stripe-dashboard"],"summary":"Create Customer Portal Session","description":"Create a Stripe Customer Portal session.\n\nAllows customers to:\n- View payment history\n- Update payment methods\n- Download invoices\n- Manage subscription (if applicable)","operationId":"create_customer_portal_session_api_v1_stripe_customer_portal_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PortalSessionRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PortalSessionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/stripe/loyalty-status":{"get":{"tags":["stripe","stripe-dashboard"],"summary":"Get Loyalty Status","description":"Get detailed loyalty status for the current user.\n\nReturns:\n- Current tier\n- Total spent\n- Progress to next tier\n- Tier benefits","operationId":"get_loyalty_status_api_v1_stripe_loyalty_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/stripe/webhook":{"post":{"tags":["stripe","stripe-webhooks"],"summary":"Webhook Handler","description":"Consolidated Stripe webhook handler.\n\nThis is the SINGLE webhook endpoint for all Stripe events.\nConfigure this URL in Stripe Dashboard: {API_URL}/api/v1/stripe/webhook\n\nHandles:\n- Payment intent events (succeeded, failed, canceled, processing)\n- Customer events (created, updated)\n- Invoice events (created, paid, failed)\n- Checkout session events\n- Refund and dispute events\n- Subscription events","operationId":"webhook_handler_api_v1_stripe_webhook_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookEventResponse"}}}}}}},"/api/v1/stripe/lookup":{"post":{"tags":["stripe","stripe-customer-lookup"],"summary":"Lookup Customer Balance","description":"Look up customer by phone or email and get balance information.\n\nReturns:\n- Customer info\n- Active bookings with balances\n- Tax calculation (travel fee excluded from taxable amount)\n- Suggested tip amounts\n- Loyalty tier\n\nTax Rules:\n- Taxable amount = balance_due - travel_fee\n- Travel fee is NOT taxed (gas reimbursement for chef)\n- Tips are NOT taxed (calculated separately)","operationId":"lookup_customer_balance_api_v1_stripe_lookup_post","parameters":[{"name":"tax_rate","in":"query","required":false,"schema":{"type":"number","maximum":0.2,"minimum":0,"description":"Tax rate (default 8.25%)","default":0.0825,"title":"Tax Rate"},"description":"Tax rate (default 8.25%)"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerLookupRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerBalanceResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/stripe/calculate-total":{"get":{"tags":["stripe","stripe-customer-lookup"],"summary":"Calculate Payment Total","description":"Calculate total payment amount with tax.\n\nTax Rules:\n- Taxable amount = balance - travel_fee\n- Travel fee is NOT taxed (gas reimbursement for chef)\n- Tips are NOT taxed\n\nExample:\n    balance=50000 (&#36;500), travel_fee=2000 (&#36;20), tip=5000 (&#36;50)\n    taxable = 48000 (&#36;480)\n    tax = 3960 (&#36;39.60 at 8.25%)\n    total = 58960 (&#36;589.60 = &#36;500 + &#36;39.60 + &#36;50)","operationId":"calculate_payment_total_api_v1_stripe_calculate_total_get","parameters":[{"name":"balance_cents","in":"query","required":true,"schema":{"type":"integer","minimum":0,"description":"Balance due in cents","title":"Balance Cents"},"description":"Balance due in cents"},{"name":"travel_fee_cents","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Travel fee in cents","default":0,"title":"Travel Fee Cents"},"description":"Travel fee in cents"},{"name":"tip_cents","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Tip amount in cents","default":0,"title":"Tip Cents"},"description":"Tip amount in cents"},{"name":"tax_rate","in":"query","required":false,"schema":{"type":"number","maximum":0.2,"minimum":0,"description":"Tax rate (default 8.25%)","default":0.0825,"title":"Tax Rate"},"description":"Tax rate (default 8.25%)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaxBreakdownResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/stripe/suggested-tips":{"get":{"tags":["stripe","stripe-customer-lookup"],"summary":"Get Suggested Tips","description":"Get suggested tip amounts for a given base amount.\n\nSuggested tips: 20%, 25%, 30%, 35% (industry standard for catering)","operationId":"get_suggested_tips_api_v1_stripe_suggested_tips_get","parameters":[{"name":"amount_cents","in":"query","required":true,"schema":{"type":"integer","minimum":0,"description":"Base amount in cents","title":"Amount Cents"},"description":"Base amount in cents"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuggestedTips"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/customers/dashboard":{"get":{"tags":["customers-compat"],"summary":"Customer Dashboard Compat","description":"Compatibility endpoint - uses Stripe customer_id or email","operationId":"customer_dashboard_compat_api_v1_customers_dashboard_get","parameters":[{"name":"customer_id","in":"query","required":false,"schema":{"type":"string","title":"Customer Id"}},{"name":"email","in":"query","required":false,"schema":{"type":"string","title":"Email"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/crm/bookings":{"get":{"tags":["crm","admin","crm"],"summary":"Get Crm Bookings","description":"Get all bookings for CRM/Admin panel.\n\nSupports both cursor-based (preferred) and offset-based pagination.\nCursor-based is O(1) vs offset-based O(n) for deep pages.\n\nâš ï¸ FIELD MAPPING: Uses correct Booking model fields\n- slot (not time)\n- party_adults + party_kids (not guests)\n- total_due_cents (not total_amount_cents)\n- deposit_confirmed_at != None (not deposit_paid)\n- address_encrypted (not location_address)\n- customer relationship for customer_name/email/phone","operationId":"get_crm_bookings_api_crm_bookings_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Items per page","default":50,"title":"Limit"},"description":"Items per page"},{"name":"cursor","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Pagination cursor","title":"Cursor"},"description":"Pagination cursor"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status","title":"Status"},"description":"Filter by status"},{"name":"payment_status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by payment status","title":"Payment Status"},"description":"Filter by payment status"},{"name":"date_from","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter from date (YYYY-MM-DD)","title":"Date From"},"description":"Filter from date (YYYY-MM-DD)"},{"name":"date_to","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter to date (YYYY-MM-DD)","title":"Date To"},"description":"Filter to date (YYYY-MM-DD)"},{"name":"customer_search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Search customer name/email","title":"Customer Search"},"description":"Search customer name/email"},{"name":"sort_by","in":"query","required":false,"schema":{"type":"string","description":"Sort field","default":"created_at","title":"Sort By"},"description":"Sort field"},{"name":"sort_order","in":"query","required":false,"schema":{"type":"string","description":"Sort order (asc/desc)","default":"desc","title":"Sort Order"},"description":"Sort order (asc/desc)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/crm/bookings/{booking_id}":{"get":{"tags":["crm","admin","crm"],"summary":"Get Crm Booking","description":"Get a specific booking by ID with customer details.","operationId":"get_crm_booking_api_crm_bookings__booking_id__get","parameters":[{"name":"booking_id","in":"path","required":true,"schema":{"type":"string","title":"Booking Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Crm Booking Api Crm Bookings  Booking Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/crm/customers":{"get":{"tags":["crm","admin","crm"],"summary":"Get Crm Customers","description":"Get all customers for CRM/Admin panel.\n\nUses the actual Customer table with booking stats joined.","operationId":"get_crm_customers_api_crm_customers_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":50,"title":"Limit"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Search"}},{"name":"sort_by","in":"query","required":false,"schema":{"type":"string","default":"created_at","title":"Sort By"}},{"name":"sort_order","in":"query","required":false,"schema":{"type":"string","default":"desc","title":"Sort Order"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/crm/customers/{customer_id}":{"get":{"tags":["crm","admin","crm"],"summary":"Get Crm Customer","description":"Get customer details by ID (UUID) with their bookings.","operationId":"get_crm_customer_api_crm_customers__customer_id__get","parameters":[{"name":"customer_id","in":"path","required":true,"schema":{"type":"string","title":"Customer Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Crm Customer Api Crm Customers  Customer Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/crm/customers/{customer_id}/bookings":{"get":{"tags":["crm","admin","crm"],"summary":"Get Customer Bookings","description":"Get all bookings for a specific customer by ID (UUID).","operationId":"get_customer_bookings_api_crm_customers__customer_id__bookings_get","parameters":[{"name":"customer_id","in":"path","required":true,"schema":{"type":"string","title":"Customer Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Customer Bookings Api Crm Customers  Customer Id  Bookings Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/crm/dashboard/stats":{"get":{"tags":["crm","admin","crm"],"summary":"Get Dashboard Stats","description":"Get dashboard statistics for admin panel.\n\nUses correct Booking model fields:\n- party_adults + party_kids for average party size\n- total_due_cents for revenue (from COMPLETED bookings)","operationId":"get_dashboard_stats_api_crm_dashboard_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Get Dashboard Stats Api Crm Dashboard Stats Get"}}}}}}},"/api/crm/availability":{"get":{"tags":["crm","admin","crm"],"summary":"Get Availability","description":"Get availability for a specific date or today.\n\nUses correct field: Booking.slot (not time)","operationId":"get_availability_api_crm_availability_get","parameters":[{"name":"date","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Date in YYYY-MM-DD format","title":"Date"},"description":"Date in YYYY-MM-DD format"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Availability Api Crm Availability Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/station/station-login":{"post":{"tags":["station-auth","station-auth"],"summary":"Station Login","description":"Station-aware login endpoint.\nSupports both password-based and OAuth token-based authentication.\nIf station_id is provided, user will be logged into that specific station.\nIf not provided, returns available stations for selection.","operationId":"station_login_api_station_station_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StationLoginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/station/user-stations":{"get":{"tags":["station-auth","station-auth"],"summary":"Get User Stations","description":"Get available stations for a user by email.\nUsed during login process to show station selection.","operationId":"get_user_stations_api_station_user_stations_get","parameters":[{"name":"email","in":"query","required":true,"schema":{"type":"string","title":"Email"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/station/switch-station":{"post":{"tags":["station-auth","station-auth"],"summary":"Switch Station","description":"Switch user's current station context.\nReturns new tokens with updated station context.","operationId":"switch_station_api_station_switch_station_post","security":[{"JWTBearer":[]}],"parameters":[{"name":"station_id","in":"query","required":true,"schema":{"type":"integer","title":"Station Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/stations/test":{"get":{"tags":["station-admin","station-admin"],"summary":"Test Endpoint","description":"Simple test endpoint to verify router is working.","operationId":"test_endpoint_api_admin_stations_test_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Test Endpoint Api Admin Stations Test Get"}}}}}}},"/api/admin/stations/list-no-auth":{"get":{"tags":["station-admin","station-admin"],"summary":"List Stations No Auth","description":"List all stations WITHOUT authentication (testing only - REMOVE IN PRODUCTION).","operationId":"list_stations_no_auth_api_admin_stations_list_no_auth_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response List Stations No Auth Api Admin Stations List No Auth Get"}}}}}}},"/api/admin/stations/":{"get":{"tags":["station-admin","station-admin"],"summary":"List Stations","description":"List all stations with optional filtering and statistics.\n\nRequires 'view_stations' permission.\nSuper admins see all stations, others see only their assigned stations.","operationId":"list_stations_api_admin_stations__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Number of records to skip","default":0,"title":"Skip"},"description":"Number of records to skip"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Maximum number of records to return","default":100,"title":"Limit"},"description":"Maximum number of records to return"},{"name":"active_only","in":"query","required":false,"schema":{"type":"boolean","description":"Only return active stations","default":true,"title":"Active Only"},"description":"Only return active stations"},{"name":"include_stats","in":"query","required":false,"schema":{"type":"boolean","description":"Include user and booking statistics","default":false,"title":"Include Stats"},"description":"Include user and booking statistics"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/StationResponse"},"title":"Response List Stations Api Admin Stations  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["station-admin","station-admin"],"summary":"Create Station","description":"Create a new station with auto-generated code.\n\nStation codes follow format: STATION-{STATE}-{CITY}-{###}\nExample: STATION-CA-BAY-001, STATION-TX-AUSTIN-002\n\nRequires 'manage_stations' permission.\nOnly super admins can create stations.","operationId":"create_station_api_admin_stations__post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StationCreateRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/stations/{station_id}":{"get":{"tags":["station-admin","station-admin"],"summary":"Get Station","description":"Get detailed information about a specific station.\n\nRequires 'view_stations' permission.\nUsers can only view their assigned station unless they're super admin.","operationId":"get_station_api_admin_stations__station_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"station_id","in":"path","required":true,"schema":{"type":"string","title":"Station Id"}},{"name":"include_stats","in":"query","required":false,"schema":{"type":"boolean","description":"Include detailed statistics","default":false,"title":"Include Stats"},"description":"Include detailed statistics"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["station-admin","station-admin"],"summary":"Update Station","description":"Update an existing station.\n\nRequires 'manage_stations' permission.\nStation admins can only update their own station.\nSuper admins can update any station.","operationId":"update_station_api_admin_stations__station_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"station_id","in":"path","required":true,"schema":{"type":"string","title":"Station Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StationUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["station-admin","station-admin"],"summary":"Delete Station","description":"Delete a station (with safety checks).\n\nSafety checks (Option A - Block if active bookings or users):\n- Blocks deletion if station has active bookings\n- Blocks deletion if station has assigned users\n- Can override with force=true (super admin only)\n\nRequires 'manage_stations' permission.\nOnly super admins can delete stations.","operationId":"delete_station_api_admin_stations__station_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"station_id","in":"path","required":true,"schema":{"type":"string","title":"Station Id"}},{"name":"force","in":"query","required":false,"schema":{"type":"boolean","description":"Force delete even with warnings","default":false,"title":"Force"},"description":"Force delete even with warnings"}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/stations/{station_id}/users":{"get":{"tags":["station-admin","station-admin"],"summary":"List Station Users","description":"List users assigned to a station.\n\nRequires 'view_station_users' permission.\nUsers can only view assignments for their own station unless they're super admin.","operationId":"list_station_users_api_admin_stations__station_id__users_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"station_id","in":"path","required":true,"schema":{"type":"integer","title":"Station Id"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"default":100,"title":"Limit"}},{"name":"role","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by role","title":"Role"},"description":"Filter by role"},{"name":"active_only","in":"query","required":false,"schema":{"type":"boolean","description":"Only return active assignments","default":true,"title":"Active Only"},"description":"Only return active assignments"},{"name":"include_user_details","in":"query","required":false,"schema":{"type":"boolean","description":"Include user profile information","default":false,"title":"Include User Details"},"description":"Include user profile information"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/StationUserResponse"},"title":"Response List Station Users Api Admin Stations  Station Id  Users Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["station-admin","station-admin"],"summary":"Assign User To Station","description":"Assign a user to a station with specific role and permissions.\n\nRequires 'manage_station_users' permission.\nUsers can only assign to their own station unless they're super admin.","operationId":"assign_user_to_station_api_admin_stations__station_id__users_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"station_id","in":"path","required":true,"schema":{"type":"integer","title":"Station Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserStationAssignmentRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StationUserResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/stations/{station_id}/audit":{"get":{"tags":["station-admin","station-admin"],"summary":"Get Station Audit Log","description":"Get audit log for a station.\n\nRequires 'view_audit_logs' permission.\nUsers can only view logs for their own station unless they're super admin.","operationId":"get_station_audit_log_api_admin_stations__station_id__audit_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"station_id","in":"path","required":true,"schema":{"type":"integer","title":"Station Id"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"default":100,"title":"Limit"}},{"name":"action","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by action","title":"Action"},"description":"Filter by action"},{"name":"resource_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by resource type","title":"Resource Type"},"description":"Filter by resource type"},{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Filter by user ID","title":"User Id"},"description":"Filter by user ID"},{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"description":"Number of days to look back","default":30,"title":"Days"},"description":"Number of days to look back"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/routers__v1__station_admin__AuditLogResponse"},"title":"Response Get Station Audit Log Api Admin Stations  Station Id  Audit Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/stations/{station_id}/geocode":{"post":{"tags":["station-admin","station-admin"],"summary":"Geocode Station","description":"Geocode a station's address using Google Maps API.\n\nThis endpoint:\n- Builds full address from station's address, city, state, postal_code\n- Calls Google Maps Geocoding API\n- Updates station's lat, lng, geocode_status, geocoded_at\n- Returns the geocoding result\n\nRequires manage_stations permission.","operationId":"geocode_station_api_admin_stations__station_id__geocode_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"station_id","in":"path","required":true,"schema":{"type":"string","title":"Station Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GeocodeStationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/token":{"post":{"tags":["booking-enhanced","admin"],"summary":"Login","description":"Authenticate user and return a JWT access token.","operationId":"login_api_token_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login_api_token_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/login":{"post":{"tags":["booking-enhanced","admin"],"summary":"Admin Login","description":"Authenticate admin user and return a JWT access token.","operationId":"admin_login_api_admin_login_post","requestBody":{"content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Credentials"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/me":{"get":{"tags":["booking-enhanced","admin"],"summary":"Get Current User Info","description":"Get current user information","operationId":"get_current_user_info_api_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/superadmin/create_admin":{"post":{"tags":["booking-enhanced","admin"],"summary":"Create Admin","description":"Create a new admin user (superadmin only).","operationId":"create_admin_api_superadmin_create_admin_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_create_admin_api_superadmin_create_admin_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/superadmin/admins":{"get":{"tags":["booking-enhanced","admin"],"summary":"List Admins","description":"List all admin users (superadmin only).","operationId":"list_admins_api_superadmin_admins_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/superadmin/admin/{admin_username}":{"delete":{"tags":["booking-enhanced","admin"],"summary":"Delete Admin","description":"Delete an admin user (superadmin only).","operationId":"delete_admin_api_superadmin_admin__admin_username__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"admin_username","in":"path","required":true,"schema":{"type":"string","title":"Admin Username"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/book":{"post":{"tags":["booking-enhanced","admin"],"summary":"Book Service","description":"Create a new booking and send confirmation emails.","operationId":"book_service_api_book_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/schemas__booking_schemas__BookingCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/availability":{"get":{"tags":["booking-enhanced","admin"],"summary":"Get Availability","description":"Get availability status for each time slot on a given date.","operationId":"get_availability_api_availability_get","parameters":[{"name":"date","in":"query","required":true,"schema":{"type":"string","title":"Date"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/availability/bulk":{"post":{"tags":["booking-enhanced","admin"],"summary":"Get Bulk Availability","description":"Get availability status for multiple dates at once.","operationId":"get_bulk_availability_api_availability_bulk_post","requestBody":{"content":{"application/json":{"schema":{"items":{"type":"string"},"type":"array","title":"Dates"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/weekly":{"get":{"tags":["booking-enhanced","admin"],"summary":"Admin Weekly","description":"Get all bookings for a given week (admin only).","operationId":"admin_weekly_api_admin_weekly_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"start_date","in":"query","required":true,"schema":{"type":"string","title":"Start Date"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/monthly":{"get":{"tags":["booking-enhanced","admin"],"summary":"Admin Monthly","description":"Get all bookings for a given month (admin only).","operationId":"admin_monthly_api_admin_monthly_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"year","in":"query","required":true,"schema":{"type":"integer","title":"Year"}},{"name":"month","in":"query","required":true,"schema":{"type":"integer","title":"Month"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/all-bookings":{"get":{"tags":["booking-enhanced","admin"],"summary":"Admin All Bookings","description":"Get all bookings from all time periods (admin only).","operationId":"admin_all_bookings_api_admin_all_bookings_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/admin/cancel_booking":{"delete":{"tags":["booking-enhanced","admin"],"summary":"Cancel Booking","description":"Cancel a booking by ID, send cancellation email, and log the action (admin only).","operationId":"cancel_booking_api_admin_cancel_booking_delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"booking_id","in":"query","required":true,"schema":{"type":"integer","title":"Booking Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CancelBookingRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/confirm_deposit":{"post":{"tags":["booking-enhanced","admin"],"summary":"Confirm Deposit","description":"Admin confirms a deposit has been received via alternative payment method.\n\nThis endpoint:\n- Validates the deposit amount against SSoT minimum requirements\n- Updates the booking status to CONFIRMED\n- Creates an audit log entry with payment details\n- Removes any holds on the booking\n\nSupported payment methods: venmo, zelle, cash, stripe","operationId":"confirm_deposit_api_admin_confirm_deposit_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Body_confirm_deposit_api_admin_confirm_deposit_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/admin/kpis":{"get":{"tags":["booking-enhanced","admin"],"summary":"Admin Kpis","description":"Returns KPIs: total bookings, bookings this week, bookings this month,\nrevenue metrics, and more.\n\n**Timezone Support**: KPIs calculated in station local time.\n- Week/month boundaries respect station timezone\n- Handles DST transitions automatically\n\nPerformance Improvement: ~25x faster\n- Before: 6 separate queries (~300ms)\n- After: 1 CTE query (~12ms)\n\nUses optimized CTE query with MATERIALIZED hint for PostgreSQL.\n\nQuery Parameters:\n- station_timezone: IANA timezone (e.g., \"America/New_York\")","operationId":"admin_kpis_api_admin_kpis_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"station_timezone","in":"query","required":false,"schema":{"type":"string","description":"Station timezone for date calculations","default":"America/Los_Angeles","title":"Station Timezone"},"description":"Station timezone for date calculations"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/customers":{"get":{"tags":["booking-enhanced","admin"],"summary":"Get All Customers","description":"Get all customer data with booking history (admin only).","operationId":"get_all_customers_api_admin_customers_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/admin/customer/{email}":{"get":{"tags":["booking-enhanced","admin"],"summary":"Get Customer Detail","description":"Get detailed information for a specific customer (admin only).","operationId":"get_customer_detail_api_admin_customer__email__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"email","in":"path","required":true,"schema":{"type":"string","title":"Email"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/customer-analytics":{"get":{"tags":["booking-enhanced","admin"],"summary":"Get Customer Analytics","description":"Get customer analytics and insights (admin only).\n\n**Timezone Support**: Dates displayed in station local time.\n- Booking dates shown in local timezone\n- DST-aware formatting\n\nPerformance Improvement: ~15x faster\n- Before: Multiple joins and queries (~250ms)\n- After: 1 CTE query (~17ms)\n\nUses optimized CTE with MATERIALIZED hint for complex analytics.\n\nQuery Parameters:\n- customer_email: Customer email to analyze\n- station_timezone: IANA timezone for date display","operationId":"get_customer_analytics_api_admin_customer_analytics_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"customer_email","in":"query","required":true,"schema":{"type":"string","title":"Customer Email"}},{"name":"station_timezone","in":"query","required":false,"schema":{"type":"string","description":"Station timezone for date formatting","default":"America/Los_Angeles","title":"Station Timezone"},"description":"Station timezone for date formatting"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/newsletter/recipients":{"get":{"tags":["booking-enhanced","admin"],"summary":"Get Newsletter Recipients","description":"Get all newsletter recipients, optionally filtered by city and name.","operationId":"get_newsletter_recipients_api_admin_newsletter_recipients_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"city","in":"query","required":false,"schema":{"type":"string","default":"","title":"City"}},{"name":"name","in":"query","required":false,"schema":{"type":"string","default":"","title":"Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/newsletter/send":{"post":{"tags":["booking-enhanced","admin"],"summary":"Send Newsletter","description":"Send newsletter to recipients (admin only).","operationId":"send_newsletter_api_admin_newsletter_send_post","requestBody":{"content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Newsletter Data"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/admin/newsletter/cities":{"get":{"tags":["booking-enhanced","admin"],"summary":"Get Newsletter Cities","description":"Get all unique cities from newsletter database (admin only).","operationId":"get_newsletter_cities_api_admin_newsletter_cities_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/admin/newsletter/export":{"get":{"tags":["booking-enhanced","admin"],"summary":"Export Newsletter","description":"Export all company newsletter contacts as CSV (admin only).","operationId":"export_newsletter_api_admin_newsletter_export_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/admin/activity-logs":{"get":{"tags":["booking-enhanced","admin"],"summary":"Get Activity Logs","description":"Get activity logs with pagination and filtering.","operationId":"get_activity_logs_api_admin_activity_logs_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}},{"name":"entity_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Entity Type"}},{"name":"action_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Action Type"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/superadmin/activity_logs":{"get":{"tags":["booking-enhanced","admin"],"summary":"Get Admin Activity Logs","description":"Get admin activity logs (superadmin only).","operationId":"get_admin_activity_logs_api_superadmin_activity_logs_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/create-sample-data":{"post":{"tags":["booking-enhanced","admin"],"summary":"Create Sample Data","description":"Create sample test data for development and testing.","operationId":"create_sample_data_api_admin_create_sample_data_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/admin/change_password":{"post":{"tags":["booking-enhanced","admin"],"summary":"Change Own Password","description":"Allow admin to change their own password.","operationId":"change_own_password_api_admin_change_password_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_change_own_password_api_admin_change_password_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/protected-data":{"get":{"tags":["booking-enhanced","admin"],"summary":"Protected Data","description":"Example endpoint with rate limiting and dependency injection.","operationId":"protected_data_api_protected_data_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/":{"get":{"tags":["booking-enhanced","admin"],"summary":"Get Bookings","description":"Get bookings with optional filters (legacy compatibility).","operationId":"get_bookings_api__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Id"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":true},"title":"Response Get Bookings Api  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["booking-enhanced","admin"],"summary":"Create Booking","description":"Create a new booking (legacy compatibility).","operationId":"create_booking_api__post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Booking Data"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Create Booking Api  Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/{booking_id}":{"get":{"tags":["booking-enhanced","admin"],"summary":"Get Booking","description":"Get a specific booking by ID (legacy compatibility).","operationId":"get_booking_api__booking_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"booking_id","in":"path","required":true,"schema":{"type":"string","title":"Booking Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Booking Api  Booking Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["booking-enhanced","admin"],"summary":"Update Booking","description":"Update a booking (legacy compatibility).","operationId":"update_booking_api__booking_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"booking_id","in":"path","required":true,"schema":{"type":"string","title":"Booking Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Booking Data"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Update Booking Api  Booking Id  Put"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["booking-enhanced","admin"],"summary":"Delete Booking","description":"Delete a booking (legacy compatibility).","operationId":"delete_booking_api__booking_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"booking_id","in":"path","required":true,"schema":{"type":"string","title":"Booking Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":{"type":"string"},"title":"Response Delete Booking Api  Booking Id  Delete"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/payments/analytics":{"get":{"tags":["payment-analytics"],"summary":"Get Payment Analytics","description":"Get payment analytics for the specified time period.\n\n**Timezone Support**: Analytics respect station local time.\n- Date ranges calculated in station timezone\n- Automatically handles DST transitions\n- Results include both UTC and local timestamps\n\nPerformance Improvement: ~20x faster\n- Before: Multiple queries (~200ms)\n- After: 1 CTE query (~10ms)\n\nQuery Parameters:\n- days: Number of days to analyze (default: 30, max: 365)\n- station_timezone: IANA timezone (e.g., \"America/New_York\", \"America/Chicago\")\n\nReturns:\n- total_payments: Number of completed payments\n- total_amount: Total revenue in cents\n- avg_payment: Average payment amount in cents\n- method_stats: Breakdown by payment method (array of objects)\n- monthly_revenue: Monthly revenue breakdown (array of objects)\n- first_payment: Timestamp of first payment in range (UTC)\n- last_payment: Timestamp of last payment in range (UTC)\n- date_range: Query date range in station local time\n\nExample Response:\n```json\n{\n    \"success\": true,\n    \"data\": {\n        \"total_payments\": 150,\n        \"total_amount\": 125000,\n        \"avg_payment\": 833,\n        \"method_stats\": [\n            {\"method\": \"stripe\", \"count\": 100, \"total\": 100000, \"average\": 1000},\n            {\"method\": \"cash\", \"count\": 50, \"total\": 25000, \"average\": 500}\n        ],\n        \"monthly_revenue\": [\n            {\"month\": \"2025-10\", \"revenue\": 75000, \"count\": 90},\n            {\"month\": \"2025-09\", \"revenue\": 50000, \"count\": 60}\n        ],\n        \"first_payment\": \"2025-09-23T10:00:00Z\",\n        \"last_payment\": \"2025-10-23T18:30:00Z\",\n        \"date_range\": {\n            \"start_local\": \"Sep 23, 2025 3:00 AM PDT\",\n            \"end_local\": \"Oct 23, 2025 11:30 AM PDT\",\n            \"timezone\": \"America/Los_Angeles\"\n        }\n    },\n    \"timestamp\": \"2025-10-23T18:55:20Z\"\n}\n```\n\nPerformance Target: <15ms response time","operationId":"get_payment_analytics_api_payments_analytics_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"description":"Number of days to analyze","default":30,"title":"Days"},"description":"Number of days to analyze"},{"name":"station_timezone","in":"query","required":false,"schema":{"type":"string","description":"Station timezone (e.g., America/New_York)","default":"America/Los_Angeles","title":"Station Timezone"},"description":"Station timezone (e.g., America/New_York)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/voice/realtime/health":{"get":{"tags":["Voice - Real-time","Voice - Real-time"],"summary":"Realtime Voice Health","description":"Health check for real-time voice system.\n\nReturns status of:\n- Deepgram connectivity\n- Active call sessions\n- System readiness","operationId":"realtime_voice_health_api_voice_realtime_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/admin/config":{"get":{"tags":["admin","config","ssot","admin","config"],"summary":"List All Variables","description":"List all dynamic configuration variables.\n\nReturns all active variables grouped by category.\nSuper Admin can include inactive variables.","operationId":"list_all_variables_api_admin_config_get","security":[{"JWTBearer":[]}],"parameters":[{"name":"include_inactive","in":"query","required":false,"schema":{"type":"boolean","description":"Include inactive variables","default":false,"title":"Include Inactive"},"description":"Include inactive variables"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VariableListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["admin","config","ssot","admin","config"],"summary":"Create Variable","description":"Create a new configuration variable.\n\n**Super Admin only.**","operationId":"create_variable_api_admin_config_post","security":[{"JWTBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VariableCreateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/config/categories":{"get":{"tags":["admin","config","ssot","admin","config"],"summary":"List Categories","description":"List all configuration categories.\n\nReturns list of unique category names.","operationId":"list_categories_api_admin_config_categories_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"JWTBearer":[]}]}},"/api/admin/config/audit":{"get":{"tags":["admin","config","ssot","admin","config"],"summary":"Get Audit Log","description":"Get configuration change audit log.\n\nReturns paginated list of all configuration changes.","operationId":"get_audit_log_api_admin_config_audit_get","security":[{"JWTBearer":[]}],"parameters":[{"name":"category","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by category","title":"Category"},"description":"Filter by category"},{"name":"key","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by key","title":"Key"},"description":"Filter by key"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Items per page","default":50,"title":"Limit"},"description":"Items per page"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__admin__config__AuditLogResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/config/{category}":{"get":{"tags":["admin","config","ssot","admin","config"],"summary":"List Variables By Category","description":"List all variables in a category.\n\nCategories: pricing, deposit, travel, booking","operationId":"list_variables_by_category_api_admin_config__category__get","security":[{"JWTBearer":[]}],"parameters":[{"name":"category","in":"path","required":true,"schema":{"type":"string","title":"Category"}},{"name":"include_inactive","in":"query","required":false,"schema":{"type":"boolean","description":"Include inactive variables","default":false,"title":"Include Inactive"},"description":"Include inactive variables"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VariableListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/config/{category}/{key}":{"get":{"tags":["admin","config","ssot","admin","config"],"summary":"Get Variable","description":"Get a specific configuration variable.","operationId":"get_variable_api_admin_config__category___key__get","security":[{"JWTBearer":[]}],"parameters":[{"name":"category","in":"path","required":true,"schema":{"type":"string","title":"Category"}},{"name":"key","in":"path","required":true,"schema":{"type":"string","title":"Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["admin","config","ssot","admin","config"],"summary":"Update Variable","description":"Update a configuration variable.\n\n**Admin or Super Admin.**\n\nFor critical variables (pricing/deposit), Admin changes require approval.\nSuper Admin can bypass approval (god mode).\n\nChanges are logged to audit trail and cache is invalidated.","operationId":"update_variable_api_admin_config__category___key__put","security":[{"JWTBearer":[]}],"parameters":[{"name":"category","in":"path","required":true,"schema":{"type":"string","title":"Category"}},{"name":"key","in":"path","required":true,"schema":{"type":"string","title":"Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VariableUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["admin","config","ssot","admin","config"],"summary":"Delete Variable","description":"Delete (deactivate) a configuration variable.\n\n**Super Admin only.**\n\nBy default, performs soft delete (sets is_active=false).\nUse hard_delete=true to permanently remove.","operationId":"delete_variable_api_admin_config__category___key__delete","security":[{"JWTBearer":[]}],"parameters":[{"name":"category","in":"path","required":true,"schema":{"type":"string","title":"Category"}},{"name":"key","in":"path","required":true,"schema":{"type":"string","title":"Key"}},{"name":"hard_delete","in":"query","required":false,"schema":{"type":"boolean","description":"Permanently delete (vs soft delete)","default":false,"title":"Hard Delete"},"description":"Permanently delete (vs soft delete)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/config/bulk":{"post":{"tags":["admin","config","ssot","admin","config"],"summary":"Bulk Update Variables","description":"Bulk update multiple configuration variables.\n\n**Super Admin only.**\n\nAll updates are applied in a single transaction.","operationId":"bulk_update_variables_api_admin_config_bulk_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkUpdateRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"JWTBearer":[]}]}},"/api/admin/config/cache/invalidate":{"post":{"tags":["admin","config","ssot","admin","config"],"summary":"Invalidate Config Cache","description":"Manually invalidate the configuration cache.\n\n**Super Admin only.**\n\nForces all services to reload configuration from database.\nCache is automatically invalidated on updates, but this can be\nused for manual refresh.","operationId":"invalidate_config_cache_api_admin_config_cache_invalidate_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}}},"security":[{"JWTBearer":[]}]}},"/api/admin/config/approvals/pending":{"get":{"tags":["admin","config","ssot","admin","config"],"summary":"List Pending Approvals","description":"List approval requests.\n\n**Admin and Super Admin access.**\n\nFilter by status to see pending, approved, rejected, or expired requests.\nDefaults to showing pending requests if no status specified.","operationId":"list_pending_approvals_api_admin_config_approvals_pending_get","security":[{"JWTBearer":[]}],"parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by status: pending, approved, rejected, expired","title":"Status"},"description":"Filter by status: pending, approved, rejected, expired"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApprovalListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/config/approvals/request":{"post":{"tags":["admin","config","ssot","admin","config"],"summary":"Create Approval Request","description":"Create an approval request for a critical variable change.\n\n**Admin and Super Admin access.**\n\nFor critical variables (pricing, deposit), changes require approval from:\n- 2 Admin users, OR\n- 1 Super Admin (bypasses approval requirement)\n\nSuper Admins can also use the regular PUT endpoint which bypasses approval.","operationId":"create_approval_request_api_admin_config_approvals_request_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApprovalRequestCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"JWTBearer":[]}]}},"/api/admin/config/approvals/{approval_id}":{"get":{"tags":["admin","config","ssot","admin","config"],"summary":"Get Approval Request","description":"Get details of a specific approval request.\n\n**Admin and Super Admin access.**","operationId":"get_approval_request_api_admin_config_approvals__approval_id__get","security":[{"JWTBearer":[]}],"parameters":[{"name":"approval_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Approval Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["admin","config","ssot","admin","config"],"summary":"Cancel Approval Request","description":"Cancel/delete an approval request.\n\n**Admin and Super Admin access.**\n\nOnly the original requester or a Super Admin can cancel a request.\nOnly pending requests can be cancelled.","operationId":"cancel_approval_request_api_admin_config_approvals__approval_id__delete","security":[{"JWTBearer":[]}],"parameters":[{"name":"approval_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Approval Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/config/approvals/{approval_id}/approve":{"post":{"tags":["admin","config","ssot","admin","config"],"summary":"Approve Request","description":"Approve a pending approval request.\n\n**Admin and Super Admin access.**\n\nApproval requirements:\n- 2 Admin approvals required, OR\n- 1 Super Admin approval (instant approval - \"god mode\")\n\nIf this is the final required approval, the variable is automatically updated.","operationId":"approve_request_api_admin_config_approvals__approval_id__approve_post","security":[{"JWTBearer":[]}],"parameters":[{"name":"approval_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Approval Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApprovalActionRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/config/approvals/{approval_id}/reject":{"post":{"tags":["admin","config","ssot","admin","config"],"summary":"Reject Request","description":"Reject a pending approval request.\n\n**Admin and Super Admin access.**\n\nA rejection by any Admin or Super Admin will reject the entire request.","operationId":"reject_request_api_admin_config_approvals__approval_id__reject_post","security":[{"JWTBearer":[]}],"parameters":[{"name":"approval_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Approval Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApprovalActionRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/config/approvals/check/{category}/{key}":{"get":{"tags":["admin","config","ssot","admin","config"],"summary":"Check Requires Approval","description":"Check if a variable requires approval to update.\n\n**Admin and Super Admin access.**\n\nReturns whether this variable is considered \"critical\" and requires\nthe two-person approval workflow.","operationId":"check_requires_approval_api_admin_config_approvals_check__category___key__get","security":[{"JWTBearer":[]}],"parameters":[{"name":"category","in":"path","required":true,"schema":{"type":"string","title":"Category"}},{"name":"key","in":"path","required":true,"schema":{"type":"string","title":"Key"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/error-logs":{"get":{"tags":["admin","error-logs","monitoring","admin","monitoring"],"summary":"List Error Logs","description":"List error logs with optional filtering\n\nOnly accessible to admin and super_admin roles","operationId":"list_error_logs_api_admin_error_logs_get","parameters":[{"name":"level","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by log level (ERROR, WARNING, etc.)","title":"Level"},"description":"Filter by log level (ERROR, WARNING, etc.)"},{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Filter by user ID","title":"User Id"},"description":"Filter by user ID"},{"name":"resolved","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Filter by resolution status","title":"Resolved"},"description":"Filter by resolution status"},{"name":"path","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by request path","title":"Path"},"description":"Filter by request path"},{"name":"error_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by error type","title":"Error Type"},"description":"Filter by error type"},{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter errors after this date","title":"Start Date"},"description":"Filter errors after this date"},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter errors before this date","title":"End Date"},"description":"Filter errors before this date"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Number of logs to return","default":100,"title":"Limit"},"description":"Number of logs to return"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Pagination offset","default":0,"title":"Offset"},"description":"Pagination offset"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ErrorLogResponse"},"title":"Response List Error Logs Api Admin Error Logs Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/error-logs/{error_log_id}":{"get":{"tags":["admin","error-logs","monitoring","admin","monitoring"],"summary":"Get Error Log Detail","description":"Get detailed information about a specific error log\n\nIncludes full traceback and request details","operationId":"get_error_log_detail_api_admin_error_logs__error_log_id__get","parameters":[{"name":"error_log_id","in":"path","required":true,"schema":{"type":"integer","title":"Error Log Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorLogDetailResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/error-logs/{error_log_id}/resolve":{"post":{"tags":["admin","error-logs","monitoring","admin","monitoring"],"summary":"Resolve Error","description":"Mark an error log as resolved\n\nOnly accessible to admin and super_admin roles","operationId":"resolve_error_api_admin_error_logs__error_log_id__resolve_post","parameters":[{"name":"error_log_id","in":"path","required":true,"schema":{"type":"integer","title":"Error Log Id"}},{"name":"func","in":"query","required":true,"schema":{"title":"Func"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResolveErrorRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/error-logs/statistics/overview":{"get":{"tags":["admin","error-logs","monitoring","admin","monitoring"],"summary":"Get Error Statistics","description":"Get error statistics and analytics\n\nProvides insights into error patterns and trends","operationId":"get_error_statistics_api_admin_error_logs_statistics_overview_get","parameters":[{"name":"hours","in":"query","required":false,"schema":{"type":"integer","maximum":168,"minimum":1,"description":"Time window in hours","default":24,"title":"Hours"},"description":"Time window in hours"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorStatsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/error-logs/export/csv":{"get":{"tags":["admin","error-logs","monitoring","admin","monitoring"],"summary":"Export Error Logs Csv","description":"Export error logs to CSV file\n\nUseful for external analysis or record keeping","operationId":"export_error_logs_csv_api_admin_error_logs_export_csv_get","parameters":[{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Start Date"}},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"End Date"}},{"name":"level","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Level"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/audit-logs":{"get":{"tags":["admin","audit-logs","superadmin"],"summary":"Get Audit Logs","description":"Get comprehensive audit logs for super admin.\n\nAggregates data from multiple sources:\n- Main audit_logs table\n- Security events (login, failed attempts, etc.)\n- Configuration change logs\n\nSupports frontend query params:\n- action_type (aliased to action)\n- target_type (aliased to resource_type)\n- action_category (new filter)\n- severity (new filter)\n- date_from / date_to (aliased to start_date / end_date)\n- page_size (aliased to limit)\n\nRequires SUPER_ADMIN role.","operationId":"get_audit_logs_api_admin_audit_logs_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"action","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by action type (VIEW, CREATE, UPDATE, DELETE, LOGIN, etc.)","title":"Action"},"description":"Filter by action type (VIEW, CREATE, UPDATE, DELETE, LOGIN, etc.)"},{"name":"action_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Alias for action (frontend compatibility)","title":"Action Type"},"description":"Alias for action (frontend compatibility)"},{"name":"resource_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by resource type (booking, customer, user, etc.)","title":"Resource Type"},"description":"Filter by resource type (booking, customer, user, etc.)"},{"name":"target_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Alias for resource_type (frontend compatibility)","title":"Target Type"},"description":"Alias for resource_type (frontend compatibility)"},{"name":"action_category","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by category (authentication, data_change, security, system)","title":"Action Category"},"description":"Filter by category (authentication, data_change, security, system)"},{"name":"severity","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by severity (info, warning, error, critical)","title":"Severity"},"description":"Filter by severity (info, warning, error, critical)"},{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by user ID","title":"User Id"},"description":"Filter by user ID"},{"name":"user_email","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by user email (partial match)","title":"User Email"},"description":"Filter by user email (partial match)"},{"name":"user_role","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by user role (SUPER_ADMIN, ADMIN, CUSTOMER_SUPPORT, STATION_MANAGER, CHEF)","title":"User Role"},"description":"Filter by user role (SUPER_ADMIN, ADMIN, CUSTOMER_SUPPORT, STATION_MANAGER, CHEF)"},{"name":"station_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by station ID","title":"Station Id"},"description":"Filter by station ID"},{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter by start date (ISO format)","title":"Start Date"},"description":"Filter by start date (ISO format)"},{"name":"date_from","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Alias for start_date (frontend compatibility)","title":"Date From"},"description":"Alias for start_date (frontend compatibility)"},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Filter by end date (ISO format)","title":"End Date"},"description":"Filter by end date (ISO format)"},{"name":"date_to","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Alias for end_date (frontend compatibility)","title":"Date To"},"description":"Alias for end_date (frontend compatibility)"},{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"description":"Number of days to look back (default: 365)","default":365,"title":"Days"},"description":"Number of days to look back (default: 365)"},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Search in resource_name, user_name, user_email","title":"Search"},"description":"Search in resource_name, user_name, user_email"},{"name":"include_security","in":"query","required":false,"schema":{"type":"boolean","description":"Include security events","default":true,"title":"Include Security"},"description":"Include security events"},{"name":"include_config","in":"query","required":false,"schema":{"type":"boolean","description":"Include configuration changes","default":true,"title":"Include Config"},"description":"Include configuration changes"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number","default":1,"title":"Page"},"description":"Page number"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"description":"Items per page","default":50,"title":"Limit"},"description":"Items per page"},{"name":"page_size","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","maximum":200,"minimum":1},{"type":"null"}],"description":"Alias for limit (frontend compatibility)","title":"Page Size"},"description":"Alias for limit (frontend compatibility)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuditLogListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/audit-logs/stats":{"get":{"tags":["admin","audit-logs","superadmin"],"summary":"Get Audit Stats","description":"Get audit log statistics for dashboard.\n\nProvides:\n- Total entries (aliased as total_events for frontend)\n- Entries today (aliased as events_today)\n- Entries this week (aliased as events_this_week)\n- Action type breakdown\n- Top users by activity\n- Top resource types\n- Security events count\n- Authentication events count\n- Data change events count\n- Unique users count\n- Failed actions count\n- Success rate","operationId":"get_audit_stats_api_admin_audit_logs_stats_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":30,"minimum":1,"description":"Number of days for stats","default":7,"title":"Days"},"description":"Number of days for stats"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuditLogStatsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/audit-logs/actions":{"get":{"tags":["admin","audit-logs","superadmin"],"summary":"Get Action Types","description":"Get list of available action types and resource types for filtering.","operationId":"get_action_types_api_admin_audit_logs_actions_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ActionTypesResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/admin/notification-groups/notification-groups/":{"post":{"tags":["admin","notifications","notification-groups","admin"],"summary":"Create notification group","description":"Create a new notification group (Super Admin only).\n\n    ## Examples:\n    - \"All Admins\" - Receives all events from all stations\n    - \"Station CA-BAY-001 Managers\" - Only receives events for CA-BAY-001\n    - \"Payment Team\" - Only receives payment-related events","operationId":"create_group_api_admin_notification_groups_notification_groups__post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GroupCreateRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GroupResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["admin","notifications","notification-groups","admin"],"summary":"List notification groups","description":"Get all notification groups (optionally filtered by station)","operationId":"list_groups_api_admin_notification_groups_notification_groups__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"station_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Station Id"}},{"name":"include_inactive","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Inactive"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/GroupResponse"},"title":"Response List Groups Api Admin Notification Groups Notification Groups  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/notification-groups/notification-groups/{group_id}":{"get":{"tags":["admin","notifications","notification-groups","admin"],"summary":"Get notification group details","description":"Get detailed information about a notification group","operationId":"get_group_api_admin_notification_groups_notification_groups__group_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"group_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Group Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["admin","notifications","notification-groups","admin"],"summary":"Update notification group","description":"Update group name, description, or active status","operationId":"update_group_api_admin_notification_groups_notification_groups__group_id__patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"group_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Group Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GroupUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GroupResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["admin","notifications","notification-groups","admin"],"summary":"Delete notification group","description":"Delete a notification group (cascade deletes all members and subscriptions)","operationId":"delete_group_api_admin_notification_groups_notification_groups__group_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"group_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Group Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/notification-groups/notification-groups/{group_id}/members":{"post":{"tags":["admin","notifications","notification-groups","admin"],"summary":"Add member to group","description":"Add a team member to a notification group","operationId":"add_member_api_admin_notification_groups_notification_groups__group_id__members_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"group_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Group Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MemberAddRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MemberResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["admin","notifications","notification-groups","admin"],"summary":"List group members","description":"Get all members of a notification group","operationId":"list_members_api_admin_notification_groups_notification_groups__group_id__members_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"group_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Group Id"}},{"name":"include_inactive","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Inactive"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MemberResponse"},"title":"Response List Members Api Admin Notification Groups Notification Groups  Group Id  Members Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/notification-groups/notification-groups/{group_id}/members/{member_id}":{"patch":{"tags":["admin","notifications","notification-groups","admin"],"summary":"Update member preferences","description":"Update member's notification preferences","operationId":"update_member_api_admin_notification_groups_notification_groups__group_id__members__member_id__patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"group_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Group Id"}},{"name":"member_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Member Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MemberUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MemberResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["admin","notifications","notification-groups","admin"],"summary":"Remove member from group","description":"Remove a team member from a notification group","operationId":"remove_member_api_admin_notification_groups_notification_groups__group_id__members__member_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"group_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Group Id"}},{"name":"member_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Member Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/notification-groups/notification-groups/{group_id}/events":{"post":{"tags":["admin","notifications","notification-groups","admin"],"summary":"Add event subscription","description":"Subscribe group to a notification event type","operationId":"add_event_subscription_api_admin_notification_groups_notification_groups__group_id__events_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"group_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Group Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventSubscriptionRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/notification-groups/notification-groups/{group_id}/events/{event_id}":{"delete":{"tags":["admin","notifications","notification-groups","admin"],"summary":"Remove event subscription","description":"Unsubscribe group from a notification event type","operationId":"remove_event_subscription_api_admin_notification_groups_notification_groups__group_id__events__event_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"group_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Group Id"}},{"name":"event_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Event Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/notification-groups/notification-groups/initialize-defaults":{"post":{"tags":["admin","notifications","notification-groups","admin"],"summary":"Initialize default groups","description":"Create default notification groups if they don't exist","operationId":"initialize_defaults_api_admin_notification_groups_notification_groups_initialize_defaults_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/admin/notification-groups/notification-groups/event-types":{"get":{"tags":["admin","notifications","notification-groups","admin"],"summary":"List available event types","description":"Get list of all notification event types","operationId":"list_event_types_api_admin_notification_groups_notification_groups_event_types_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/admin/analytics/overview":{"get":{"tags":["Admin Analytics"],"summary":"Get Overview","description":"Get comprehensive business overview\nAggregates: Revenue, bookings, customers, leads, reviews","operationId":"get_overview_api_admin_analytics_overview_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"period","in":"query","required":false,"schema":{"type":"string","description":"Time period: 7d, 30d, 90d, 1y","default":"30d","title":"Period"},"description":"Time period: 7d, 30d, 90d, 1y"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OverviewStats"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/analytics/leads":{"get":{"tags":["Admin Analytics"],"summary":"Get Lead Analytics","description":"Get lead performance analytics\nIncludes: Sources, stages, quality, conversion rates","operationId":"get_lead_analytics_v2","security":[{"HTTPBearer":[]}],"parameters":[{"name":"period","in":"query","required":false,"schema":{"type":"string","description":"Time period: 7d, 30d, 90d, 1y","default":"30d","title":"Period"},"description":"Time period: 7d, 30d, 90d, 1y"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api__v1__endpoints__analytics__LeadAnalytics"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/analytics/newsletter":{"get":{"tags":["Admin Analytics"],"summary":"Get Newsletter Analytics","description":"Get newsletter performance analytics\nIncludes: Subscribers, campaigns, open/click rates","operationId":"get_newsletter_analytics_v2","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api__v1__endpoints__analytics__NewsletterAnalytics"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/admin/analytics/funnel":{"get":{"tags":["Admin Analytics"],"summary":"Get Conversion Funnel","description":"Get customer conversion funnel\nShows: Lead â†’ Qualified â†’ Proposal â†’ Booking â†’ Payment","operationId":"get_conversion_funnel_v2","security":[{"HTTPBearer":[]}],"parameters":[{"name":"period","in":"query","required":false,"schema":{"type":"string","description":"Time period","default":"30d","title":"Period"},"description":"Time period"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversionFunnel"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/analytics/lead-scoring":{"get":{"tags":["Admin Analytics"],"summary":"Get Lead Scoring","description":"Get lead scoring analytics\nShows: Score distribution, high-value leads, scoring factors","operationId":"get_lead_scoring_api_admin_analytics_lead_scoring_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeadScoring"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/admin/analytics/engagement-trends":{"get":{"tags":["Admin Analytics"],"summary":"Get Engagement Trends","description":"Get customer engagement trends\nShows: Daily active users, page views, interaction rates","operationId":"get_engagement_trends_v2","security":[{"HTTPBearer":[]}],"parameters":[{"name":"period","in":"query","required":false,"schema":{"type":"string","description":"Time period","default":"30d","title":"Period"},"description":"Time period"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EngagementTrends"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/analytics/revenue-trends":{"get":{"tags":["admin","analytics","admin","analytics"],"summary":"Get Revenue Trends","description":"Get revenue trends over time with customizable intervals.\n\nReturns:\n    - Daily/Weekly/Monthly revenue\n    - Booking counts\n    - Average order value\n    - Growth rates","operationId":"get_revenue_trends_api_admin_analytics_revenue_trends_get","parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"default":30,"title":"Days"}},{"name":"interval","in":"query","required":false,"schema":{"type":"string","pattern":"^(day|week|month)$","default":"day","title":"Interval"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/analytics/customer-lifetime-value":{"get":{"tags":["admin","analytics","admin","analytics"],"summary":"Get Customer Lifetime Value","description":"Calculate Customer Lifetime Value (CLV) metrics.\n\nReturns:\n    - Average CLV\n    - CLV distribution\n    - Top customers by value\n    - Repeat customer rates","operationId":"get_customer_lifetime_value_api_admin_analytics_customer_lifetime_value_get","parameters":[{"name":"top_n","in":"query","required":false,"schema":{"type":"integer","maximum":500,"default":100,"title":"Top N"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/analytics/booking-conversion-funnel":{"get":{"tags":["admin","analytics","admin","analytics"],"summary":"Get Booking Conversion Funnel","description":"Get detailed booking conversion funnel analytics.\n\nTracks the journey from lead â†’ quote â†’ booking â†’ payment","operationId":"get_booking_conversion_funnel_api_admin_analytics_booking_conversion_funnel_get","parameters":[{"name":"date_from","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Date From"}},{"name":"date_to","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Date To"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/analytics/menu-item-popularity":{"get":{"tags":["admin","analytics","admin","analytics"],"summary":"Get Menu Item Popularity","description":"Analyze menu item popularity and preferences.\n\nNote: This is a placeholder implementation. Requires menu_items table\nor extracting from booking special_requests/notes.","operationId":"get_menu_item_popularity_api_admin_analytics_menu_item_popularity_get","parameters":[{"name":"date_from","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Date From"}},{"name":"date_to","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Date To"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/analytics/geographic-distribution":{"get":{"tags":["admin","analytics","admin","analytics"],"summary":"Get Geographic Distribution","description":"Analyze customer and booking geographic distribution.\n\nReturns distribution by station/location.","operationId":"get_geographic_distribution_api_admin_analytics_geographic_distribution_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/admin/analytics/seasonal-trends":{"get":{"tags":["admin","analytics","admin","analytics"],"summary":"Get Seasonal Trends","description":"Analyze seasonal booking trends and patterns.\n\nReturns:\n    - Monthly booking patterns\n    - Day of week analysis\n    - Seasonal revenue trends\n    - Peak/off-peak identification","operationId":"get_seasonal_trends_api_admin_analytics_seasonal_trends_get","parameters":[{"name":"years","in":"query","required":false,"schema":{"type":"integer","maximum":5,"minimum":1,"default":1,"title":"Years"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/emails/stats":{"get":{"tags":["admin","emails","admin","emails"],"summary":"Get Email Stats","description":"Get statistics for both email inboxes\n\n**NEW**: Reads from PostgreSQL database for instant stats!\n\nReturns:\n    - customer_support: Stats for cs@myhibachichef.com\n    - payments: Stats for myhibachichef@gmail.com","operationId":"get_email_stats_api_v1_admin_emails_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":{"$ref":"#/components/schemas/EmailStats"},"type":"object","title":"Response Get Email Stats Api V1 Admin Emails Stats Get"}}}}}}},"/api/v1/admin/emails/customer-support":{"get":{"tags":["admin","emails","admin","emails"],"summary":"Get Customer Support Emails","description":"Get emails from cs@myhibachichef.com (Customer Support Inbox)\n\n**NEW**: Reads from PostgreSQL database for instant access!\n\nThis is the main customer support inbox with READ/WRITE capabilities:\n- View incoming customer emails\n- Reply via Resend API\n- Mark as read/unread\n- Star important emails\n- Archive old conversations\n\nArgs:\n    page: Page number (1-indexed)\n    limit: Results per page\n    unread_only: Show only unread emails\n    starred_only: Show only starred emails\n    archived: Show archived emails (default: false)\n    search: Search query (subject, sender, body)\n    label: Filter by label slug (e.g., 'vip', 'urgent', 'follow-up')","operationId":"get_customer_support_emails_api_v1_admin_emails_customer_support_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":50,"title":"Limit"}},{"name":"unread_only","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Unread Only"}},{"name":"starred_only","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Starred Only"}},{"name":"archived","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Archived"}},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Search"}},{"name":"label","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by label slug","title":"Label"},"description":"Filter by label slug"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/emails/payments":{"get":{"tags":["admin","emails","admin","emails"],"summary":"Get Payment Emails","description":"Get emails from myhibachichef@gmail.com (Payment Monitoring - READ ONLY)\n\nThis inbox is READ-ONLY for manual payment verification:\n- Stripe payment confirmations\n- Venmo payment notifications\n- Zelle transfer confirmations\n- Bank of America alerts\n\nArgs:\n    page: Page number (1-indexed)\n    limit: Results per page\n    unread_only: Show only unread emails\n    search: Search query (subject, sender, body)","operationId":"get_payment_emails_api_v1_admin_emails_payments_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":50,"title":"Limit"}},{"name":"unread_only","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Unread Only"}},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Search"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/emails/customer-support/{thread_id}":{"get":{"tags":["admin","emails","admin","emails"],"summary":"Get Customer Support Thread","description":"Get a specific email thread from customer support inbox\n\nArgs:\n    thread_id: Thread ID (normalized subject)","operationId":"get_customer_support_thread_api_v1_admin_emails_customer_support__thread_id__get","parameters":[{"name":"thread_id","in":"path","required":true,"schema":{"type":"string","title":"Thread Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailThread"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/emails/customer-support/send":{"post":{"tags":["admin","emails","admin","emails"],"summary":"Send Customer Support Email","description":"Send or reply to customer support email via Resend API\n\nArgs:\n    request: Email details (to, subject, body, reply info)","operationId":"send_customer_support_email_api_v1_admin_emails_customer_support_send_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendEmailRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Send Customer Support Email Api V1 Admin Emails Customer Support Send Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/emails/customer-support/{message_id}":{"patch":{"tags":["admin","emails","admin","emails"],"summary":"Update Customer Support Email","description":"Update customer support email status (mark as read, star, archive)\n\nArgs:\n    message_id: Email message ID\n    request: Update fields","operationId":"update_customer_support_email_api_v1_admin_emails_customer_support__message_id__patch","parameters":[{"name":"message_id","in":"path","required":true,"schema":{"type":"string","title":"Message Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateEmailRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Update Customer Support Email Api V1 Admin Emails Customer Support  Message Id  Patch"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["admin","emails","admin","emails"],"summary":"Delete Customer Support Email","description":"Permanently delete customer support email (super admin only)\n\nArgs:\n    message_id: Email message ID\n    current_user: Current authenticated user (must be super admin)\n\nReturns:\n    Success confirmation","operationId":"delete_customer_support_email_api_v1_admin_emails_customer_support__message_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"message_id","in":"path","required":true,"schema":{"type":"string","title":"Message Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Delete Customer Support Email Api V1 Admin Emails Customer Support  Message Id  Delete"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/emails/customer-support/bulk":{"post":{"tags":["admin","emails","admin","emails"],"summary":"Bulk Update Customer Support Emails","description":"Bulk update multiple emails (mark read/unread, star/unstar, archive, delete, labels)\n\nArgs:\n    request: Bulk update request with message IDs and action\n\nReturns:\n    Success count and failure details","operationId":"bulk_update_customer_support_emails_api_v1_admin_emails_customer_support_bulk_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkUpdateEmailRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Bulk Update Customer Support Emails Api V1 Admin Emails Customer Support Bulk Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/emails/payments/{message_id}":{"delete":{"tags":["admin","emails","admin","emails"],"summary":"Delete Payment Email","description":"Permanently delete payment email (super admin only)\n\nArgs:\n    message_id: Email message ID\n    current_user: Current authenticated user (must be super admin)\n\nReturns:\n    Success confirmation","operationId":"delete_payment_email_api_v1_admin_emails_payments__message_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"message_id","in":"path","required":true,"schema":{"type":"string","title":"Message Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Delete Payment Email Api V1 Admin Emails Payments  Message Id  Delete"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/emails/attachments/{message_id}/{attachment_index}":{"get":{"tags":["admin","emails","admin","emails"],"summary":"Download Attachment","description":"Download email attachment.\n\nArgs:\n    message_id: Email message ID\n    attachment_index: Index of attachment (0-based)\n\nReturns:\n    File download response","operationId":"download_attachment_api_v1_admin_emails_attachments__message_id___attachment_index__get","parameters":[{"name":"message_id","in":"path","required":true,"schema":{"type":"string","title":"Message Id"}},{"name":"attachment_index","in":"path","required":true,"schema":{"type":"integer","title":"Attachment Index"}}],"responses":{"200":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/emails/labels":{"get":{"tags":["admin","emails","admin","emails"],"summary":"List Labels","description":"Get all email labels.\n\nReturns active labels by default. Set include_archived=true to see all.\nSystem labels cannot be deleted (e.g., Important, Follow-up).","operationId":"list_labels_api_v1_admin_emails_labels_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"include_archived","in":"query","required":false,"schema":{"type":"boolean","description":"Include archived labels","default":false,"title":"Include Archived"},"description":"Include archived labels"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/LabelResponse"},"title":"Response List Labels Api V1 Admin Emails Labels Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["admin","emails","admin","emails"],"summary":"Create Label","description":"Create a new email label.\n\nLabel slug is auto-generated from name (e.g., \"Follow Up\" Î“Ã¥Ã† \"follow-up\").\nLabel names must be unique.","operationId":"create_label_api_v1_admin_emails_labels_post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LabelCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LabelResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/emails/labels/{label_id}":{"put":{"tags":["admin","emails","admin","emails"],"summary":"Update Label","description":"Update an existing label.\n\nSystem labels can only update color/icon, not name.","operationId":"update_label_api_v1_admin_emails_labels__label_id__put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"label_id","in":"path","required":true,"schema":{"type":"integer","title":"Label Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LabelUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LabelResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["admin","emails","admin","emails"],"summary":"Delete Label","description":"Archive (soft delete) a label.\n\nSystem labels cannot be deleted.\nEmails with this label will have it removed.","operationId":"delete_label_api_v1_admin_emails_labels__label_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"label_id","in":"path","required":true,"schema":{"type":"integer","title":"Label Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/reviews/submit-public":{"post":{"tags":["reviews","feedback","reviews"],"summary":"Submit Public Review","description":"Public endpoint for customers to submit reviews with optional media uploads.\n\nAccepts multipart/form-data with:\n- rating: 1-5 stars (required)\n- review_text: Text feedback (optional)\n- customer_email: Email address (required)\n- customer_name: Customer name (optional)\n- booking_id: Associated booking UUID (optional)\n- files: Up to 5 image/video files (optional)\n\nMedia files are processed asynchronously in the background.\nResponse is returned immediately after review creation.","operationId":"submit_public_review_api_v1_reviews_submit_public_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_submit_public_review_api_v1_reviews_submit_public_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PublicReviewResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/reviews/":{"get":{"tags":["reviews","feedback","reviews"],"summary":"List Reviews","description":"List reviews (paginated).","operationId":"list_reviews_api_v1_reviews__get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["reviews","feedback","reviews"],"summary":"Create Review","description":"Create a new customer review.","operationId":"create_review_api_v1_reviews__post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewCreateRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/reviews/{review_id}":{"get":{"tags":["reviews","feedback","reviews"],"summary":"Get Review","description":"Get review details for customer review page.","operationId":"get_review_api_v1_reviews__review_id__get","parameters":[{"name":"review_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Review Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/reviews/{review_id}/submit":{"post":{"tags":["reviews","feedback","reviews"],"summary":"Submit Review","description":"Submit a customer review.","operationId":"submit_review_api_v1_reviews__review_id__submit_post","parameters":[{"name":"review_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Review Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewSubmissionRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/reviews/{review_id}/track-external":{"post":{"tags":["reviews","feedback","reviews"],"summary":"Track External Review","description":"Track when customer leaves external review (Yelp/Google).","operationId":"track_external_review_api_v1_reviews__review_id__track_external_post","parameters":[{"name":"review_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Review Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ExternalReviewTrackingRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/reviews/coupons/validate":{"post":{"tags":["reviews","feedback","reviews"],"summary":"Validate Coupon","description":"Validate a discount coupon.","operationId":"validate_coupon_api_v1_reviews_coupons_validate_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CouponValidationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/reviews/coupons/apply":{"post":{"tags":["reviews","feedback","reviews"],"summary":"Apply Coupon","description":"Apply a discount coupon to a booking.","operationId":"apply_coupon_api_v1_reviews_coupons_apply_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CouponApplicationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/reviews/customers/{customer_id}/coupons":{"get":{"tags":["reviews","feedback","reviews"],"summary":"Get Customer Coupons","description":"Get customer's available coupons.","operationId":"get_customer_coupons_api_v1_reviews_customers__customer_id__coupons_get","parameters":[{"name":"customer_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Customer Id"}},{"name":"station_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Station Id"}},{"name":"active_only","in":"query","required":false,"schema":{"type":"boolean","default":true,"title":"Active Only"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/reviews/customers/{customer_id}/reviews":{"get":{"tags":["reviews","feedback","reviews"],"summary":"Get Customer Reviews","description":"Get customer's review history.","operationId":"get_customer_reviews_api_v1_reviews_customers__customer_id__reviews_get","parameters":[{"name":"customer_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Customer Id"}},{"name":"station_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Station Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/reviews/admin/escalated":{"get":{"tags":["reviews","feedback","reviews"],"summary":"Get Escalated Reviews","description":"Get escalated reviews for admin dashboard.","operationId":"get_escalated_reviews_api_v1_reviews_admin_escalated_get","parameters":[{"name":"station_id","in":"query","required":true,"schema":{"type":"string","format":"uuid","title":"Station Id"}},{"name":"status","in":"query","required":false,"schema":{"type":"string","default":"escalated","title":"Status"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/reviews/{review_id}/resolve":{"post":{"tags":["reviews","feedback","reviews"],"summary":"Resolve Review","description":"Resolve an escalated review (admin only).","operationId":"resolve_review_api_v1_reviews__review_id__resolve_post","parameters":[{"name":"review_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Review Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReviewResolutionRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/reviews/ai/issue-coupon":{"post":{"tags":["reviews","feedback","reviews"],"summary":"Ai Issue Coupon","description":"AI service calls this to issue coupon after interacting with customer.\n\nâš ï¸ CRITICAL: Only for EXISTING CUSTOMERS with completed bookings (complaint compensation).\nNOT for promotional discounts (admin-only).\n\nRequirements:\n- Must have booking_id (existing customer)\n- Must be 'could_be_better' review (complaint)\n- After AI determines compensation is warranted\n- Max 10% or $100 cap (whichever is less)","operationId":"ai_issue_coupon_api_v1_reviews_ai_issue_coupon_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AIInteractionRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/reviews/ai/escalate-to-human":{"post":{"tags":["reviews","feedback","reviews"],"summary":"Ai Escalate To Human","description":"AI service calls this when it cannot resolve the complaint.\nEscalates to human admin with urgency.","operationId":"ai_escalate_to_human_api_v1_reviews_ai_escalate_to_human_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AIEscalationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/reviews/admin/analytics":{"get":{"tags":["reviews","feedback","reviews"],"summary":"Get Review Analytics","description":"Get review analytics for admin dashboard.","operationId":"get_review_analytics_api_v1_reviews_admin_analytics_get","parameters":[{"name":"station_id","in":"query","required":true,"schema":{"type":"string","format":"uuid","title":"Station Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/knowledge/sync/status":{"get":{"tags":["knowledge-sync","Knowledge Sync"],"summary":"Get Sync Status","description":"Check sync status for all three knowledge sources\n\nReturns:\n    - Overall sync status (synced, needs_sync, conflicts)\n    - Detailed status for each source (menu, FAQs, terms)\n    - File hashes and change summaries\n\nSecurity: Requires superadmin role","operationId":"get_sync_status_api_v1_knowledge_sync_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api__v1__knowledge_sync__router__SyncStatusResponse"}}}}}}},"/api/v1/knowledge/sync/auto":{"post":{"tags":["knowledge-sync","Knowledge Sync"],"summary":"Trigger Auto Sync","description":"Trigger automatic sync for specified sources (or all)\n\nArgs:\n    request.sources: List of sources to sync ('menu', 'faqs', 'terms') or None for all\n    request.force: If True, override conflicts (use with caution!)\n\nReturns:\n    - Success status for each source\n    - Number of items added/modified/deleted\n    - Error messages if any\n\nSecurity: Requires superadmin role\n\nNotes:\n    - Auto-sync will PAUSE if conflicts detected (unless force=True)\n    - Conflicts occur when DB items were manually edited AND file changed\n    - Use force=True carefully - it will overwrite manual DB edits","operationId":"trigger_auto_sync_api_v1_knowledge_sync_auto_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SyncActionRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SyncActionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/knowledge/sync/force":{"post":{"tags":["knowledge-sync","Knowledge Sync"],"summary":"Force Sync Override","description":"Force sync with conflict override (SUPERADMIN ONLY - USE WITH CAUTION!)\n\nThis endpoint will:\n1. Detect changes from TypeScript files\n2. OVERRIDE any manual DB edits (force=True)\n3. Apply file changes to database\n\nâš ï¸ WARNING: This will OVERWRITE manual edits made via admin UI!\n\nUse cases:\n    - File changes are authoritative (e.g., developer updated pricing)\n    - Manual DB edits were mistakes\n    - Need to reset DB to match source files\n\nSecurity: Requires superadmin role with additional confirmation","operationId":"force_sync_override_api_v1_knowledge_sync_force_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SyncActionRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SyncActionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/knowledge/sync/diff/{source}":{"get":{"tags":["knowledge-sync","Knowledge Sync"],"summary":"Get Sync Diff","description":"Get detailed differences for a specific source\n\nShows:\n    - Items added in file (not in DB)\n    - Items modified (file differs from DB)\n    - Items deleted (removed from file but still in DB)\n    - Conflicts (manual DB edits + file changes)\n\nUseful for:\n    - Reviewing changes before syncing\n    - Debugging sync conflicts\n    - Audit trail of what changed\n\nSecurity: Requires superadmin role","operationId":"get_sync_diff_api_v1_knowledge_sync_diff__source__get","parameters":[{"name":"source","in":"path","required":true,"schema":{"enum":["menu","faqs","terms"],"type":"string","title":"Source"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api__v1__knowledge_sync__router__DiffResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/knowledge/sync/health":{"get":{"tags":["knowledge-sync","Knowledge Sync"],"summary":"Sync Service Health","description":"Health check for sync service\n\nReturns:\n    - Service status\n    - File paths being monitored\n    - Last check timestamp","operationId":"sync_service_health_api_v1_knowledge_sync_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/leads/":{"post":{"tags":["leads","leads"],"summary":"Create Lead","description":"Create a new lead with contacts and context.","operationId":"create_lead_api_leads__post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__leads__LeadCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__leads__LeadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["leads","leads"],"summary":"List Leads","description":"List leads with filtering and sorting.","operationId":"list_leads_api_leads__get","parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/LeadStatus"},{"type":"null"}],"title":"Status"}},{"name":"quality","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/LeadQuality"},{"type":"null"}],"title":"Quality"}},{"name":"source","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/LeadSource"},{"type":"null"}],"title":"Source"}},{"name":"assigned_to","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assigned To"}},{"name":"score_min","in":"query","required":false,"schema":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Score Min"}},{"name":"score_max","in":"query","required":false,"schema":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Score Max"}},{"name":"follow_up_overdue","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Follow Up Overdue"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}},{"name":"sort_by","in":"query","required":false,"schema":{"type":"string","pattern":"^(score|created_at|follow_up_date|last_contact_date)$","default":"score","title":"Sort By"}},{"name":"sort_order","in":"query","required":false,"schema":{"type":"string","pattern":"^(asc|desc)$","default":"desc","title":"Sort Order"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/routers__v1__leads__LeadResponse"},"title":"Response List Leads Api Leads  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/leads/{lead_id}":{"get":{"tags":["leads","leads"],"summary":"Get Lead","description":"Get detailed lead information.","operationId":"get_lead_api_leads__lead_id__get","parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Lead Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeadDetailResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["leads","leads"],"summary":"Update Lead","description":"Update lead information.","operationId":"update_lead_api_leads__lead_id__put","parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Lead Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__leads__LeadUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__leads__LeadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/leads/{lead_id}/events":{"post":{"tags":["leads","leads"],"summary":"Add Lead Event","description":"Add a funnel event to a lead for tracking customer journey.\n\nThis endpoint tracks lead progression through the conversion funnel:\n- funnel_checked_availability: User checked chef availability\n- funnel_started_booking: User navigated to booking page\n- funnel_completed_booking: User completed booking\n- funnel_dropped: User abandoned the funnel\n\nThe events are stored with timestamps for analytics and follow-up automation.","operationId":"add_lead_event_api_leads__lead_id__events_post","parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Lead Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeadEventCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeadEventResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/leads/{lead_id}/events/simple":{"post":{"tags":["leads","leads"],"summary":"Add Simple Lead Event","description":"Add an event to a lead using simple parameters (alternative to Pydantic model).","operationId":"add_simple_lead_event_api_leads__lead_id__events_simple_post","parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Lead Id"}},{"name":"event_type","in":"query","required":true,"schema":{"type":"string","title":"Event Type"}}],"requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"type":"object","additionalProperties":true},{"type":"null"}],"title":"Payload"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/leads/{lead_id}/ai-analysis":{"post":{"tags":["leads","leads"],"summary":"Analyze Lead With Ai","description":"Analyze lead using AI and update scoring.","operationId":"analyze_lead_with_ai_api_leads__lead_id__ai_analysis_post","parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Lead Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":{"type":"string"}},"title":"Conversation Data"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/leads/{lead_id}/nurture-sequence":{"get":{"tags":["leads","leads"],"summary":"Get Nurture Sequence","description":"Get AI-generated nurture sequence for lead.","operationId":"get_nurture_sequence_api_leads__lead_id__nurture_sequence_get","parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Lead Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/leads/social-threads":{"post":{"tags":["leads","leads"],"summary":"Create Social Thread","description":"Create or link a social media thread.","operationId":"create_social_thread_api_leads_social_threads_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SocialThreadCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SocialThreadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["leads","leads"],"summary":"List Social Threads","description":"List social media threads.","operationId":"list_social_threads_api_leads_social_threads_get","parameters":[{"name":"platform","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/SocialPlatform"},{"type":"null"}],"title":"Platform"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SocialThreadResponse"},"title":"Response List Social Threads Api Leads Social Threads Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/leads/social-threads/{thread_id}/respond":{"post":{"tags":["leads","leads"],"summary":"Respond To Social Thread","description":"Generate AI response for social media thread.","operationId":"respond_to_social_thread_api_leads_social_threads__thread_id__respond_post","parameters":[{"name":"thread_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Thread Id"}},{"name":"message_content","in":"query","required":true,"schema":{"type":"string","title":"Message Content"}}],"requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"type":"object","additionalProperties":true},{"type":"null"}],"title":"Context"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/public/leads/":{"post":{"tags":["leads-public","leads"],"summary":"Create Lead","description":"Create a new lead with contacts and context.","operationId":"public_leads_create_lead","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__leads__LeadCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__leads__LeadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["leads-public","leads"],"summary":"List Leads","description":"List leads with filtering and sorting.","operationId":"public_leads_list_leads","parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/LeadStatus"},{"type":"null"}],"title":"Status"}},{"name":"quality","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/LeadQuality"},{"type":"null"}],"title":"Quality"}},{"name":"source","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/LeadSource"},{"type":"null"}],"title":"Source"}},{"name":"assigned_to","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assigned To"}},{"name":"score_min","in":"query","required":false,"schema":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Score Min"}},{"name":"score_max","in":"query","required":false,"schema":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Score Max"}},{"name":"follow_up_overdue","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Follow Up Overdue"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}},{"name":"sort_by","in":"query","required":false,"schema":{"type":"string","pattern":"^(score|created_at|follow_up_date|last_contact_date)$","default":"score","title":"Sort By"}},{"name":"sort_order","in":"query","required":false,"schema":{"type":"string","pattern":"^(asc|desc)$","default":"desc","title":"Sort Order"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/routers__v1__leads__LeadResponse"},"title":"Response Public Leads List Leads"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/public/leads/{lead_id}":{"get":{"tags":["leads-public","leads"],"summary":"Get Lead","description":"Get detailed lead information.","operationId":"public_leads_get_lead","parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Lead Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeadDetailResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["leads-public","leads"],"summary":"Update Lead","description":"Update lead information.","operationId":"public_leads_update_lead","parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Lead Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__leads__LeadUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__leads__LeadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/public/leads/{lead_id}/events":{"post":{"tags":["leads-public","leads"],"summary":"Add Lead Event","description":"Add a funnel event to a lead for tracking customer journey.\n\nThis endpoint tracks lead progression through the conversion funnel:\n- funnel_checked_availability: User checked chef availability\n- funnel_started_booking: User navigated to booking page\n- funnel_completed_booking: User completed booking\n- funnel_dropped: User abandoned the funnel\n\nThe events are stored with timestamps for analytics and follow-up automation.","operationId":"public_leads_add_lead_event","parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Lead Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeadEventCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LeadEventResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/public/leads/{lead_id}/events/simple":{"post":{"tags":["leads-public","leads"],"summary":"Add Simple Lead Event","description":"Add an event to a lead using simple parameters (alternative to Pydantic model).","operationId":"public_leads_add_simple_lead_event","parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Lead Id"}},{"name":"event_type","in":"query","required":true,"schema":{"type":"string","title":"Event Type"}}],"requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"type":"object","additionalProperties":true},{"type":"null"}],"title":"Payload"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/public/leads/{lead_id}/ai-analysis":{"post":{"tags":["leads-public","leads"],"summary":"Analyze Lead With Ai","description":"Analyze lead using AI and update scoring.","operationId":"public_leads_analyze_lead_with_ai","parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Lead Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":{"type":"string"}},"title":"Conversation Data"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/public/leads/{lead_id}/nurture-sequence":{"get":{"tags":["leads-public","leads"],"summary":"Get Nurture Sequence","description":"Get AI-generated nurture sequence for lead.","operationId":"public_leads_get_nurture_sequence","parameters":[{"name":"lead_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Lead Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/public/leads/social-threads":{"post":{"tags":["leads-public","leads"],"summary":"Create Social Thread","description":"Create or link a social media thread.","operationId":"public_leads_create_social_thread","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SocialThreadCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SocialThreadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["leads-public","leads"],"summary":"List Social Threads","description":"List social media threads.","operationId":"public_leads_list_social_threads","parameters":[{"name":"platform","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/SocialPlatform"},{"type":"null"}],"title":"Platform"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SocialThreadResponse"},"title":"Response Public Leads List Social Threads"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/public/leads/social-threads/{thread_id}/respond":{"post":{"tags":["leads-public","leads"],"summary":"Respond To Social Thread","description":"Generate AI response for social media thread.","operationId":"public_leads_respond_to_social_thread","parameters":[{"name":"thread_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Thread Id"}},{"name":"message_content","in":"query","required":true,"schema":{"type":"string","title":"Message Content"}}],"requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"type":"object","additionalProperties":true},{"type":"null"}],"title":"Context"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/newsletter/newsletter/subscribers":{"post":{"tags":["newsletter","newsletter"],"summary":"Create Subscriber","description":"Create a new newsletter subscriber.","operationId":"create_subscriber_api_newsletter_newsletter_subscribers_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriberCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriberResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["newsletter","newsletter"],"summary":"List Subscribers","description":"List newsletter subscribers with filtering.","operationId":"list_subscribers_api_newsletter_newsletter_subscribers_get","parameters":[{"name":"subscribed","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Subscribed"}},{"name":"tags","in":"query","required":false,"schema":{"anyOf":[{"type":"array","items":{"type":"string"}},{"type":"null"}],"title":"Tags"}},{"name":"engagement_min","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Engagement Min"}},{"name":"engagement_max","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Engagement Max"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SubscriberResponse"},"title":"Response List Subscribers Api Newsletter Newsletter Subscribers Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/newsletter/newsletter/subscribers/{subscriber_id}":{"get":{"tags":["newsletter","newsletter"],"summary":"Get Subscriber","description":"Get subscriber details.","operationId":"get_subscriber_api_newsletter_newsletter_subscribers__subscriber_id__get","parameters":[{"name":"subscriber_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Subscriber Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriberResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["newsletter","newsletter"],"summary":"Update Subscriber","description":"Update subscriber information.","operationId":"update_subscriber_api_newsletter_newsletter_subscribers__subscriber_id__put","parameters":[{"name":"subscriber_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Subscriber Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriberUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriberResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["newsletter","newsletter"],"summary":"Unsubscribe Subscriber","description":"Unsubscribe a subscriber.","operationId":"unsubscribe_subscriber_api_newsletter_newsletter_subscribers__subscriber_id__delete","parameters":[{"name":"subscriber_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Subscriber Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/newsletter/newsletter/unsubscribe":{"get":{"tags":["newsletter","newsletter"],"summary":"Public Unsubscribe Email","description":"Public email unsubscribe endpoint for CAN-SPAM compliance.\n\nThis endpoint allows users to unsubscribe from marketing emails via a link\nwithout requiring authentication. The token parameter prevents abuse.\n\nCAN-SPAM Requirements Met:\n- One-click unsubscribe (no login required)\n- Immediate processing (unsubscribe within 10 business days)\n- Clear confirmation message\n- Secure token prevents unauthorized unsubscribes\n\nArgs:\n    email: Email address to unsubscribe (from email link)\n    token: HMAC token for verification (prevents abuse)\n    db: Database session\n\nReturns:\n    HTMLResponse with success/error message","operationId":"public_unsubscribe_email_api_newsletter_newsletter_unsubscribe_get","parameters":[{"name":"email","in":"query","required":true,"schema":{"type":"string","description":"Email address to unsubscribe","title":"Email"},"description":"Email address to unsubscribe"},{"name":"token","in":"query","required":true,"schema":{"type":"string","description":"Security token","title":"Token"},"description":"Security token"}],"responses":{"200":{"description":"Successful Response","content":{"text/html":{"schema":{"type":"string"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/newsletter/newsletter/campaigns":{"post":{"tags":["newsletter","newsletter"],"summary":"Create Campaign","description":"Create a new marketing campaign.","operationId":"create_campaign_api_newsletter_newsletter_campaigns_post","parameters":[{"name":"current_user","in":"query","required":false,"schema":{"type":"string","default":"system","title":"Current User"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["newsletter","newsletter"],"summary":"List Campaigns","description":"List marketing campaigns.","operationId":"list_campaigns_api_newsletter_newsletter_campaigns_get","parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/CampaignStatus"},{"type":"null"}],"title":"Status"}},{"name":"channel","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/CampaignChannel"},{"type":"null"}],"title":"Channel"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CampaignResponse"},"title":"Response List Campaigns Api Newsletter Newsletter Campaigns Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/newsletter/newsletter/campaigns/{campaign_id}":{"get":{"tags":["newsletter","newsletter"],"summary":"Get Campaign","description":"Get campaign details.","operationId":"get_campaign_api_newsletter_newsletter_campaigns__campaign_id__get","parameters":[{"name":"campaign_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Campaign Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["newsletter","newsletter"],"summary":"Update Campaign","description":"Update campaign information.","operationId":"update_campaign_api_newsletter_newsletter_campaigns__campaign_id__put","parameters":[{"name":"campaign_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Campaign Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/newsletter/newsletter/campaigns/{campaign_id}/send":{"post":{"tags":["newsletter","newsletter"],"summary":"Send Campaign","description":"Send campaign to subscribers.","operationId":"send_campaign_api_newsletter_newsletter_campaigns__campaign_id__send_post","parameters":[{"name":"campaign_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Campaign Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/newsletter/newsletter/campaigns/{campaign_id}/stats":{"get":{"tags":["newsletter","newsletter"],"summary":"Get Campaign Stats","description":"Get campaign performance statistics.","operationId":"get_campaign_stats_api_newsletter_newsletter_campaigns__campaign_id__stats_get","parameters":[{"name":"campaign_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Campaign Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignStatsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/newsletter/newsletter/campaigns/{campaign_id}/events":{"get":{"tags":["newsletter","newsletter"],"summary":"Get Campaign Events","description":"Get campaign events.","operationId":"get_campaign_events_api_newsletter_newsletter_campaigns__campaign_id__events_get","parameters":[{"name":"campaign_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Campaign Id"}},{"name":"event_type","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/CampaignEventType"},{"type":"null"}],"title":"Event Type"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"default":100,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CampaignEventResponse"},"title":"Response Get Campaign Events Api Newsletter Newsletter Campaigns  Campaign Id  Events Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/newsletter/newsletter/campaigns/ai-content":{"post":{"tags":["newsletter","newsletter"],"summary":"Generate Campaign Content","description":"Generate AI-powered campaign content.","operationId":"generate_campaign_content_api_newsletter_newsletter_campaigns_ai_content_post","parameters":[{"name":"campaign_type","in":"query","required":true,"schema":{"type":"string","title":"Campaign Type"}},{"name":"target_audience","in":"query","required":true,"schema":{"type":"string","title":"Target Audience"}}],"requestBody":{"content":{"application/json":{"schema":{"anyOf":[{"type":"object","additionalProperties":true},{"type":"null"}],"title":"Additional Context"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/newsletter/newsletter/segments/preview":{"get":{"tags":["newsletter","newsletter"],"summary":"Preview Segment","description":"Preview subscribers matching segment criteria.","operationId":"preview_segment_api_newsletter_newsletter_segments_preview_get","requestBody":{"content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Filter Criteria"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/newsletter/analytics/dashboard":{"get":{"tags":["newsletter-analytics","newsletter-analytics"],"summary":"Get Analytics Dashboard","description":"Get comprehensive analytics dashboard overview.\n\nReturns metrics for:\n- Overall unsubscribe rates\n- SMS-specific metrics (primary newsletter channel)\n- Email-specific metrics (admin/transactional only)\n- Daily trend data\n- Channel comparison\n- Compliance status\n\nArgs:\n    days: Number of days to analyze (1-365, default: 30)\n    db: Database session\n\nReturns:\n    Dictionary with comprehensive dashboard metrics","operationId":"get_analytics_dashboard_api_newsletter_analytics_dashboard_get","parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"description":"Number of days to look back","default":30,"title":"Days"},"description":"Number of days to look back"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/newsletter/analytics/campaigns/{campaign_id}":{"get":{"tags":["newsletter-analytics","newsletter-analytics"],"summary":"Get Campaign Analytics","description":"Get detailed analytics for a specific campaign.\n\nReturns metrics for:\n- Total sent/delivered/opened/clicked\n- Delivery, open, click, and unsubscribe rates\n- Campaign details (name, channel, status, sent date)\n\nArgs:\n    campaign_id: Campaign UUID\n    db: Database session\n\nReturns:\n    Dictionary with campaign performance metrics\n\nRaises:\n    HTTPException: 404 if campaign not found","operationId":"get_campaign_analytics_api_newsletter_analytics_campaigns__campaign_id__get","parameters":[{"name":"campaign_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Campaign Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/newsletter/analytics/subscribers/{subscriber_id}":{"get":{"tags":["newsletter-analytics","newsletter-analytics"],"summary":"Get Subscriber Analytics","description":"Get lifetime analytics for a specific subscriber.\n\nReturns metrics for:\n- Total campaigns received/opened/clicked\n- Engagement rate\n- Subscription status and consent preferences\n- Last interaction date\n\nArgs:\n    subscriber_id: Subscriber UUID\n    db: Database session\n\nReturns:\n    Dictionary with subscriber lifetime metrics\n\nRaises:\n    HTTPException: 404 if subscriber not found","operationId":"get_subscriber_analytics_api_newsletter_analytics_subscribers__subscriber_id__get","parameters":[{"name":"subscriber_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Subscriber Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/newsletter/analytics/trend":{"get":{"tags":["newsletter-analytics","newsletter-analytics"],"summary":"Get Unsubscribe Trend","description":"Get daily unsubscribe trend for the past N days.\n\nReturns daily metrics for:\n- Total sent per day\n- Total unsubscribed per day\n- Daily unsubscribe rate\n\nArgs:\n    days: Number of days to analyze (1-365, default: 30)\n    channel: Optional channel filter (EMAIL, SMS, BOTH)\n    db: Database session\n\nReturns:\n    List of daily unsubscribe metrics\n\nRaises:\n    HTTPException: 400 if invalid channel","operationId":"get_unsubscribe_trend_api_newsletter_analytics_trend_get","parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","maximum":365,"minimum":1,"description":"Number of days to look back","default":30,"title":"Days"},"description":"Number of days to look back"},{"name":"channel","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by channel: EMAIL, SMS, or BOTH","title":"Channel"},"description":"Filter by channel: EMAIL, SMS, or BOTH"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/newsletter/analytics/compliance":{"get":{"tags":["newsletter-analytics","newsletter-analytics"],"summary":"Get Compliance Report","description":"Get comprehensive compliance report.\n\nReturns compliance metrics for:\n- SMS/TCPA compliance (STOP instructions, unsubscribe rate)\n- Email/CAN-SPAM compliance (List-Unsubscribe headers, unsubscribe rate)\n- Overall health status\n- Actionable recommendations\n\nArgs:\n    start_date: Start of date range (default: 30 days ago)\n    end_date: End of date range (default: now)\n    db: Database session\n\nReturns:\n    Dictionary with compliance metrics and recommendations","operationId":"get_compliance_report_api_newsletter_analytics_compliance_get","parameters":[{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Start date (ISO format)","title":"Start Date"},"description":"Start date (ISO format)"},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"End date (ISO format)","title":"End Date"},"description":"End date (ISO format)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/ringcentral/webhooks/ringcentral/sms":{"post":{"tags":["sms","webhooks","sms"],"summary":"Handle Sms Webhook","description":"Handle RingCentral SMS webhook notifications.","operationId":"handle_sms_webhook_api_ringcentral_webhooks_ringcentral_sms_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/ringcentral/webhooks/ringcentral/verification":{"post":{"tags":["sms","webhooks","sms"],"summary":"Handle Verification Webhook","description":"Handle RingCentral webhook verification.","operationId":"handle_verification_webhook_api_ringcentral_webhooks_ringcentral_verification_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/ringcentral/webhooks/ringcentral/sync-messages":{"post":{"tags":["sms","webhooks","sms"],"summary":"Sync Recent Messages","description":"Manually sync recent SMS messages from RingCentral.","operationId":"sync_recent_messages_api_ringcentral_webhooks_ringcentral_sync_messages_post","parameters":[{"name":"hours_back","in":"query","required":false,"schema":{"type":"integer","default":24,"title":"Hours Back"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/ringcentral/webhooks/ringcentral/send-sms":{"post":{"tags":["sms","webhooks","sms"],"summary":"Send Sms Message","description":"Send SMS message via RingCentral.","operationId":"send_sms_message_api_ringcentral_webhooks_ringcentral_send_sms_post","parameters":[{"name":"to_number","in":"query","required":true,"schema":{"type":"string","title":"To Number"}},{"name":"message","in":"query","required":true,"schema":{"type":"string","title":"Message"}},{"name":"lead_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Lead Id"}},{"name":"from_number","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"From Number"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/customer/{customer_id}":{"get":{"tags":["conversations","conversations"],"summary":"Get Customer Conversations","description":"Get conversation history for a specific customer.\n\nReturns all call recordings with transcripts, sorted by most recent.\nIncludes AI insights, sentiment analysis, and topics.\n\n**Permissions**: Admin only\n\n**Response**:\n- `customer_id`: Customer UUID\n- `customer_name`: Full name\n- `customer_phone`: Phone number\n- `customer_email`: Email address\n- `total_conversations`: Total count (for pagination)\n- `conversations`: List of conversation objects with:\n  - `id`: Recording UUID\n  - `call_started_at`: ISO timestamp\n  - `duration_seconds`: Call duration\n  - `call_direction`: \"inbound\" or \"outbound\"\n  - `transcript_excerpt`: First 200 chars\n  - `transcript_full_length`: Total length\n  - `transcript_confidence`: 0-100 confidence score\n  - `ai_insights`: Sentiment, topics, intent, action items\n- `pagination`: Limit, offset, has_more flag\n\n**Example**:\n```\nGET /api/v1/conversations/customer/123e4567-e89b-12d3-a456-426614174000?limit=10\n```","operationId":"get_customer_conversations_api_v1_conversations_customer__customer_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"customer_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Customer Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Number of conversations to return","default":20,"title":"Limit"},"description":"Number of conversations to return"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Pagination offset","default":0,"title":"Offset"},"description":"Pagination offset"},{"name":"include_no_transcript","in":"query","required":false,"schema":{"type":"boolean","description":"Include calls without transcripts","default":false,"title":"Include No Transcript"},"description":"Include calls without transcripts"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/booking/{booking_id}":{"get":{"tags":["conversations","conversations"],"summary":"Get Booking Conversations","description":"Get all conversations related to a specific booking.\n\nGroups conversations by timeline:\n- **Pre-booking**: Calls before booking date\n- **Day-of**: Calls on booking date\n- **Post-booking**: Calls after booking date\n\nUseful for understanding customer communication patterns and\nidentifying common questions or concerns at each stage.\n\n**Permissions**: Admin only\n\n**Response**:\n- `booking_id`: Booking UUID\n- `booking_datetime`: ISO timestamp\n- `booking_status`: Current status\n- `party_size`: Number of guests\n- `customer_id`: Customer UUID\n- `total_conversations`: Total call count\n- `conversations`: Grouped by timeline:\n  - `pre_booking`: List of conversations before booking\n  - `day_of`: List of conversations on booking day\n  - `post_booking`: List of conversations after booking\n- `key_insights`:\n  - `common_topics`: Most discussed topics\n  - `sentiment_summary`: Sentiment distribution\n\n**Example**:\n```\nGET /api/v1/conversations/booking/123e4567-e89b-12d3-a456-426614174000\n```","operationId":"get_booking_conversations_api_v1_conversations_booking__booking_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"booking_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Booking Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/customer/{customer_id}/ai-context":{"get":{"tags":["conversations","conversations"],"summary":"Get Customer Ai Context","description":"Get AI-formatted conversation context for a customer.\n\nReturns a concise text summary of recent interactions that AI agents\ncan inject into their prompts for personalized service.\n\n**Permissions**: Admin only\n\n**Response**:\n- `customer_id`: Customer UUID\n- `context`: Formatted context string\n\n**Context Format**:\n```\nCustomer: John Smith (555-0123)\nRecent interactions (last 5 calls):\n- 2024-11-15 10:27: Asked about vegetarian options. Positive sentiment.\n- 2024-11-10 14:20: Booking confirmation. Positive sentiment.\n\nKey topics discussed: catering, dietary requirements, parking\nActive booking: 2024-11-15, 30 guests, confirmed\n```\n\n**Usage**:\nAI agents should prepend this context to their system prompts when\nhandling calls or messages from this customer.\n\n**Example**:\n```\nGET /api/v1/conversations/customer/123e4567-e89b-12d3-a456-426614174000/ai-context\n```","operationId":"get_customer_ai_context_api_v1_conversations_customer__customer_id__ai_context_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"customer_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Customer Id"}},{"name":"max_conversations","in":"query","required":false,"schema":{"type":"integer","maximum":10,"minimum":1,"description":"Maximum conversations to include","default":5,"title":"Max Conversations"},"description":"Maximum conversations to include"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/search":{"get":{"tags":["conversations","conversations"],"summary":"Search Transcripts","description":"Search across all call transcripts.\n\nPerforms full-text search on transcript content with optional filters.\nReturns matching conversations with surrounding context highlighted.\n\n**Permissions**: Admin only\n\n**Query Parameters**:\n- `q`: Search query (minimum 3 characters) - **Required**\n- `customer_id`: Filter by specific customer (optional)\n- `booking_id`: Filter by specific booking (optional)\n- `date_from`: Filter calls after date (ISO 8601 format) (optional)\n- `date_to`: Filter calls before date (ISO 8601 format) (optional)\n- `sentiment`: Filter by sentiment: positive, neutral, negative (optional)\n- `limit`: Results per page (1-100, default 50)\n- `offset`: Pagination offset (default 0)\n\n**Response**:\n- `query`: Original search query\n- `total_results`: Total matching conversations\n- `results`: List of conversation objects with:\n  - All standard conversation fields\n  - `search_context`: Text excerpt showing query in context (Â±100 chars)\n- `pagination`: Limit, offset, has_more flag\n\n**Examples**:\n```\n# Search for \"vegetarian\"\nGET /api/v1/conversations/search?q=vegetarian\n\n# Search with filters\nGET /api/v1/conversations/search?q=party&sentiment=positive&date_from=2024-11-01\n\n# Search for specific customer\nGET /api/v1/conversations/search?q=refund&customer_id=123e4567-e89b-12d3-a456-426614174000\n```\n\n**Use Cases**:\n- Find all calls mentioning specific topics (\"allergy\", \"refund\", \"parking\")\n- Identify sentiment patterns (\"complaint\", \"thank you\")\n- Audit customer interactions\n- Train AI models on conversation patterns","operationId":"search_transcripts_api_v1_conversations_search_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"q","in":"query","required":true,"schema":{"type":"string","minLength":3,"description":"Search query","title":"Q"},"description":"Search query"},{"name":"customer_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"description":"Filter by customer","title":"Customer Id"},"description":"Filter by customer"},{"name":"booking_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"description":"Filter by booking","title":"Booking Id"},"description":"Filter by booking"},{"name":"date_from","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Start date (ISO format)","title":"Date From"},"description":"Start date (ISO format)"},{"name":"date_to","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"End date (ISO format)","title":"Date To"},"description":"End date (ISO format)"},{"name":"sentiment","in":"query","required":false,"schema":{"anyOf":[{"type":"string","pattern":"^(positive|neutral|negative)$"},{"type":"null"}],"description":"Filter by sentiment","title":"Sentiment"},"description":"Filter by sentiment"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Number of results","default":50,"title":"Limit"},"description":"Number of results"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Pagination offset","default":0,"title":"Offset"},"description":"Pagination offset"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/conversations/stats/sentiment-overview":{"get":{"tags":["conversations","conversations"],"summary":"Get Sentiment Overview","description":"Get sentiment distribution across conversations.\n\nProvides aggregate statistics about sentiment in call transcripts.\nUseful for monitoring customer satisfaction trends.\n\n**Permissions**: Admin only\n\n**Query Parameters**:\n- `date_from`: Start date for analysis (optional)\n- `date_to`: End date for analysis (optional)\n- `customer_id`: Analyze specific customer only (optional)\n\n**Response**:\n- `total_conversations`: Total analyzed\n- `sentiment_distribution`:\n  - `positive`: Count and percentage\n  - `neutral`: Count and percentage\n  - `negative`: Count and percentage\n  - `unknown`: Count and percentage\n- `filters`: Applied filters\n\n**Example**:\n```\nGET /api/v1/conversations/stats/sentiment-overview?date_from=2024-11-01&date_to=2024-11-30\n```","operationId":"get_sentiment_overview_api_v1_conversations_stats_sentiment_overview_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"date_from","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Start date","title":"Date From"},"description":"Start date"},{"name":"date_to","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"End date","title":"Date To"},"description":"End date"},{"name":"customer_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"description":"Filter by customer","title":"Customer Id"},"description":"Filter by customer"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/referrals/":{"post":{"tags":["referrals","referrals"],"summary":"Create Referral","description":"Create a new referral.\n\nReturns the referral code and details.","operationId":"create_referral_api_v1_referrals__post","parameters":[{"name":"notification_service","in":"query","required":false,"schema":{"anyOf":[{},{"type":"null"}],"title":"Notification Service"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateReferralRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/referrals/conversions":{"post":{"tags":["referrals","referrals"],"summary":"Track Conversion","description":"Track a referral conversion.\n\nCalled when a referred customer completes a qualifying action.","operationId":"track_conversion_api_v1_referrals_conversions_post","parameters":[{"name":"notification_service","in":"query","required":false,"schema":{"anyOf":[{},{"type":"null"}],"title":"Notification Service"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TrackConversionRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/referrals/{referrer_id}/stats":{"get":{"tags":["referrals","referrals"],"summary":"Get Referral Stats","description":"Get referral statistics for a referrer.\n\nReturns total referrals, conversions, and earnings.","operationId":"get_referral_stats_api_v1_referrals__referrer_id__stats_get","parameters":[{"name":"referrer_id","in":"path","required":true,"schema":{"type":"integer","title":"Referrer Id"}},{"name":"notification_service","in":"query","required":false,"schema":{"anyOf":[{},{"type":"null"}],"title":"Notification Service"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/referrals/credits":{"post":{"tags":["referrals","referrals"],"summary":"Award Credit","description":"Award referral credit to a referrer.\n\nUsed for manual credit adjustments or special rewards.","operationId":"award_credit_api_v1_referrals_credits_post","parameters":[{"name":"notification_service","in":"query","required":false,"schema":{"anyOf":[{},{"type":"null"}],"title":"Notification Service"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AwardCreditRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/referrals/health":{"get":{"tags":["referrals","referrals"],"summary":"Health Check","description":"Health check endpoint.","operationId":"health_check_api_v1_referrals_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/campaigns/enroll":{"post":{"tags":["campaigns","campaigns"],"summary":"Enroll Lead","description":"Enroll a lead in a nurture campaign.\n\nStarts automated message sequence based on campaign type.","operationId":"enroll_lead_api_v1_campaigns_enroll_post","parameters":[{"name":"notification_service","in":"query","required":false,"schema":{"anyOf":[{},{"type":"null"}],"title":"Notification Service"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EnrollLeadRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/campaigns/send-message":{"post":{"tags":["campaigns","campaigns"],"summary":"Send Next Message","description":"Send the next scheduled message in a campaign.\n\nCalled by scheduled job to process pending messages.","operationId":"send_next_message_api_v1_campaigns_send_message_post","parameters":[{"name":"notification_service","in":"query","required":false,"schema":{"anyOf":[{},{"type":"null"}],"title":"Notification Service"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__campaigns__SendMessageRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/campaigns/response":{"post":{"tags":["campaigns","campaigns"],"summary":"Handle Response","description":"Handle lead response to campaign message.\n\nTracks engagement and adjusts campaign flow accordingly.","operationId":"handle_response_api_v1_campaigns_response_post","parameters":[{"name":"notification_service","in":"query","required":false,"schema":{"anyOf":[{},{"type":"null"}],"title":"Notification Service"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HandleResponseRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/campaigns/stats":{"get":{"tags":["campaigns","campaigns"],"summary":"Get Campaign Stats","description":"Get campaign performance statistics.\n\nReturns metrics like open rate, click rate, and conversion rate.","operationId":"get_campaign_stats_api_v1_campaigns_stats_get","parameters":[{"name":"campaign_type","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/CampaignType"},{"type":"null"}],"title":"Campaign Type"}},{"name":"notification_service","in":"query","required":false,"schema":{"anyOf":[{},{"type":"null"}],"title":"Notification Service"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/campaigns/types":{"get":{"tags":["campaigns","campaigns"],"summary":"List Campaign Types","description":"List available campaign types.\n\nReturns all supported campaign types with descriptions.","operationId":"list_campaign_types_api_v1_campaigns_types_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/campaigns/health":{"get":{"tags":["campaigns","campaigns"],"summary":"Health Check","description":"Health check endpoint.","operationId":"health_check_api_v1_campaigns_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/ws/stats":{"get":{"tags":["ai-websocket"],"summary":"Get Websocket Stats","description":"Get WebSocket connection statistics","operationId":"get_websocket_stats_api_v1_ws_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/ws/broadcast/{conversation_id}":{"post":{"tags":["ai-websocket"],"summary":"Broadcast Message","description":"Broadcast a message to all connections in a conversation\n(Admin endpoint for testing)","operationId":"broadcast_message_api_v1_ws_broadcast__conversation_id__post","parameters":[{"name":"conversation_id","in":"path","required":true,"schema":{"type":"string","title":"Conversation Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Message"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/nlp/health":{"get":{"tags":["nlp-monitoring","nlp-monitoring"],"summary":"Nlp Health Check","description":"Health check endpoint for NLP service\n\nReturns comprehensive health status including:\n- Model availability\n- Performance metrics\n- Error rates\n- System status","operationId":"nlp_health_check_api_v1_ai_nlp_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Nlp Health Check Api V1 Ai Nlp Health Get"}}}}}}},"/api/v1/ai/nlp/metrics":{"get":{"tags":["nlp-monitoring","nlp-monitoring"],"summary":"Nlp Metrics","description":"Get performance metrics for NLP operations\n\nQuery Parameters:\n- method: Optional - specific method to get metrics for\n          (extract_entities, detect_tone_enhanced, etc.)\n\nReturns detailed performance metrics including:\n- Call counts\n- Average/min/max execution times\n- Error rates\n- Per-method breakdown","operationId":"nlp_metrics_api_v1_ai_nlp_metrics_get","parameters":[{"name":"method","in":"query","required":false,"schema":{"type":"string","title":"Method"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Nlp Metrics Api V1 Ai Nlp Metrics Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/nlp/metrics/reset":{"post":{"tags":["nlp-monitoring","nlp-monitoring"],"summary":"Reset Nlp Metrics","description":"Reset all performance metrics\n\nUse this endpoint to clear metrics and start fresh tracking.\nUseful for testing or after system maintenance.","operationId":"reset_nlp_metrics_api_v1_ai_nlp_metrics_reset_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Reset Nlp Metrics Api V1 Ai Nlp Metrics Reset Post"}}}}}}},"/api/v1/ai/nlp/status":{"get":{"tags":["nlp-monitoring","nlp-monitoring"],"summary":"Nlp Status","description":"Get detailed status information about NLP service\n\nReturns:\n- Initialization status\n- Model availability (spaCy, sentence-transformers)\n- Supported features\n- Version information","operationId":"nlp_status_api_v1_ai_nlp_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Nlp Status Api V1 Ai Nlp Status Get"}}}}}}},"/api/v1/ai/nlp/test":{"get":{"tags":["nlp-monitoring","nlp-monitoring"],"summary":"Nlp Test","description":"Quick test endpoint to verify NLP functionality\n\nRuns a simple test on all major NLP features and returns results.\nUseful for smoke testing after deployment.","operationId":"nlp_test_api_v1_ai_nlp_test_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Nlp Test Api V1 Ai Nlp Test Get"}}}}}}},"/api/v1/escalations/escalations/create":{"post":{"tags":["escalations","escalations"],"summary":"Create Escalation","description":"Create a new customer support escalation\n\nThis endpoint:\n1. Creates an escalation record\n2. Pauses the AI conversation\n3. Enqueues job to notify on-call admin via SMS\n4. Returns escalation details\n\n**Permissions:** Public (called from customer chat widget)\n**Rate limit:** 5 per minute per conversation","operationId":"create_escalation_api_v1_escalations_escalations_create_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EscalationCreateRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EscalationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/escalations/escalations/{escalation_id}":{"get":{"tags":["escalations","escalations"],"summary":"Get Escalation","description":"Get escalation by ID\n\n**Permissions:** escalation:read","operationId":"get_escalation_api_v1_escalations_escalations__escalation_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"escalation_id","in":"path","required":true,"schema":{"type":"string","title":"Escalation Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EscalationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/escalations/escalations/{escalation_id}/assign":{"post":{"tags":["escalations","escalations"],"summary":"Assign Escalation","description":"Assign escalation to an admin\n\n**Permissions:** inbox:assign","operationId":"assign_escalation_api_v1_escalations_escalations__escalation_id__assign_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"escalation_id","in":"path","required":true,"schema":{"type":"string","title":"Escalation Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EscalationAssignRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EscalationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/escalations/escalations/{escalation_id}/resolve":{"post":{"tags":["escalations","escalations"],"summary":"Resolve Escalation","description":"Resolve an escalation\n\n**Permissions:** escalation:resolve","operationId":"resolve_escalation_api_v1_escalations_escalations__escalation_id__resolve_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"escalation_id","in":"path","required":true,"schema":{"type":"string","title":"Escalation Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EscalationResolveRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EscalationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/escalations/escalations/list":{"post":{"tags":["escalations","escalations"],"summary":"List Escalations","description":"List escalations with filters\n\n**Permissions:** escalation:read","operationId":"list_escalations_api_v1_escalations_escalations_list_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EscalationListRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EscalationListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/escalations/escalations/stats":{"get":{"tags":["escalations","escalations"],"summary":"Get Escalation Stats","description":"Get escalation statistics\n\n**Permissions:** analytics:view","operationId":"get_escalation_stats_api_v1_escalations_escalations_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EscalationStatsResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/escalations/escalations/{escalation_id}/sms":{"post":{"tags":["escalations","escalations"],"summary":"Send Sms To Customer","description":"Send SMS to customer via escalation\n\n**Permissions:** sms:send","operationId":"send_sms_to_customer_api_v1_escalations_escalations__escalation_id__sms_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"escalation_id","in":"path","required":true,"schema":{"type":"string","title":"Escalation Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendSMSRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SMSResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/escalations/escalations/{escalation_id}/call":{"post":{"tags":["escalations","escalations"],"summary":"Initiate Call","description":"Initiate call to customer via RingCentral\n\n**Permissions:** phone:call","operationId":"initiate_call_api_v1_escalations_escalations__escalation_id__call_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"escalation_id","in":"path","required":true,"schema":{"type":"string","title":"Escalation Id"}}],"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/escalations/escalations/{escalation_id}/recordings":{"get":{"tags":["escalations","escalations"],"summary":"Get Call Recordings","description":"Get call recordings for an escalation\n\n**Permissions:** escalation:read","operationId":"get_call_recordings_api_v1_escalations_escalations__escalation_id__recordings_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"escalation_id","in":"path","required":true,"schema":{"type":"string","title":"Escalation Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/webhooks/meta":{"get":{"tags":["webhooks","meta","whatsapp","webhooks","social"],"summary":"Verify Webhook","description":"Verify Meta webhook during setup.\n\nMeta sends a GET request with these parameters during webhook registration.\nWe must return the challenge value if the verify token matches.\n\nIMPORTANT: Meta sends verification to the SAME URL as webhook posts.\nThis must be at the root of the router prefix (e.g., /api/v1/webhooks/meta)\n\nArgs:\n    hub_mode: Should be 'subscribe'\n    hub_verify_token: Token to verify against our configured token\n    hub_challenge: Challenge string to echo back\n\nReturns:\n    Challenge as plain text (Meta expects this format)\n\nRaises:\n    HTTPException: If verification fails","operationId":"verify_webhook_api_v1_webhooks_meta_get","parameters":[{"name":"hub.mode","in":"query","required":true,"schema":{"type":"string","title":"Hub.Mode"}},{"name":"hub.verify_token","in":"query","required":true,"schema":{"type":"string","title":"Hub.Verify Token"}},{"name":"hub.challenge","in":"query","required":true,"schema":{"type":"string","title":"Hub.Challenge"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["webhooks","meta","whatsapp","webhooks","social"],"summary":"Meta Webhook","description":"Handle Meta (Facebook/Instagram) webhooks.\n\nProcesses:\n- Instagram direct messages\n- Facebook Messenger messages\n- Lead generation ad submissions\n- Page messaging events\n\nAll business logic is in MetaWebhookHandler for testability.\n\nArgs:\n    request: FastAPI request object (for raw body)\n    background_tasks: FastAPI background tasks (for async processing)\n    webhook_handler: Injected MetaWebhookHandler\n    x_hub_signature_256: Meta webhook signature header\n\nReturns:\n    Processing result from webhook handler\n\nRaises:\n    HTTPException: If signature is invalid or processing fails","operationId":"meta_webhook_api_v1_webhooks_meta_post","parameters":[{"name":"x-hub-signature-256","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Hub-Signature-256"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/webhooks/meta/health":{"get":{"tags":["webhooks","meta","whatsapp","webhooks","social"],"summary":"Webhook Health","description":"Health check endpoint for Meta webhooks.\n\nReturns:\n    Simple status dict","operationId":"webhook_health_api_v1_webhooks_meta_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/webhooks/meta/test/receive":{"post":{"tags":["webhooks","meta","whatsapp","webhooks","social"],"summary":"Test Receive Webhook","description":"Test endpoint that bypasses signature verification.\n\nUSE ONLY FOR DEBUGGING. Does not verify Meta signature.\n\nReturns:\n    Webhook processing result","operationId":"test_receive_webhook_api_v1_webhooks_meta_test_receive_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/webhooks/ringcentral/":{"post":{"tags":["webhooks","webhooks"],"summary":"Ringcentral Webhook Handler","description":"RingCentral webhook receiver endpoint\n\nHandles:\n- Webhook validation (returns validation token)\n- recording.created events â†’ triggers fetch_call_recording task\n- sms.received events â†’ updates conversation/escalation\n- call.started/ended events â†’ updates escalation status\n\nSecurity:\n- Verifies webhook signature using HMAC-SHA256\n- Rate limited to prevent abuse\n\nReference: https://developers.ringcentral.com/guide/notifications/webhooks","operationId":"ringcentral_webhook_handler_api_v1_webhooks_ringcentral__post","parameters":[{"name":"Validation-Token","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Validation-Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/webhooks/voice/inbound":{"post":{"tags":["voice-ai","webhooks"],"summary":"Handle Inbound Call Webhook","description":"Handle inbound voice call webhook from RingCentral.\n\nCalled when:\n- New inbound call arrives\n- Call needs to be answered/routed\n\nReturns instructions for RingCentral on how to handle the call.\n\nNEW: Initiates real-time WebSocket connection for bidirectional audio streaming.","operationId":"handle_inbound_call_webhook_api_v1_webhooks_voice_inbound_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/webhooks/voice/status":{"post":{"tags":["voice-ai","webhooks"],"summary":"Handle Call Status Webhook","description":"Handle call status update webhooks from RingCentral.\n\nEvents:\n- call.answered\n- call.recording.started\n- call.recording.stopped\n- call.hold\n- call.unhold\n- call.transfer\n- call.hangup","operationId":"handle_call_status_webhook_api_v1_webhooks_voice_status_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/webhooks/voice/recording-complete":{"post":{"tags":["voice-ai","webhooks"],"summary":"Handle Recording Complete Webhook","description":"Handle call recording completion webhook.\n\nCalled when:\n- Call recording is complete and ready for download\n- Recording has been processed and stored","operationId":"handle_recording_complete_webhook_api_v1_webhooks_voice_recording_complete_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/webhooks/voice/transcription":{"post":{"tags":["voice-ai","webhooks"],"summary":"Handle Transcription Webhook","description":"Handle real-time transcription webhook from RingCentral.\n\nReceives:\n- Partial transcripts (interim results)\n- Final transcripts (complete utterances)\n\nUsed for:\n- Real-time AI response generation\n- Live call monitoring\n- Conversation logging","operationId":"handle_transcription_webhook_api_v1_webhooks_voice_transcription_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/webhooks/voice/calls/stats":{"get":{"tags":["voice-ai","webhooks"],"summary":"Get Call Statistics","description":"Get voice call statistics.\n\nQuery params:\n- start_date: ISO format start date\n- end_date: ISO format end date\n\nReturns:\n- Total calls\n- Answer rate\n- Average duration\n- AI success rate\n- Transfer rate","operationId":"get_call_statistics_api_v1_webhooks_voice_calls_stats_get","parameters":[{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Start Date"}},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"End Date"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/webhooks/voice/test":{"post":{"tags":["voice-ai","webhooks"],"summary":"Test Voice Ai","description":"Test voice AI system.\n\nArgs:\n- text: Text to convert to speech\n- voice_model: Optional Deepgram Aura voice model\n\nReturns audio file.","operationId":"test_voice_ai_api_v1_webhooks_voice_test_post","parameters":[{"name":"text","in":"query","required":true,"schema":{"type":"string","title":"Text"}},{"name":"voice_model","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Voice Model"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/webhooks/voice/health":{"get":{"tags":["voice-ai","webhooks"],"summary":"Voice Ai Health Check","description":"Check voice AI system health.\n\nReturns:\n- Deepgram STT status\n- Deepgram TTS status\n- Configuration","operationId":"voice_ai_health_check_api_v1_webhooks_voice_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/recordings/{recording_id}":{"get":{"tags":["recordings","voice-ai","recordings"],"summary":"Get Recording","description":"Get call recording metadata and transcript.\n\nReturns:\n    - Recording metadata (duration, timestamps, status)\n    - RingCentral AI transcript (if available)\n    - AI insights (sentiment, topics, action items)","operationId":"get_recording_api_v1_recordings__recording_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"recording_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Recording Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/recordings/{recording_id}/stream":{"get":{"tags":["recordings","voice-ai","recordings"],"summary":"Stream Recording","description":"Get streaming URL for call recording audio.\n\nReturns redirect to RingCentral's CDN with time-limited auth token.\nNo download needed - stream directly from RingCentral.","operationId":"stream_recording_api_v1_recordings__recording_id__stream_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"recording_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Recording Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/recordings/":{"get":{"tags":["recordings","voice-ai","recordings"],"summary":"Search Recordings","description":"Search call recordings with filters.\n\nSupports filtering by:\n- Phone number\n- Date range\n- Transcript content (full-text search)\n- Transcript availability\n- Recording status","operationId":"search_recordings_api_v1_recordings__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"phone_number","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by phone number","title":"Phone Number"},"description":"Filter by phone number"},{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"Start date (ISO 8601)","title":"Start Date"},"description":"Start date (ISO 8601)"},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"description":"End date (ISO 8601)","title":"End Date"},"description":"End date (ISO 8601)"},{"name":"search_text","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Search in transcript","title":"Search Text"},"description":"Search in transcript"},{"name":"has_transcript","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"description":"Filter by transcript availability","title":"Has Transcript"},"description":"Filter by transcript availability"},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/RecordingStatus"},{"type":"null"}],"description":"Filter by status","title":"Status"},"description":"Filter by status"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"description":"Max results","default":50,"title":"Limit"},"description":"Max results"},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Pagination offset","default":0,"title":"Offset"},"description":"Pagination offset"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ws/escalations/stats":{"get":{"tags":["websocket","websocket","escalations"],"summary":"Get Websocket Stats","description":"Get WebSocket connection statistics.\n\nReturns connection counts and active admins.\nUseful for monitoring and debugging.","operationId":"get_websocket_stats_api_v1_ws_escalations_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/ws/compliance-updates/stats":{"get":{"tags":["websocket","websocket","compliance"],"summary":"Get Websocket Stats","description":"Get WebSocket connection statistics.\n\nReturns connection counts and active admins.\nUseful for monitoring and debugging.","operationId":"get_websocket_stats_ws_compliance_updates_stats_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/inbox/messages":{"post":{"tags":["unified-inbox","Unified Inbox"],"summary":"Send Message","description":"Send a message through unified inbox system","operationId":"send_message_api_v1_inbox_messages_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/api__v1__inbox__schemas__SendMessageRequest"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api__v1__inbox__schemas__MessageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["unified-inbox","Unified Inbox"],"summary":"Get Messages","description":"Get messages with filtering and pagination","operationId":"get_messages_api_v1_inbox_messages_get","parameters":[{"name":"channel","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/api__v1__inbox__models__MessageChannel"},{"type":"null"}],"title":"Channel"}},{"name":"contact_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Contact Id"}},{"name":"thread_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Thread Id"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/api__v1__inbox__models__MessageStatus"},{"type":"null"}],"title":"Status"}},{"name":"phone_number","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone Number"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/api__v1__inbox__schemas__MessageResponse"},"title":"Response Get Messages Api V1 Inbox Messages Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/inbox/messages/{message_id}":{"get":{"tags":["unified-inbox","Unified Inbox"],"summary":"Get Message","description":"Get specific message by ID","operationId":"get_message_api_v1_inbox_messages__message_id__get","parameters":[{"name":"message_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Message Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api__v1__inbox__schemas__MessageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/inbox/messages/{message_id}/status":{"patch":{"tags":["unified-inbox","Unified Inbox"],"summary":"Update Message Status","description":"Update message status (read, replied, etc.)","operationId":"update_message_status_api_v1_inbox_messages__message_id__status_patch","parameters":[{"name":"message_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Message Id"}},{"name":"new_status","in":"query","required":true,"schema":{"$ref":"#/components/schemas/api__v1__inbox__models__MessageStatus"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/inbox/tcpa/{phone_number}":{"get":{"tags":["unified-inbox","Unified Inbox"],"summary":"Get Tcpa Status","description":"Get TCPA opt status for phone number","operationId":"get_tcpa_status_api_v1_inbox_tcpa__phone_number__get","parameters":[{"name":"phone_number","in":"path","required":true,"schema":{"type":"string","title":"Phone Number"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TCPAStatusResponse"},"title":"Response Get Tcpa Status Api V1 Inbox Tcpa  Phone Number  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/inbox/tcpa":{"post":{"tags":["unified-inbox","Unified Inbox"],"summary":"Update Tcpa Status","description":"Update TCPA opt status","operationId":"update_tcpa_status_api_v1_inbox_tcpa_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TCPAUpdateRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TCPAStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/inbox/messages/bulk":{"post":{"tags":["unified-inbox","Unified Inbox"],"summary":"Send Bulk Messages","description":"Send multiple messages in batch","operationId":"send_bulk_messages_api_v1_inbox_messages_bulk_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkMessageRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkMessageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/inbox/health":{"get":{"tags":["unified-inbox","Unified Inbox"],"summary":"Inbox Health Check","description":"Health check for unified inbox system","operationId":"inbox_health_check_api_v1_inbox_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/health/readiness":{"get":{"tags":["Health Checks"],"summary":"Readiness Probe","description":"Kubernetes Readiness Probe\n\nChecks if the service is ready to accept traffic.\nReturns 200 if ready, 503 if not ready.\n\nCritical checks:\n- Database connectivity (MUST be healthy)\n- Redis connectivity (degraded OK, uses memory fallback)\n- Stripe configuration (degraded OK for non-payment endpoints)\n\nUse in k8s:\n```yaml\nreadinessProbe:\n  httpGet:\n    path: /api/v1/health/readiness\n    port: 8000\n  initialDelaySeconds: 10\n  periodSeconds: 10\n  timeoutSeconds: 5\n  failureThreshold: 3\n```","operationId":"readiness_probe_api_v1_health_readiness_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/api__v1__endpoints__health__ReadinessResponse"}}}}}}},"/api/v1/health/liveness":{"get":{"tags":["Health Checks"],"summary":"Liveness Probe","description":"Kubernetes Liveness Probe\n\nSimple check to verify the process is alive and responsive.\nShould ALWAYS return 200 unless the process is completely hung.\n\nUse in k8s:\n```yaml\nlivenessProbe:\n  httpGet:\n    path: /api/v1/health/liveness\n    port: 8000\n  initialDelaySeconds: 30\n  periodSeconds: 30\n  timeoutSeconds: 5\n  failureThreshold: 3\n```","operationId":"liveness_probe_api_v1_health_liveness_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LivenessResponse"}}}}}}},"/api/v1/health/detailed":{"get":{"tags":["Health Checks"],"summary":"Detailed Health Check","description":"Detailed Health Check with Comprehensive Metrics\n\nProvides:\n- All service health checks\n- System performance metrics\n- Configuration status\n- Detailed timing information\n\nUse for:\n- Monitoring dashboards\n- Debugging\n- Performance analysis\n- NOT for k8s probes (too heavy)","operationId":"detailed_health_check_api_v1_health_detailed_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DetailedHealthResponse"}}}}}}},"/api/v1/health/":{"get":{"tags":["Health Checks"],"summary":"Basic Health Check","description":"Basic Health Check (Backward Compatibility)\n\nSimple alive check for basic monitoring.\nUse /readiness or /liveness for k8s probes.","operationId":"basic_health_check_api_v1_health__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/health/health/live":{"get":{"tags":["Health Monitoring","Health"],"summary":"Liveness Probe","description":"Liveness probe - Kubernetes uses this to know if the app is running\n\nReturns 200 if the application process is running\nThis should be lightweight and fast","operationId":"liveness_probe_api_health_health_live_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Liveness Probe Api Health Health Live Get"}}}}}}},"/api/health/health/ready":{"get":{"tags":["Health Monitoring","Health"],"summary":"Readiness Probe","description":"Readiness probe - Kubernetes uses this to know if the app can serve traffic\n\nChecks all critical dependencies:\n- Database connection\n- Redis cache\n- External services (Meta WhatsApp, Stripe, Email)\n\nReturns 200 if all critical services are healthy\nReturns 503 if any critical service is unhealthy","operationId":"readiness_probe_api_health_health_ready_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__health_checks__HealthResponse"}}}}}}},"/api/health/health/":{"get":{"tags":["Health Monitoring","Health"],"summary":"Health Check","description":"Comprehensive health check endpoint\n\nSame as /ready but more detailed","operationId":"health_check_api_health_health__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/routers__v1__health_checks__HealthResponse"}}}}}}},"/api/health/health/startup":{"get":{"tags":["Health Monitoring","Health"],"summary":"Startup Probe","description":"Startup probe - Kubernetes uses this during container startup\n\nReturns 200 only when the application is fully initialized\nThis can be slower than liveness/readiness probes","operationId":"startup_probe_api_health_health_startup_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Startup Probe Api Health Health Startup Get"}}}}}}},"/api/v1/payments/email-notifications/process":{"post":{"tags":["Payment Email Notifications","Payment Email Notifications"],"summary":"Process Payment Emails","description":"Process unread payment notification emails\n\n**Admin only** - Checks Gmail inbox for payment notifications from Stripe, Venmo, Zelle, BofA.\nAutomatically matches notifications to pending payments and confirms them.\n\n**Processing steps:**\n1. Fetch unread emails from payment providers\n2. Parse payment details (amount, transaction ID, etc.)\n3. Match to pending payments in database\n4. Auto-confirm matched payments (if enabled)\n5. Send confirmation emails and admin notifications\n6. Mark processed emails as read (if enabled)\n\n**Returns:**\n- Number of emails found/processed\n- Number of payments matched/confirmed\n- List of any errors encountered","operationId":"process_payment_emails_api_v1_payments_email_notifications_process_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProcessEmailsRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProcessEmailsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"JWTBearer":[]}]}},"/api/v1/payments/email-notifications/recent":{"get":{"tags":["Payment Email Notifications","Payment Email Notifications"],"summary":"Get Recent Notifications","description":"Get recent payment notification emails (read or unread)\n\n**Admin only** - View payment notification emails from the last N hours.\nUseful for monitoring incoming payments and troubleshooting matching issues.\n\n**Query parameters:**\n- `since_hours`: Get emails from last N hours (default: 24, max: 168)\n- `limit`: Maximum number of emails to return (default: 50, max: 100)\n\n**Returns:**\nList of parsed payment notifications with details:\n- Provider (Stripe, Venmo, Zelle, BofA)\n- Amount received\n- Transaction ID (if available)\n- Sender information\n- Email metadata (subject, from, received date)","operationId":"get_recent_notifications_api_v1_payments_email_notifications_recent_get","security":[{"JWTBearer":[]}],"parameters":[{"name":"since_hours","in":"query","required":false,"schema":{"type":"integer","default":24,"title":"Since Hours"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/EmailNotificationResponse"},"title":"Response Get Recent Notifications Api V1 Payments Email Notifications Recent Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/payments/email-notifications/unmatched":{"get":{"tags":["Payment Email Notifications","Payment Email Notifications"],"summary":"Get Unmatched Notifications","description":"Get payment notifications that couldn't be auto-matched\n\n**Admin only** - View payment emails that were received but couldn't be automatically\nmatched to any pending payment in the system. These require manual review.\n\n**Common reasons for unmatched notifications:**\n- Customer paid without creating a booking first\n- Amount doesn't match any pending payment (within $1 tolerance)\n- Payment received outside 24-hour time window\n- Wrong payment method used (e.g., Venmo instead of Stripe)\n\n**Query parameters:**\n- `since_hours`: Check emails from last N hours (default: 48, max: 168)\n\n**Returns:**\nList of unmatched payment notifications that need manual processing","operationId":"get_unmatched_notifications_api_v1_payments_email_notifications_unmatched_get","security":[{"JWTBearer":[]}],"parameters":[{"name":"since_hours","in":"query","required":false,"schema":{"type":"integer","default":48,"title":"Since Hours"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/EmailNotificationResponse"},"title":"Response Get Unmatched Notifications Api V1 Payments Email Notifications Unmatched Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/payments/email-notifications/manual-match":{"post":{"tags":["Payment Email Notifications","Payment Email Notifications"],"summary":"Manual Match Payment","description":"Manually match an email notification to a payment\n\n**Admin only** - For cases where automatic matching failed, manually link\na payment notification email to a specific payment record.\n\n**Use cases:**\n- Customer paid with different amount than expected\n- Payment received outside normal time window\n- Multiple pending payments with similar amounts\n- Need to override automatic matching logic\n\n**Request body:**\n- `email_id`: Email ID from notification (get from `/recent` or `/unmatched`)\n- `payment_id`: Payment record ID to match\n- `confirm_payment`: Automatically confirm payment after matching (default: true)\n\n**Returns:**\n- Success status\n- Payment ID and Booking ID\n- Confirmation message","operationId":"manual_match_payment_api_v1_payments_email_notifications_manual_match_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManualMatchRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ManualMatchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"JWTBearer":[]}]}},"/api/v1/payments/email-notifications/status":{"get":{"tags":["Payment Email Notifications","Payment Email Notifications"],"summary":"Get Email Monitoring Status","description":"Check email monitoring service status\n\n**Admin only** - Verify that email monitoring is properly configured\nand can connect to Gmail IMAP.\n\n**Returns:**\n- Connection status (connected/disconnected)\n- Email address being monitored\n- Configuration details\n- Last check time","operationId":"get_email_monitoring_status_api_v1_payments_email_notifications_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"JWTBearer":[]}]}},"/api/v1/ai/multi-channel/inquiries/process":{"post":{"tags":["AI Multi-Channel Communication"],"summary":"Process Customer Inquiry","description":"Process customer inquiry from any communication channel.\n\nThis endpoint:\n1. Extracts structured information from the message\n2. Determines inquiry type, urgency, and sentiment\n3. Builds channel-specific system prompt\n4. Routes through optimized AI pipeline (cache, intelligent model selection)\n5. Formats response according to channel requirements\n6. Returns response with metadata and suggested actions\n\n**Supported Channels**:\n- `email`: Professional, detailed responses (max 2000 chars)\n- `sms`: Brief, action-oriented responses (max 160 chars)\n- `instagram`: Casual, enthusiastic with emojis (max 1000 chars)\n- `facebook`: Friendly professional (max 1200 chars)\n- `phone_transcript`: Conversational talking points (max 1500 chars)\n- `web_chat`: Real-time chat responses (max 800 chars)\n\n**Example Use Cases**:\n- Customer emails quote request â†’ Detailed quote with breakdown\n- Instagram DM \"How much?\" â†’ Quick price + booking link\n- Phone transcript â†’ Structured talking points for staff\n- SMS inquiry â†’ Brief response with CTA","operationId":"process_customer_inquiry_api_v1_ai_multi_channel_inquiries_process_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MultiChannelInquiry"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChannelResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/multi-channel/inquiries/batch":{"post":{"tags":["AI Multi-Channel Communication"],"summary":"Process Batch Inquiries","description":"Process multiple customer inquiries in batch (up to 10 at a time).\n\nUseful for:\n- Processing backlog of messages\n- Handling multiple channels simultaneously\n- Bulk email responses\n\n**Rate Limit**: Max 10 inquiries per batch","operationId":"process_batch_inquiries_api_v1_ai_multi_channel_inquiries_batch_post","requestBody":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/MultiChannelInquiry"},"type":"array","title":"Inquiries"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/ChannelResponse"},"type":"array","title":"Response Process Batch Inquiries Api V1 Ai Multi Channel Inquiries Batch Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/multi-channel/inquiries/test-all-channels":{"post":{"tags":["AI Multi-Channel Communication"],"summary":"Test All Channels","description":"Test how the same inquiry would be handled across all channels.\n\nReturns responses formatted for:\n- Email\n- SMS\n- Instagram\n- Facebook\n- Phone transcript\n- Web chat\n\n**Use Case**: Training, quality assurance, A/B testing different responses","operationId":"test_all_channels_api_v1_ai_multi_channel_inquiries_test_all_channels_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChannelTestRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/ai/multi-channel/inquiries/analyze":{"post":{"tags":["AI Multi-Channel Communication"],"summary":"Analyze Inquiry","description":"Analyze customer inquiry to extract structured information.\n\nReturns:\n- Party size, event date, location\n- Customer name, phone, email\n- Inquiry type (quote, booking, complaint, info)\n- Urgency level (low, normal, high, urgent)\n- Sentiment (positive, neutral, negative)\n- Special requests and dietary restrictions\n\n**Use Case**: Pre-processing, routing, priority assignment","operationId":"analyze_inquiry_api_v1_ai_multi_channel_inquiries_analyze_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InquiryAnalysis"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/emails/pending":{"get":{"tags":["Admin Email Review"],"summary":"Get Pending Emails","description":"Get list of pending email responses awaiting review.\n\n**Filters**:\n- `priority`: Filter by priority level (high, normal, low)\n- `inquiry_type`: Filter by type (quote, booking, complaint)\n- `min_quote`: Show only quotes above this amount\n- `limit`: Maximum number of emails to return\n\n**Returns**: List of pending emails sorted by priority and received time","operationId":"get_pending_emails_api_admin_emails_pending_get","parameters":[{"name":"priority","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/Priority"},{"type":"null"}],"title":"Priority"}},{"name":"inquiry_type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Inquiry Type"}},{"name":"min_quote","in":"query","required":false,"schema":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Min Quote"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PendingEmailResponse"},"title":"Response Get Pending Emails Api Admin Emails Pending Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/emails/{email_id}":{"get":{"tags":["Admin Email Review"],"summary":"Get Email Detail","description":"Get detailed view of specific email with AI-generated response.\n\n**Use Case**: View side-by-side comparison of original email and AI response","operationId":"get_email_detail_api_admin_emails__email_id__get","parameters":[{"name":"email_id","in":"path","required":true,"schema":{"type":"string","title":"Email Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PendingEmailResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/emails/{email_id}/approve":{"post":{"tags":["Admin Email Review"],"summary":"Approve And Send Email","description":"Approve AI-generated response and send email to customer.\n\n**Workflow**:\n1. Human reviews AI response\n2. Optionally edits response\n3. Clicks \"Approve & Send\"\n4. Email sent via SMTP\n5. Status updated to \"sent\"\n6. Logged for analytics\n\n**Parameters**:\n- `edited_response`: Optional edited version (overrides AI response)\n- `add_cc`: Additional CC recipients\n- `schedule_send`: Schedule for later (default: send immediately)\n- `reviewer_notes`: Internal notes for team","operationId":"approve_and_send_email_api_admin_emails__email_id__approve_post","parameters":[{"name":"email_id","in":"path","required":true,"schema":{"type":"string","title":"Email Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailApprovalRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/emails/{email_id}/edit":{"post":{"tags":["Admin Email Review"],"summary":"Edit Email Response","description":"Save edited version of AI-generated response.\n\n**Use Case**:\n- Human wants to modify AI response before sending\n- Add personal touches\n- Adjust pricing or terms\n- Save as template for future use\n\n**Does NOT send email** - just saves edits. Use `/approve` to send.","operationId":"edit_email_response_api_admin_emails__email_id__edit_post","parameters":[{"name":"email_id","in":"path","required":true,"schema":{"type":"string","title":"Email Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailEditRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/emails/{email_id}/reject":{"post":{"tags":["Admin Email Review"],"summary":"Reject Ai Response","description":"Reject AI-generated response and mark for manual handling.\n\n**Use Case**:\n- AI response is inaccurate\n- Complex situation requires human touch\n- Customer is VIP or high-value\n- Complaint or sensitive issue\n\n**Result**: Email moved to \"manual response\" queue for staff","operationId":"reject_ai_response_api_admin_emails__email_id__reject_post","parameters":[{"name":"email_id","in":"path","required":true,"schema":{"type":"string","title":"Email Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailRejectRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/admin/emails/stats/summary":{"get":{"tags":["Admin Email Review"],"summary":"Get Email Stats","description":"Get summary statistics for email review dashboard.\n\n**Returns**:\n- Total pending emails\n- By priority (urgent, high, normal, low)\n- Average response time\n- Approval rate\n- Top inquiry types","operationId":"get_email_stats_api_admin_emails_stats_summary_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AIEscalationRequest":{"properties":{"review_id":{"type":"string","format":"uuid","title":"Review Id","description":"Review ID"},"ai_notes":{"type":"string","title":"Ai Notes","description":"AI notes about why escalation needed"},"priority":{"type":"string","title":"Priority","description":"Escalation priority: low, medium, high, urgent","default":"urgent"}},"type":"object","required":["review_id","ai_notes"],"title":"AIEscalationRequest","description":"Request model for AI to escalate to human."},"AIInteractionRequest":{"properties":{"review_id":{"type":"string","format":"uuid","title":"Review Id","description":"Review ID"},"ai_interaction_notes":{"type":"string","title":"Ai Interaction Notes","description":"Notes from AI interaction"},"discount_percentage":{"type":"integer","title":"Discount Percentage","description":"Discount percentage (default 10%)","default":10}},"type":"object","required":["review_id","ai_interaction_notes"],"title":"AIInteractionRequest","description":"Request model for AI to issue coupon after interaction."},"ActionTypesResponse":{"properties":{"action_types":{"items":{"type":"string"},"type":"array","title":"Action Types"},"target_types":{"items":{"type":"string"},"type":"array","title":"Target Types"},"action_categories":{"items":{"type":"string"},"type":"array","title":"Action Categories"},"severities":{"items":{"type":"string"},"type":"array","title":"Severities"}},"type":"object","title":"ActionTypesResponse","description":"List of available action types for filtering.\n\nProvides both internal field names and frontend-expected aliases."},"ActivationRequest":{"properties":{"mode":{"type":"string","title":"Mode","description":"Activation mode: 'shadow' or 'active'"},"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason","description":"Reason for activation"}},"type":"object","required":["mode"],"title":"ActivationRequest","description":"Request to activate local AI mode"},"AddonItemCreate":{"properties":{"name":{"type":"string","maxLength":200,"minLength":1,"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"price":{"type":"number","minimum":0.0,"title":"Price"},"category":{"type":"string","pattern":"^(protein_upgrades|enhancements|equipment|entertainment|beverages)$","title":"Category"},"is_active":{"type":"boolean","title":"Is Active","default":true},"display_order":{"type":"integer","minimum":0.0,"title":"Display Order","default":0}},"type":"object","required":["name","price","category"],"title":"AddonItemCreate","description":"Schema for creating an addon item"},"AddonItemResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"price":{"type":"number","title":"Price"},"category":{"type":"string","title":"Category"},"is_active":{"type":"boolean","title":"Is Active"},"display_order":{"type":"integer","title":"Display Order"},"created_at":{"type":"string","title":"Created At"},"updated_at":{"type":"string","title":"Updated At"}},"type":"object","required":["id","name","description","price","category","is_active","display_order","created_at","updated_at"],"title":"AddonItemResponse","description":"Schema for addon item response"},"AddonItemUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":200,"minLength":1},{"type":"null"}],"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"price":{"anyOf":[{"type":"number","minimum":0.0},{"type":"null"}],"title":"Price"},"category":{"anyOf":[{"type":"string","pattern":"^(protein_upgrades|enhancements|equipment|entertainment|beverages)$"},{"type":"null"}],"title":"Category"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"},"display_order":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Display Order"}},"type":"object","title":"AddonItemUpdate","description":"Schema for updating an addon item"},"AddressCreateRequest":{"properties":{"raw_address":{"type":"string","maxLength":500,"minLength":10,"title":"Raw Address","description":"Full street address"},"customer_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Customer Id","description":"Link to customer for saved addresses"},"label":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Label","description":"Label like 'Home', 'Work'"},"is_default":{"type":"boolean","title":"Is Default","description":"Set as customer's default address","default":false}},"type":"object","required":["raw_address"],"title":"AddressCreateRequest","description":"Request to create/cache an address with geocoding."},"AddressInput":{"properties":{"address":{"type":"string","maxLength":500,"minLength":5,"title":"Address"}},"type":"object","required":["address"],"title":"AddressInput","description":"Input for geocoding an address."},"AddressResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"raw_address":{"type":"string","title":"Raw Address"},"formatted_address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Formatted Address"},"lat":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Lat"},"lng":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Lng"},"city":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"City"},"state":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"State"},"zip_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Zip Code"},"geocode_status":{"type":"string","title":"Geocode Status"},"is_cached":{"type":"boolean","title":"Is Cached","description":"True if address was already in cache","default":false},"is_serviceable":{"type":"boolean","title":"Is Serviceable","description":"True if within service area","default":true}},"type":"object","required":["id","raw_address","formatted_address","lat","lng","city","state","zip_code","geocode_status"],"title":"AddressResponse","description":"Response after creating/finding an address."},"AgreementContentResponse":{"properties":{"title":{"type":"string","title":"Title"},"content_html":{"type":"string","title":"Content Html"},"version":{"type":"string","title":"Version"},"effective_date":{"type":"string","title":"Effective Date"}},"type":"object","required":["title","content_html","version","effective_date"],"title":"AgreementContentResponse","description":"Agreement content for signing page - matches frontend AgreementContent interface."},"AgreementStatusResponse":{"properties":{"booking_id":{"type":"string","format":"uuid","title":"Booking Id"},"liability_waiver_signed":{"type":"boolean","title":"Liability Waiver Signed"},"allergen_disclosure_signed":{"type":"boolean","title":"Allergen Disclosure Signed"},"all_required_signed":{"type":"boolean","title":"All Required Signed"},"signed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Signed At"}},"type":"object","required":["booking_id","liability_waiver_signed","allergen_disclosure_signed","all_required_signed"],"title":"AgreementStatusResponse","description":"Response for agreement status check."},"AlertStatusUpdate":{"properties":{"status":{"type":"string","pattern":"^(acknowledged|resolved|dismissed)$","title":"Status"}},"type":"object","required":["status"],"title":"AlertStatusUpdate","description":"Request to update alert status"},"AllSlotsConfigResponse":{"properties":{"slots":{"items":{"$ref":"#/components/schemas/SlotConfigResponse"},"type":"array","title":"Slots"}},"type":"object","required":["slots"],"title":"AllSlotsConfigResponse","description":"All slot configurations."},"ApiResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"data":{"anyOf":[{},{"type":"null"}],"title":"Data"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"},"total_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Total Count"}},"type":"object","required":["success"],"title":"ApiResponse","description":"Standard API response wrapper for CQRS operations."},"ApprovalActionRequest":{"properties":{"comment":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Comment","description":"Optional comment for action"}},"type":"object","title":"ApprovalActionRequest","description":"Request model for approve/reject actions."},"ApprovalListResponse":{"properties":{"approvals":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Approvals"},"count":{"type":"integer","title":"Count"},"status_filter":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status Filter"}},"type":"object","required":["approvals","count"],"title":"ApprovalListResponse","description":"Response model for list of approval requests."},"ApprovalRequestCreate":{"properties":{"category":{"type":"string","title":"Category","description":"Variable category"},"key":{"type":"string","title":"Key","description":"Variable key"},"proposed_value":{"title":"Proposed Value","description":"Proposed new value"},"change_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Change Reason","description":"Reason for the change"},"effective_from":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Effective From","description":"ISO datetime when value becomes effective"},"effective_to":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Effective To","description":"ISO datetime when value expires"}},"type":"object","required":["category","key","proposed_value"],"title":"ApprovalRequestCreate","description":"Request model for creating an approval request."},"AssignRoleRequest":{"properties":{"role_id":{"type":"string","title":"Role Id"}},"type":"object","required":["role_id"],"title":"AssignRoleRequest","description":"Request to assign role to user"},"AuditLogEntry":{"properties":{"id":{"type":"string","title":"Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"user_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Id"},"user_role":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Role"},"user_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Name"},"user_email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Email"},"action_type":{"type":"string","title":"Action Type"},"target_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Target Type"},"target_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Target Id"},"resource_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Resource Name"},"request_method":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Request Method"},"request_path":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Request Path"},"status_code":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Status Code"},"ip_address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ip Address"},"user_agent":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Agent"},"station_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Station Id"},"delete_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Delete Reason"},"old_values":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Old Values"},"new_values":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"New Values"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata"},"success":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Success","default":true},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"},"source":{"type":"string","title":"Source","default":"audit_logs"},"action_category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Action Category"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"severity":{"type":"string","title":"Severity","default":"info"}},"type":"object","required":["id","created_at","action_type"],"title":"AuditLogEntry","description":"Single audit log entry.\n\nProvides both internal field names and frontend-expected aliases.\nFrontend expects: action_type, action_category, target_type, target_id, severity, description\nBackend stores: action, resource_type, resource_id"},"AuditLogListResponse":{"properties":{"data":{"items":{"$ref":"#/components/schemas/AuditLogEntry"},"type":"array","title":"Data"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"page_size":{"type":"integer","title":"Page Size"},"total_pages":{"type":"integer","title":"Total Pages"},"has_more":{"type":"boolean","title":"Has More"}},"type":"object","required":["data","total","page","page_size","total_pages","has_more"],"title":"AuditLogListResponse","description":"Paginated audit log response.\n\nFrontend expects:\n- 'data' field containing the entries (serialized from 'entries')\n- 'total' for total count\n- 'page_size' for limit (serialized from 'limit')"},"AuditLogStatsResponse":{"properties":{"total_events":{"type":"integer","title":"Total Events"},"events_today":{"type":"integer","title":"Events Today"},"events_this_week":{"type":"integer","title":"Events This Week"},"actions_breakdown":{"additionalProperties":{"type":"integer"},"type":"object","title":"Actions Breakdown"},"top_users":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Top Users"},"top_resources":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Top Resources"},"security_events":{"type":"integer","title":"Security Events","default":0},"authentication_events":{"type":"integer","title":"Authentication Events","default":0},"data_change_events":{"type":"integer","title":"Data Change Events","default":0},"system_events":{"type":"integer","title":"System Events","default":0},"unique_users":{"type":"integer","title":"Unique Users","default":0},"failed_actions":{"type":"integer","title":"Failed Actions","default":0},"success_rate":{"type":"number","title":"Success Rate","default":100.0}},"type":"object","required":["total_events","events_today","events_this_week","actions_breakdown","top_users","top_resources"],"title":"AuditLogStatsResponse","description":"Audit log statistics.\n\nProvides both internal field names and frontend-expected aliases."},"AuthProviderSchema":{"type":"string","enum":["google","email","microsoft","apple"],"title":"AuthProviderSchema","description":"Authentication provider types"},"AvailabilityCheckRequest":{"properties":{"event_date":{"type":"string","format":"date","title":"Event Date"},"event_time":{"type":"string","format":"time","title":"Event Time"},"guest_count":{"type":"integer","maximum":100.0,"minimum":1.0,"title":"Guest Count"},"venue_lat":{"anyOf":[{"type":"number"},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Venue Lat"},"venue_lng":{"anyOf":[{"type":"number"},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Venue Lng"},"preferred_chef_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Preferred Chef Id"}},"type":"object","required":["event_date","event_time","guest_count"],"title":"AvailabilityCheckRequest","description":"Request to check slot availability."},"AvailableTimeSlotsResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"date":{"type":"string","title":"Date"},"timeSlots":{"items":{"$ref":"#/components/schemas/TimeSlot"},"type":"array","title":"Timeslots"}},"type":"object","required":["success","date","timeSlots"],"title":"AvailableTimeSlotsResponse","description":"Response schema for available time slots."},"AwardCreditRequest":{"properties":{"referrer_id":{"type":"integer","title":"Referrer Id"},"amount":{"type":"number","title":"Amount"},"reason":{"type":"string","title":"Reason"}},"type":"object","required":["referrer_id","amount","reason"],"title":"AwardCreditRequest","description":"Request model for awarding referral credit."},"BlockIPRequest":{"properties":{"ip_address":{"type":"string","title":"Ip Address"},"reason":{"type":"string","title":"Reason"},"expires_hours":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Expires Hours"}},"type":"object","required":["ip_address","reason"],"title":"BlockIPRequest","description":"Request to block an IP address"},"Body_calculate_quote_api_v1_pricing_calculate_post":{"properties":{"upgrades":{"anyOf":[{"additionalProperties":{"type":"integer"},"type":"object"},{"type":"null"}],"title":"Upgrades"},"addons":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Addons"}},"type":"object","title":"Body_calculate_quote_api_v1_pricing_calculate_post"},"Body_change_own_password_api_admin_change_password_post":{"properties":{"current_password":{"type":"string","title":"Current Password"},"new_password":{"type":"string","title":"New Password"}},"type":"object","required":["current_password","new_password"],"title":"Body_change_own_password_api_admin_change_password_post"},"Body_confirm_deposit_api_admin_confirm_deposit_post":{"properties":{"booking_id":{"type":"integer","title":"Booking Id","description":"Booking ID to confirm deposit for"},"amount":{"type":"number","minimum":0.0,"title":"Amount","description":"Deposit amount received in dollars"},"payment_method":{"type":"string","title":"Payment Method","description":"Payment method used: venmo, zelle, cash, or stripe"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes","description":"Optional admin notes about the payment"}},"type":"object","required":["booking_id","amount","payment_method"],"title":"Body_confirm_deposit_api_admin_confirm_deposit_post"},"Body_create_admin_api_superadmin_create_admin_post":{"properties":{"username":{"type":"string","title":"Username"},"password":{"type":"string","title":"Password"}},"type":"object","required":["username","password"],"title":"Body_create_admin_api_superadmin_create_admin_post"},"Body_login_api_token_post":{"properties":{"grant_type":{"anyOf":[{"type":"string","pattern":"^password$"},{"type":"null"}],"title":"Grant Type"},"username":{"type":"string","title":"Username"},"password":{"type":"string","format":"password","title":"Password"},"scope":{"type":"string","title":"Scope","default":""},"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"format":"password","title":"Client Secret"}},"type":"object","required":["username","password"],"title":"Body_login_api_token_post"},"Body_submit_public_review_api_v1_reviews_submit_public_post":{"properties":{"rating":{"type":"integer","maximum":5.0,"minimum":1.0,"title":"Rating","description":"Rating from 1-5"},"review_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Review Text","description":"Review text/feedback"},"customer_email":{"type":"string","title":"Customer Email","description":"Customer email"},"customer_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Name","description":"Customer name"},"booking_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Booking Id","description":"Associated booking ID"},"files":{"items":{"type":"string","format":"binary"},"type":"array","title":"Files","description":"Media files (images/videos, max 5)","default":[]}},"type":"object","required":["rating","customer_email"],"title":"Body_submit_public_review_api_v1_reviews_submit_public_post"},"Body_test_local_generation_api_v1_ai_shadow_test_generate_post":{"properties":{"prompt":{"type":"string","title":"Prompt"},"context":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Context"},"system_prompt":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"System Prompt"}},"type":"object","required":["prompt"],"title":"Body_test_local_generation_api_v1_ai_shadow_test_generate_post"},"BookedDatesResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"data":{"items":{"type":"string"},"type":"array","title":"Data"},"count":{"type":"integer","title":"Count"}},"type":"object","required":["success","count"],"title":"BookedDatesResponse","description":"Response schema for booked dates."},"BookingBalanceInfo":{"properties":{"booking_id":{"type":"string","format":"uuid","title":"Booking Id"},"event_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Event Date"},"total_due_cents":{"type":"integer","title":"Total Due Cents"},"deposit_paid_cents":{"type":"integer","title":"Deposit Paid Cents"},"balance_due_cents":{"type":"integer","title":"Balance Due Cents"},"travel_fee_cents":{"type":"integer","title":"Travel Fee Cents"},"status":{"type":"string","title":"Status"}},"type":"object","required":["booking_id","total_due_cents","deposit_paid_cents","balance_due_cents","travel_fee_cents","status"],"title":"BookingBalanceInfo","description":"Booking balance information."},"BookingConfig":{"properties":{"min_advance_hours":{"type":"integer","title":"Min Advance Hours","description":"Minimum hours in advance to book"}},"type":"object","required":["min_advance_hours"],"title":"BookingConfig","description":"Booking rules configuration."},"BookingPolicy":{"properties":{"advance_hours":{"type":"integer","title":"Advance Hours","description":"Minimum advance booking hours"},"text":{"type":"string","title":"Text","description":"Human-readable policy text"}},"type":"object","required":["advance_hours","text"],"title":"BookingPolicy","description":"Booking policy with human-readable text."},"BookingResponse":{"properties":{"id":{"type":"string","title":"Id","description":"Unique booking identifier"},"user_id":{"type":"string","title":"User Id","description":"User ID who created the booking"},"date":{"type":"string","title":"Date","description":"Booking date"},"time":{"type":"string","title":"Time","description":"Booking time"},"guests":{"type":"integer","title":"Guests","description":"Number of guests"},"status":{"type":"string","title":"Status","description":"Booking status (pending, confirmed, completed, cancelled)"},"total_amount":{"type":"number","title":"Total Amount","description":"Total cost in USD"},"deposit_paid":{"type":"boolean","title":"Deposit Paid","description":"Whether deposit has been paid"},"balance_due":{"type":"number","title":"Balance Due","description":"Remaining balance due in USD"},"payment_status":{"type":"string","title":"Payment Status","description":"Payment status"},"created_at":{"type":"string","title":"Created At","description":"Creation timestamp (ISO 8601)"}},"type":"object","required":["id","user_id","date","time","guests","status","total_amount","deposit_paid","balance_due","payment_status","created_at"],"title":"BookingResponse","description":"Schema for booking response.","examples":[{"balance_due":350.0,"created_at":"2024-10-19T10:30:00Z","date":"2024-12-25","deposit_paid":true,"guests":8,"id":"booking-abc123","payment_status":"deposit_paid","status":"confirmed","time":"18:00","total_amount":450.0,"user_id":"user-xyz789"}]},"BookingStatus":{"type":"string","enum":["pending","deposit_pending","deposit_paid","confirmed","in_progress","completed","cancelled","no_show","cancellation_requested"],"title":"BookingStatus","description":"Booking status workflow"},"BookingUpdate":{"properties":{"date":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Date","description":"Updated booking date"},"time":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Time","description":"Updated booking time"},"guests":{"anyOf":[{"type":"integer","maximum":50.0,"minimum":1.0},{"type":"null"}],"title":"Guests","description":"Updated guest count"},"location_address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location Address","description":"Updated location"},"special_requests":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Special Requests","description":"Updated special requests"},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status","description":"Updated status"},"chef_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Chef Id","description":"Assign chef to booking (UUID). Set to null to unassign chef."}},"type":"object","title":"BookingUpdate","description":"Schema for updating an existing booking."},"BudgetTier":{"type":"string","enum":["low","medium","high","premium"],"title":"BudgetTier","description":"Campaign budget tiers."},"BulkAvailabilityUpdate":{"properties":{"slots":{"items":{"$ref":"#/components/schemas/ChefAvailabilityCreate"},"type":"array","maxItems":21,"minItems":1,"title":"Slots","description":"List of availability slots to set"},"replace_existing":{"type":"boolean","title":"Replace Existing","description":"If true, deletes existing slots before adding new ones","default":true}},"type":"object","required":["slots"],"title":"BulkAvailabilityUpdate","description":"Bulk update for weekly availability."},"BulkMessageRequest":{"properties":{"messages":{"items":{"$ref":"#/components/schemas/api__v1__inbox__schemas__SendMessageRequest"},"type":"array","maxItems":100,"minItems":1,"title":"Messages"},"batch_metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Batch Metadata"}},"type":"object","required":["messages"],"title":"BulkMessageRequest","description":"Bulk message sending request"},"BulkMessageResponse":{"properties":{"batch_id":{"type":"string","format":"uuid","title":"Batch Id"},"total_messages":{"type":"integer","title":"Total Messages"},"successful":{"type":"integer","title":"Successful"},"failed":{"type":"integer","title":"Failed"},"results":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Results"}},"type":"object","required":["batch_id","total_messages","successful","failed","results"],"title":"BulkMessageResponse","description":"Bulk message response"},"BulkUpdateEmailRequest":{"properties":{"message_ids":{"items":{"type":"string"},"type":"array","title":"Message Ids","description":"List of message IDs to update"},"is_read":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Read"},"is_starred":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Starred"},"is_archived":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Archived"},"labels":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Labels"},"action":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Action","description":"Action: mark_read, mark_unread, star, unstar, archive, unarchive, delete, apply_label, remove_label"},"label_slug":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Label Slug","description":"Label slug for apply_label/remove_label actions"}},"type":"object","required":["message_ids"],"title":"BulkUpdateEmailRequest","description":"Bulk update email status for multiple messages"},"BulkUpdateRequest":{"properties":{"updates":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Updates","description":"List of updates: [{category, key, value, change_reason?}]"}},"type":"object","required":["updates"],"title":"BulkUpdateRequest","description":"Request model for bulk updating variables."},"BusinessConfigResponse":{"properties":{"pricing":{"$ref":"#/components/schemas/PricingConfig"},"travel":{"$ref":"#/components/schemas/TravelConfig"},"deposit":{"$ref":"#/components/schemas/DepositConfig"},"booking":{"$ref":"#/components/schemas/BookingConfig"},"timing":{"$ref":"#/components/schemas/TimingConfig"},"service":{"$ref":"#/components/schemas/ServiceConfig"},"policy":{"$ref":"#/components/schemas/PolicyConfig"},"contact":{"$ref":"#/components/schemas/ContactConfig"},"guest_limits":{"anyOf":[{"$ref":"#/components/schemas/GuestLimitsConfig"},{"type":"null"}]},"source":{"type":"string","title":"Source","description":"Data source for debugging","default":"api"}},"type":"object","required":["pricing","travel","deposit","booking","timing","service","policy","contact"],"title":"BusinessConfigResponse","description":"Complete business configuration response.\n\nThis is the nested structure expected by the frontend useConfig hook.\nBackend stores flat, we transform to nested here."},"CalculatePaymentRequest":{"properties":{"base_amount":{"anyOf":[{"type":"number","exclusiveMinimum":0.0},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"}],"title":"Base Amount","description":"Base payment amount (before fees)"},"tip_amount":{"anyOf":[{"type":"number","minimum":0.0},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"}],"title":"Tip Amount","description":"Tip amount","default":0},"payment_method":{"type":"string","title":"Payment Method","description":"Payment method: zelle, venmo, or stripe"}},"type":"object","required":["base_amount","payment_method"],"title":"CalculatePaymentRequest","description":"Request to calculate payment with fees"},"CalculatePaymentResponse":{"properties":{"base_amount":{"type":"number","title":"Base Amount"},"tip_amount":{"type":"number","title":"Tip Amount"},"subtotal":{"type":"number","title":"Subtotal"},"selected_method":{"$ref":"#/components/schemas/PaymentMethodBreakdown"},"all_methods":{"items":{"$ref":"#/components/schemas/PaymentMethodBreakdown"},"type":"array","title":"All Methods"},"recommendation":{"type":"string","title":"Recommendation"}},"type":"object","required":["base_amount","tip_amount","subtotal","selected_method","all_methods","recommendation"],"title":"CalculatePaymentResponse","description":"Payment calculation with all fees"},"CalendarAvailabilityRequest":{"properties":{"start_date":{"type":"string","format":"date","title":"Start Date"},"end_date":{"type":"string","format":"date","title":"End Date"},"venue_lat":{"anyOf":[{"type":"number"},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Venue Lat"},"venue_lng":{"anyOf":[{"type":"number"},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Venue Lng"}},"type":"object","required":["start_date","end_date"],"title":"CalendarAvailabilityRequest","description":"Request for calendar view availability."},"CalendarAvailabilityResponse":{"properties":{"days":{"items":{"$ref":"#/components/schemas/CalendarDayAvailability"},"type":"array","title":"Days"},"start_date":{"type":"string","format":"date","title":"Start Date"},"end_date":{"type":"string","format":"date","title":"End Date"}},"type":"object","required":["days","start_date","end_date"],"title":"CalendarAvailabilityResponse","description":"Calendar view of availability."},"CalendarDayAvailability":{"properties":{"date":{"type":"string","format":"date","title":"Date"},"has_availability":{"type":"boolean","title":"Has Availability"},"available_slots":{"items":{"type":"string"},"type":"array","title":"Available Slots","default":[]},"fully_booked":{"type":"boolean","title":"Fully Booked","default":false}},"type":"object","required":["date","has_availability"],"title":"CalendarDayAvailability","description":"Availability for a single day."},"CampaignChannel":{"type":"string","enum":["email","sms","both"],"title":"CampaignChannel","description":"Campaign delivery channel"},"CampaignContentRequest":{"properties":{"holiday_key":{"type":"string","title":"Holiday Key","description":"Holiday key (e.g., 'christmas', 'thanksgiving')"},"channels":{"items":{"$ref":"#/components/schemas/MarketingChannel"},"type":"array","title":"Channels","description":"Marketing channels to generate content for","default":["email","sms","facebook"]},"budget_override":{"anyOf":[{"$ref":"#/components/schemas/BudgetTier"},{"type":"null"}],"description":"Override automatic budget allocation"}},"type":"object","required":["holiday_key"],"title":"CampaignContentRequest","description":"Request to generate content for specific holiday and channels"},"CampaignContentResponse":{"properties":{"holiday_key":{"type":"string","title":"Holiday Key"},"holiday_name":{"type":"string","title":"Holiday Name"},"holiday_date":{"type":"string","title":"Holiday Date"},"campaign_type":{"type":"string","title":"Campaign Type"},"budget_tier":{"type":"string","title":"Budget Tier"},"target_audience":{"type":"string","title":"Target Audience"},"email":{"anyOf":[{"$ref":"#/components/schemas/EmailContentResponse"},{"type":"null"}]},"sms":{"anyOf":[{"$ref":"#/components/schemas/SMSContentResponse"},{"type":"null"}]},"facebook":{"anyOf":[{"$ref":"#/components/schemas/FacebookContentResponse"},{"type":"null"}]},"instagram":{"anyOf":[{"$ref":"#/components/schemas/InstagramContentResponse"},{"type":"null"}]},"google_ads":{"anyOf":[{"$ref":"#/components/schemas/GoogleAdsContentResponse"},{"type":"null"}]},"tiktok":{"anyOf":[{"$ref":"#/components/schemas/TikTokContentResponse"},{"type":"null"}]},"generated_at":{"type":"string","format":"date-time","title":"Generated At"}},"type":"object","required":["holiday_key","holiday_name","holiday_date","campaign_type","budget_tier","target_audience","generated_at"],"title":"CampaignContentResponse","description":"Multi-channel campaign content"},"CampaignCreate":{"properties":{"name":{"type":"string","title":"Name"},"channel":{"$ref":"#/components/schemas/CampaignChannel"},"subject":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subject"},"content":{"additionalProperties":true,"type":"object","title":"Content"},"segment_filter":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Segment Filter"},"scheduled_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Scheduled At"}},"type":"object","required":["name","channel","content"],"title":"CampaignCreate"},"CampaignEventResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"campaign_id":{"type":"string","format":"uuid","title":"Campaign Id"},"subscriber_id":{"type":"string","format":"uuid","title":"Subscriber Id"},"type":{"$ref":"#/components/schemas/CampaignEventType"},"payload":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Payload"},"occurred_at":{"type":"string","format":"date-time","title":"Occurred At"}},"type":"object","required":["id","campaign_id","subscriber_id","type","payload","occurred_at"],"title":"CampaignEventResponse"},"CampaignEventType":{"type":"string","enum":["sent","delivered","opened","clicked","replied","bounced","unsubscribed","complained"],"title":"CampaignEventType","description":"Campaign event types for tracking"},"CampaignLaunchRequest":{"properties":{"campaign_id":{"type":"string","title":"Campaign Id"},"launch_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Launch Date","description":"When to launch (default: now)"},"channels_to_launch":{"anyOf":[{"items":{"$ref":"#/components/schemas/MarketingChannel"},"type":"array"},{"type":"null"}],"title":"Channels To Launch","description":"Specific channels to launch (default: all)"}},"type":"object","required":["campaign_id"],"title":"CampaignLaunchRequest","description":"Request to launch campaign"},"CampaignLaunchResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"campaign_id":{"type":"string","title":"Campaign Id"},"channels_launched":{"items":{"type":"string"},"type":"array","title":"Channels Launched"},"launch_date":{"type":"string","format":"date-time","title":"Launch Date"},"estimated_reach":{"type":"integer","title":"Estimated Reach"},"message":{"type":"string","title":"Message"}},"type":"object","required":["success","campaign_id","channels_launched","launch_date","estimated_reach","message"],"title":"CampaignLaunchResponse","description":"Response after launching campaign"},"CampaignListResponse":{"properties":{"campaigns":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Campaigns"},"total":{"type":"integer","title":"Total"},"budget_summary":{"additionalProperties":true,"type":"object","title":"Budget Summary"},"holidays_covered":{"items":{"type":"string"},"type":"array","title":"Holidays Covered"}},"type":"object","required":["campaigns","total","budget_summary","holidays_covered"],"title":"CampaignListResponse","description":"Response with list of generated campaigns"},"CampaignResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"name":{"type":"string","title":"Name"},"channel":{"$ref":"#/components/schemas/CampaignChannel"},"subject":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subject"},"content":{"additionalProperties":true,"type":"object","title":"Content"},"segment_filter":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Segment Filter"},"scheduled_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Scheduled At"},"sent_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Sent At"},"status":{"$ref":"#/components/schemas/CampaignStatus"},"total_recipients":{"type":"integer","title":"Total Recipients"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"created_by":{"type":"string","title":"Created By"}},"type":"object","required":["id","name","channel","subject","content","segment_filter","scheduled_at","sent_at","status","total_recipients","created_at","created_by"],"title":"CampaignResponse"},"CampaignStatsResponse":{"properties":{"campaign_id":{"type":"string","format":"uuid","title":"Campaign Id"},"total_recipients":{"type":"integer","title":"Total Recipients"},"delivered":{"type":"integer","title":"Delivered"},"opened":{"type":"integer","title":"Opened"},"clicked":{"type":"integer","title":"Clicked"},"bounced":{"type":"integer","title":"Bounced"},"unsubscribed":{"type":"integer","title":"Unsubscribed"},"delivery_rate":{"type":"number","title":"Delivery Rate"},"open_rate":{"type":"number","title":"Open Rate"},"click_rate":{"type":"number","title":"Click Rate"},"bounce_rate":{"type":"number","title":"Bounce Rate"}},"type":"object","required":["campaign_id","total_recipients","delivered","opened","clicked","bounced","unsubscribed","delivery_rate","open_rate","click_rate","bounce_rate"],"title":"CampaignStatsResponse"},"CampaignStatus":{"type":"string","enum":["draft","scheduled","sending","sent","cancelled"],"title":"CampaignStatus","description":"Campaign workflow status"},"CampaignType":{"type":"string","enum":["welcome","post_inquiry","abandoned_quote","post_event","reactivation","seasonal"],"title":"CampaignType","description":"Campaign type enumeration."},"CampaignUpdate":{"properties":{"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"subject":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subject"},"content":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Content"},"segment_filter":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Segment Filter"},"scheduled_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Scheduled At"},"status":{"anyOf":[{"$ref":"#/components/schemas/CampaignStatus"},{"type":"null"}]}},"type":"object","title":"CampaignUpdate"},"CancelBookingRequest":{"properties":{"reason":{"type":"string","title":"Reason"}},"type":"object","required":["reason"],"title":"CancelBookingRequest","description":"Request body for cancelling a booking (admin only)."},"CancellationApprovalInput":{"properties":{"reason":{"type":"string","maxLength":500,"minLength":10,"title":"Reason","description":"Reason for approving cancellation (10-500 characters)","examples":["Approved per customer request - full refund issued","Approved - event falls outside service window","Approved - customer provided valid documentation"]}},"type":"object","required":["reason"],"title":"CancellationApprovalInput","description":"Schema for approving cancellation request (Step 2 - Approve)."},"CancellationPolicy":{"properties":{"refund_days":{"type":"integer","title":"Refund Days","description":"Days before event for full refund"},"text":{"type":"string","title":"Text","description":"Human-readable policy text"}},"type":"object","required":["refund_days","text"],"title":"CancellationPolicy","description":"Cancellation policy with human-readable text."},"CancellationRejectionInput":{"properties":{"reason":{"type":"string","maxLength":500,"minLength":10,"title":"Reason","description":"Reason for rejecting cancellation (10-500 characters)","examples":["Rejected - event is within 24-hour no-cancellation window","Rejected - deposit is non-refundable per policy","Rejected - customer agreed to proceed with event"]}},"type":"object","required":["reason"],"title":"CancellationRejectionInput","description":"Schema for rejecting cancellation request (Step 2 - Reject)."},"CancellationRequestInput":{"properties":{"reason":{"type":"string","maxLength":500,"minLength":10,"title":"Reason","description":"Reason for cancellation request (10-500 characters)","examples":["Customer called to cancel due to weather concerns","Event venue no longer available","Customer wants to reschedule to a different date"]}},"type":"object","required":["reason"],"title":"CancellationRequestInput","description":"Schema for requesting booking cancellation (Step 1)."},"CancellationResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether the operation was successful"},"message":{"type":"string","title":"Message","description":"Human-readable result message"},"booking_id":{"type":"string","title":"Booking Id","description":"Booking ID"},"previous_status":{"type":"string","title":"Previous Status","description":"Status before this action"},"new_status":{"type":"string","title":"New Status","description":"Status after this action"},"action_by":{"type":"string","title":"Action By","description":"User ID who performed the action"},"action_at":{"type":"string","title":"Action At","description":"Timestamp of action (ISO 8601)"}},"type":"object","required":["success","message","booking_id","previous_status","new_status","action_by","action_at"],"title":"CancellationResponse","description":"Response schema for cancellation workflow actions."},"ChannelResponse":{"properties":{"channel":{"type":"string","title":"Channel"},"response_text":{"type":"string","title":"Response Text"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata"},"suggested_actions":{"items":{"type":"string"},"type":"array","title":"Suggested Actions"},"response_time_expectation":{"type":"string","title":"Response Time Expectation"},"ai_metadata":{"additionalProperties":true,"type":"object","title":"Ai Metadata"}},"type":"object","required":["channel","response_text","metadata","suggested_actions","response_time_expectation","ai_metadata"],"title":"ChannelResponse","description":"Formatted AI response for specific channel."},"ChannelTestRequest":{"properties":{"message":{"type":"string","title":"Message","description":"Customer inquiry to test"}},"type":"object","required":["message"],"title":"ChannelTestRequest","description":"Test request to see how AI would respond across all channels.","example":{"message":"What payment methods do you accept?"}},"ChatHistory":{"properties":{"threads":{"items":{"$ref":"#/components/schemas/ChatThread"},"type":"array","title":"Threads"},"total_threads":{"type":"integer","title":"Total Threads"},"page":{"type":"integer","title":"Page"},"per_page":{"type":"integer","title":"Per Page"}},"type":"object","required":["threads","total_threads","page","per_page"],"title":"ChatHistory"},"ChatMessage":{"properties":{"role":{"type":"string","title":"Role","description":"Message role: user, assistant, or system"},"content":{"type":"string","title":"Content","description":"Message content"},"timestamp":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Timestamp"}},"type":"object","required":["role","content"],"title":"ChatMessage"},"ChatRequest":{"properties":{"message":{"type":"string","maxLength":2000,"minLength":1,"title":"Message","description":"User message"},"thread_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Thread Id","description":"Conversation thread ID"},"channel":{"type":"string","title":"Channel","description":"Channel: web, sms, instagram, facebook","default":"web"},"context":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Context","description":"Additional context"}},"type":"object","required":["message"],"title":"ChatRequest"},"ChatResponse":{"properties":{"response":{"type":"string","title":"Response","description":"AI generated response"},"thread_id":{"type":"string","title":"Thread Id","description":"Conversation thread ID"},"confidence":{"type":"number","title":"Confidence","description":"Response confidence score"},"message_id":{"type":"string","title":"Message Id","description":"Unique message ID"},"model_used":{"type":"string","title":"Model Used","description":"AI model used"},"processing_time_ms":{"type":"integer","title":"Processing Time Ms","description":"Processing time in milliseconds"}},"type":"object","required":["response","thread_id","confidence","message_id","model_used","processing_time_ms"],"title":"ChatResponse"},"ChatThread":{"properties":{"thread_id":{"type":"string","title":"Thread Id"},"channel":{"type":"string","title":"Channel"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"last_message_at":{"type":"string","format":"date-time","title":"Last Message At"},"message_count":{"type":"integer","title":"Message Count"},"messages":{"items":{"$ref":"#/components/schemas/ChatMessage"},"type":"array","title":"Messages"}},"type":"object","required":["thread_id","channel","created_at","last_message_at","message_count","messages"],"title":"ChatThread"},"CheckoutSessionRequest":{"properties":{"booking_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Booking Id"},"amount":{"type":"integer","minimum":100.0,"title":"Amount","description":"Amount in cents, minimum $1.00"},"currency":{"type":"string","pattern":"^[a-z]{3}$","title":"Currency","default":"usd"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"success_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Success Url"},"cancel_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cancel Url"},"customer_email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Email"},"metadata":{"anyOf":[{"additionalProperties":{"type":"string"},"type":"object"},{"type":"null"}],"title":"Metadata"}},"type":"object","required":["amount"],"title":"CheckoutSessionRequest","description":"Request model for creating a checkout session."},"CheckoutSessionResponse":{"properties":{"session_id":{"type":"string","title":"Session Id"},"checkout_url":{"type":"string","title":"Checkout Url"},"expires_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Expires At"}},"type":"object","required":["session_id","checkout_url"],"title":"CheckoutSessionResponse","description":"Response model for checkout session creation."},"ChefAssignmentRequest":{"properties":{"booking_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Booking Id"},"event_date":{"type":"string","format":"date","title":"Event Date"},"event_time":{"type":"string","format":"time","title":"Event Time"},"guest_count":{"type":"integer","title":"Guest Count"},"venue_lat":{"anyOf":[{"type":"number"},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"}],"title":"Venue Lat"},"venue_lng":{"anyOf":[{"type":"number"},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"}],"title":"Venue Lng"},"customer_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Customer Id"},"preferred_chef_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Preferred Chef Id"},"is_preference_required":{"type":"boolean","title":"Is Preference Required","default":false},"skill_requirements":{"items":{"type":"string"},"type":"array","title":"Skill Requirements","default":[]}},"type":"object","required":["event_date","event_time","guest_count","venue_lat","venue_lng"],"title":"ChefAssignmentRequest","description":"Request for chef recommendation."},"ChefAssignmentResponse":{"properties":{"booking_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Booking Id"},"recommended_chef_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Recommended Chef Id"},"recommended_chef_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Recommended Chef Name"},"confidence_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Confidence Score"},"reason":{"type":"string","title":"Reason"},"is_optimal":{"type":"boolean","title":"Is Optimal","default":true},"all_scores":{"items":{"$ref":"#/components/schemas/ChefScoreResponse"},"type":"array","title":"All Scores","default":[]}},"type":"object","required":["confidence_score","reason"],"title":"ChefAssignmentResponse","description":"Response with recommended chef and alternatives."},"ChefAvailabilityCreate":{"properties":{"day_of_week":{"$ref":"#/components/schemas/DayOfWeek"},"start_time":{"type":"string","format":"time","title":"Start Time"},"end_time":{"type":"string","format":"time","title":"End Time"},"is_available":{"type":"boolean","title":"Is Available","default":true}},"type":"object","required":["day_of_week","start_time","end_time"],"title":"ChefAvailabilityCreate","description":"Create a new availability slot."},"ChefAvailabilityResponse":{"properties":{"day_of_week":{"$ref":"#/components/schemas/DayOfWeek"},"start_time":{"type":"string","format":"time","title":"Start Time"},"end_time":{"type":"string","format":"time","title":"End Time"},"is_available":{"type":"boolean","title":"Is Available","default":true},"id":{"type":"string","format":"uuid","title":"Id"},"chef_id":{"type":"string","format":"uuid","title":"Chef Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["day_of_week","start_time","end_time","id","chef_id","created_at"],"title":"ChefAvailabilityResponse","description":"Response for a single availability slot."},"ChefAvailabilityUpdate":{"properties":{"start_time":{"anyOf":[{"type":"string","format":"time"},{"type":"null"}],"title":"Start Time"},"end_time":{"anyOf":[{"type":"string","format":"time"},{"type":"null"}],"title":"End Time"},"is_available":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Available"}},"type":"object","title":"ChefAvailabilityUpdate","description":"Update an existing availability slot."},"ChefProfileResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"first_name":{"type":"string","title":"First Name"},"last_name":{"type":"string","title":"Last Name"},"email":{"type":"string","title":"Email"},"phone":{"type":"string","title":"Phone"},"specialty":{"type":"string","title":"Specialty"},"status":{"$ref":"#/components/schemas/schemas__chef_portal__ChefStatus"},"rating":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Rating"},"total_bookings":{"type":"integer","title":"Total Bookings","default":0},"completed_bookings":{"type":"integer","title":"Completed Bookings","default":0},"hired_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Hired Date"}},"type":"object","required":["id","first_name","last_name","email","phone","specialty","status"],"title":"ChefProfileResponse","description":"Chef's own profile information."},"ChefScoreResponse":{"properties":{"chef_id":{"type":"string","format":"uuid","title":"Chef Id"},"chef_name":{"type":"string","title":"Chef Name"},"total_score":{"type":"number","maximum":150.0,"minimum":0.0,"title":"Total Score"},"travel_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Travel Score"},"skill_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Skill Score"},"workload_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"Workload Score"},"history_score":{"type":"number","maximum":100.0,"minimum":0.0,"title":"History Score","default":0.0},"travel_time_minutes":{"type":"integer","title":"Travel Time Minutes"},"is_preferred":{"type":"boolean","title":"Is Preferred","default":false},"notes":{"type":"string","title":"Notes","default":""}},"type":"object","required":["chef_id","chef_name","total_score","travel_score","skill_score","workload_score","travel_time_minutes"],"title":"ChefScoreResponse","description":"Scored chef for assignment with detailed breakdown."},"ChefWeeklyAvailabilityResponse":{"properties":{"chef_id":{"type":"string","format":"uuid","title":"Chef Id"},"chef_name":{"type":"string","title":"Chef Name"},"slots":{"items":{"$ref":"#/components/schemas/ChefAvailabilityResponse"},"type":"array","title":"Slots"}},"type":"object","required":["chef_id","chef_name","slots"],"title":"ChefWeeklyAvailabilityResponse","description":"Full weekly availability schedule."},"CompareAllMethodsRequest":{"properties":{"base_amount":{"anyOf":[{"type":"number","exclusiveMinimum":0.0},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"}],"title":"Base Amount"},"tip_amount":{"anyOf":[{"type":"number","minimum":0.0},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"}],"title":"Tip Amount","default":0}},"type":"object","required":["base_amount"],"title":"CompareAllMethodsRequest","description":"Request to compare all payment methods"},"CompareAllMethodsResponse":{"properties":{"base_amount":{"type":"number","title":"Base Amount"},"tip_amount":{"type":"number","title":"Tip Amount"},"subtotal":{"type":"number","title":"Subtotal"},"methods":{"items":{"$ref":"#/components/schemas/PaymentMethodBreakdown"},"type":"array","title":"Methods"},"best_value":{"type":"string","title":"Best Value"},"fastest":{"type":"string","title":"Fastest"},"recommendation":{"type":"string","title":"Recommendation"}},"type":"object","required":["base_amount","tip_amount","subtotal","methods","best_value","fastest","recommendation"],"title":"CompareAllMethodsResponse","description":"Comparison of all 4 payment methods"},"ComponentHealth":{"properties":{"name":{"type":"string","title":"Name"},"status":{"type":"string","title":"Status"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"},"response_time_ms":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Response Time Ms"},"details":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Details"}},"type":"object","required":["name","status"],"title":"ComponentHealth","description":"Health status of a single component"},"ConfidenceTestRequest":{"properties":{"message":{"type":"string","title":"Message","description":"Test message"},"intent":{"type":"string","title":"Intent","description":"Intent category"}},"type":"object","required":["message","intent"],"title":"ConfidenceTestRequest","description":"Request to test confidence prediction"},"ConfirmPasswordResetRequest":{"properties":{"token":{"type":"string","title":"Token","description":"Password reset token from email link"},"new_password":{"type":"string","minLength":8,"title":"New Password","description":"New password (min 8 chars, must include upper, lower, number)"}},"type":"object","required":["token","new_password"],"title":"ConfirmPasswordResetRequest","description":"Request body for confirming password reset.","examples":[{"new_password":"NewSecurePass123!","token":"abc123xyz789..."}]},"ContactChannel":{"type":"string","enum":["email","sms","phone","whatsapp","in_app","instagram","facebook","google","yelp","web"],"title":"ContactChannel","description":"Contact method channels"},"ContactConfig":{"properties":{"business_phone":{"type":"string","title":"Business Phone","description":"Business phone number"},"business_email":{"type":"string","title":"Business Email","description":"Business email address"}},"type":"object","required":["business_phone","business_email"],"title":"ContactConfig","description":"Business contact information."},"ContactFormRequest":{"properties":{"name":{"type":"string","maxLength":200,"minLength":1,"title":"Name"},"email":{"type":"string","format":"email","title":"Email"},"phone":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Phone"},"preferred_communication":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Preferred Communication"},"subject":{"type":"string","maxLength":200,"minLength":1,"title":"Subject"},"message":{"type":"string","maxLength":5000,"minLength":1,"title":"Message"},"sms_consent":{"type":"boolean","title":"Sms Consent","default":false},"source":{"type":"string","maxLength":100,"title":"Source","default":"website_contact_form"}},"type":"object","required":["name","email","subject","message"],"title":"ContactFormRequest","description":"Contact form submission payload.\n\nMatches ContactForm.tsx frontend submission format."},"ContactFormResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"message":{"type":"string","title":"Message"},"lead_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Lead Id"}},"type":"object","required":["success","message"],"title":"ContactFormResponse","description":"Response after successful contact form submission."},"ConversionFunnel":{"properties":{"stages":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Stages"},"conversion_rates":{"additionalProperties":{"type":"number"},"type":"object","title":"Conversion Rates"},"drop_off_points":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Drop Off Points"},"avg_time_per_stage":{"additionalProperties":{"type":"number"},"type":"object","title":"Avg Time Per Stage"}},"type":"object","required":["stages","conversion_rates","drop_off_points","avg_time_per_stage"],"title":"ConversionFunnel","description":"Customer conversion funnel"},"CouponApplicationRequest":{"properties":{"coupon_code":{"type":"string","title":"Coupon Code","description":"Coupon code to apply"},"booking_id":{"type":"string","format":"uuid","title":"Booking Id","description":"Booking ID"}},"type":"object","required":["coupon_code","booking_id"],"title":"CouponApplicationRequest","description":"Request model for applying a coupon."},"CouponValidationRequest":{"properties":{"coupon_code":{"type":"string","title":"Coupon Code","description":"Coupon code to validate"},"customer_id":{"type":"string","format":"uuid","title":"Customer Id","description":"Customer ID"},"order_total_cents":{"type":"integer","title":"Order Total Cents","description":"Order total in cents"}},"type":"object","required":["coupon_code","customer_id","order_total_cents"],"title":"CouponValidationRequest","description":"Request model for validating a coupon."},"CreateBookingRequest":{"properties":{"customer_id":{"type":"integer","title":"Customer Id","description":"Customer ID"},"booking_datetime":{"type":"string","format":"date-time","title":"Booking Datetime","description":"Booking date and time"},"party_size":{"type":"integer","maximum":20.0,"minimum":1.0,"title":"Party Size","description":"Party size (1-20)"},"special_requests":{"anyOf":[{"type":"string","maxLength":1000},{"type":"null"}],"title":"Special Requests","description":"Special requests"},"contact_phone":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Contact Phone","description":"Contact phone"},"contact_email":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Contact Email","description":"Contact email"}},"type":"object","required":["customer_id","booking_datetime","party_size"],"title":"CreateBookingRequest","description":"Request model for creating a booking"},"CreateCustomerRequest":{"properties":{"first_name":{"type":"string","maxLength":100,"minLength":1,"title":"First Name","description":"First name"},"last_name":{"type":"string","maxLength":100,"minLength":1,"title":"Last Name","description":"Last name"},"email":{"type":"string","maxLength":255,"title":"Email","description":"Email address"},"phone":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Phone","description":"Phone number"},"dietary_preferences":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Dietary Preferences","description":"Dietary preferences"},"email_notifications":{"type":"boolean","title":"Email Notifications","description":"Email notifications preference","default":true},"sms_notifications":{"type":"boolean","title":"Sms Notifications","description":"SMS notifications preference","default":false}},"type":"object","required":["first_name","last_name","email"],"title":"CreateCustomerRequest","description":"Request model for creating a customer"},"CreateNegotiationRequest":{"properties":{"existing_booking_id":{"type":"string","format":"uuid","title":"Existing Booking Id"},"proposed_time":{"type":"string","format":"time","title":"Proposed Time"},"shift_minutes":{"type":"integer","title":"Shift Minutes","description":"Positive = later, negative = earlier"},"reason":{"$ref":"#/components/schemas/NegotiationReasonEnum"},"new_booking_request_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"New Booking Request Id"}},"type":"object","required":["existing_booking_id","proposed_time","shift_minutes","reason"],"title":"CreateNegotiationRequest","description":"Request to create a negotiation for time shift."},"CreateReferralRequest":{"properties":{"referrer_id":{"type":"integer","title":"Referrer Id"},"referee_email":{"type":"string","format":"email","title":"Referee Email"},"referee_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Referee Name"},"referee_phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Referee Phone"},"reward_amount":{"type":"number","title":"Reward Amount","default":50.0},"reward_type":{"type":"string","title":"Reward Type","default":"credit"}},"type":"object","required":["referrer_id","referee_email"],"title":"CreateReferralRequest","description":"Request model for creating a referral."},"CreateUserRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email","description":"User's email address"},"full_name":{"type":"string","maxLength":255,"minLength":1,"title":"Full Name","description":"Full name"},"password":{"anyOf":[{"type":"string","minLength":8},{"type":"null"}],"title":"Password","description":"Optional password. If not provided, sends invite email."},"is_super_admin":{"type":"boolean","title":"Is Super Admin","description":"Grant super admin privileges","default":false}},"type":"object","required":["email","full_name"],"title":"CreateUserRequest","description":"Request schema for creating a new admin user","example":{"email":"newadmin@company.com","full_name":"John Smith","is_super_admin":false,"password":"SecurePass123!"}},"CustomerAddressListResponse":{"properties":{"addresses":{"items":{"$ref":"#/components/schemas/AddressResponse"},"type":"array","title":"Addresses"},"count":{"type":"integer","title":"Count"}},"type":"object","required":["addresses","count"],"title":"CustomerAddressListResponse","description":"List of customer's saved addresses."},"CustomerBalanceResponse":{"properties":{"customer_id":{"type":"string","format":"uuid","title":"Customer Id"},"customer_name":{"type":"string","title":"Customer Name"},"customer_email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Email"},"customer_phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Phone"},"bookings":{"items":{"$ref":"#/components/schemas/BookingBalanceInfo"},"type":"array","title":"Bookings"},"total_balance_due_cents":{"type":"integer","title":"Total Balance Due Cents"},"total_travel_fee_cents":{"type":"integer","title":"Total Travel Fee Cents"},"tax_breakdown":{"$ref":"#/components/schemas/TaxBreakdownResponse"},"suggested_tips":{"$ref":"#/components/schemas/SuggestedTips"},"loyalty_tier":{"$ref":"#/components/schemas/LoyaltyTier"},"total_spent_cents":{"type":"integer","title":"Total Spent Cents"}},"type":"object","required":["customer_id","customer_name","bookings","total_balance_due_cents","total_travel_fee_cents","tax_breakdown","suggested_tips","loyalty_tier","total_spent_cents"],"title":"CustomerBalanceResponse","description":"Response model for customer balance lookup."},"CustomerCreate":{"properties":{"first_name":{"type":"string","maxLength":50,"minLength":1,"title":"First Name"},"last_name":{"type":"string","maxLength":50,"minLength":1,"title":"Last Name"},"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email"},"phone":{"anyOf":[{"type":"string","pattern":"^\\+?1?[2-9]\\d{2}[2-9]\\d{2}\\d{4}$"},{"type":"null"}],"title":"Phone"},"address_line1":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Address Line1"},"address_line2":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Address Line2"},"city":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"City"},"state":{"anyOf":[{"type":"string","maxLength":2},{"type":"null"}],"title":"State"},"zip_code":{"anyOf":[{"type":"string","pattern":"^\\d{5}(-\\d{4})?$"},{"type":"null"}],"title":"Zip Code"},"dietary_restrictions":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Dietary Restrictions"},"notes":{"anyOf":[{"type":"string","maxLength":1000},{"type":"null"}],"title":"Notes"},"status":{"$ref":"#/components/schemas/CustomerStatus","default":"active"},"sms_consent":{"type":"boolean","title":"Sms Consent","default":false},"email_consent":{"type":"boolean","title":"Email Consent","default":false}},"type":"object","required":["first_name","last_name"],"title":"CustomerCreate"},"CustomerDashboardResponse":{"properties":{"total_spent":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Total Spent"},"payment_count":{"type":"integer","title":"Payment Count"},"last_payment_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Payment Date"},"preferred_payment_method":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Preferred Payment Method"},"loyalty_tier":{"$ref":"#/components/schemas/LoyaltyTier"},"savings_from_zelle":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Savings From Zelle"},"recent_payments":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Recent Payments"}},"type":"object","required":["total_spent","payment_count","loyalty_tier","savings_from_zelle","recent_payments"],"title":"CustomerDashboardResponse","description":"Response model for customer payment dashboard."},"CustomerLookupRequest":{"properties":{"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone","description":"Customer phone number"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email","description":"Customer email address"}},"type":"object","title":"CustomerLookupRequest","description":"Request model for customer lookup by phone or email.","example":{"email":"customer@example.com","phone":"+19167408768"}},"CustomerResponse":{"properties":{"first_name":{"type":"string","maxLength":50,"minLength":1,"title":"First Name"},"last_name":{"type":"string","maxLength":50,"minLength":1,"title":"Last Name"},"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email"},"phone":{"anyOf":[{"type":"string","pattern":"^\\+?1?[2-9]\\d{2}[2-9]\\d{2}\\d{4}$"},{"type":"null"}],"title":"Phone"},"address_line1":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Address Line1"},"address_line2":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Address Line2"},"city":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"City"},"state":{"anyOf":[{"type":"string","maxLength":2},{"type":"null"}],"title":"State"},"zip_code":{"anyOf":[{"type":"string","pattern":"^\\d{5}(-\\d{4})?$"},{"type":"null"}],"title":"Zip Code"},"dietary_restrictions":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Dietary Restrictions"},"notes":{"anyOf":[{"type":"string","maxLength":1000},{"type":"null"}],"title":"Notes"},"status":{"$ref":"#/components/schemas/CustomerStatus","default":"active"},"id":{"type":"integer","title":"Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"total_bookings":{"type":"integer","title":"Total Bookings","default":0},"total_spent":{"type":"number","title":"Total Spent","default":0.0},"last_booking_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Booking Date"}},"type":"object","required":["first_name","last_name","id","created_at","updated_at"],"title":"CustomerResponse"},"CustomerSearchResponse":{"properties":{"customers":{"items":{"$ref":"#/components/schemas/CustomerResponse"},"type":"array","title":"Customers"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"per_page":{"type":"integer","title":"Per Page"},"total_pages":{"type":"integer","title":"Total Pages"}},"type":"object","required":["customers","total","page","per_page","total_pages"],"title":"CustomerSearchResponse"},"CustomerSegment":{"type":"string","enum":["all","families","event_planners","corporates","past_customers","inactive","vip"],"title":"CustomerSegment","description":"Customer segments."},"CustomerStatus":{"type":"string","enum":["active","inactive","blocked"],"title":"CustomerStatus"},"CustomerUpdate":{"properties":{"first_name":{"anyOf":[{"type":"string","maxLength":50,"minLength":1},{"type":"null"}],"title":"First Name"},"last_name":{"anyOf":[{"type":"string","maxLength":50,"minLength":1},{"type":"null"}],"title":"Last Name"},"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email"},"phone":{"anyOf":[{"type":"string","pattern":"^\\+?1?[2-9]\\d{2}[2-9]\\d{2}\\d{4}$"},{"type":"null"}],"title":"Phone"},"address_line1":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Address Line1"},"address_line2":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Address Line2"},"city":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"City"},"state":{"anyOf":[{"type":"string","maxLength":2},{"type":"null"}],"title":"State"},"zip_code":{"anyOf":[{"type":"string","pattern":"^\\d{5}(-\\d{4})?$"},{"type":"null"}],"title":"Zip Code"},"dietary_restrictions":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Dietary Restrictions"},"notes":{"anyOf":[{"type":"string","maxLength":1000},{"type":"null"}],"title":"Notes"},"status":{"anyOf":[{"$ref":"#/components/schemas/CustomerStatus"},{"type":"null"}]}},"type":"object","title":"CustomerUpdate"},"DashboardOverview":{"properties":{"leads":{"$ref":"#/components/schemas/routers__v1__admin_analytics__LeadAnalytics"},"newsletter":{"$ref":"#/components/schemas/routers__v1__admin_analytics__NewsletterAnalytics"},"sales":{"$ref":"#/components/schemas/SalesAnalytics"},"recent_activity":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Recent Activity"},"alerts":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Alerts"}},"type":"object","required":["leads","newsletter","sales","recent_activity","alerts"],"title":"DashboardOverview"},"DashboardSummaryResponse":{"properties":{"current_year":{"type":"integer","title":"Current Year"},"total_bookings":{"type":"integer","title":"Total Bookings"},"total_revenue":{"type":"number","title":"Total Revenue"},"avg_order_value":{"type":"number","title":"Avg Order Value"},"yoy_bookings_growth":{"anyOf":[{"type":"number"},{"type":"string"}],"title":"Yoy Bookings Growth"},"yoy_revenue_growth":{"anyOf":[{"type":"number"},{"type":"string"}],"title":"Yoy Revenue Growth"},"top_5_holidays":{"items":{"$ref":"#/components/schemas/PeakSeasonResponse"},"type":"array","title":"Top 5 Holidays"},"upcoming_holidays":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Upcoming Holidays"}},"type":"object","required":["current_year","total_bookings","total_revenue","avg_order_value","yoy_bookings_growth","yoy_revenue_growth","top_5_holidays","upcoming_holidays"],"title":"DashboardSummaryResponse","description":"High-level dashboard summary"},"DayOfWeek":{"type":"string","enum":["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],"title":"DayOfWeek","description":"Days of the week for scheduling."},"DeleteBookingResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether deletion was successful"},"message":{"type":"string","title":"Message","description":"Success message"},"booking_id":{"type":"string","title":"Booking Id","description":"Deleted booking ID"},"deleted_at":{"type":"string","title":"Deleted At","description":"Deletion timestamp (ISO 8601)"},"deleted_by":{"type":"string","title":"Deleted By","description":"User ID who performed deletion"},"restore_until":{"type":"string","title":"Restore Until","description":"Date until which booking can be restored (ISO 8601)"},"reason":{"type":"string","title":"Reason","description":"Reason for deletion"}},"type":"object","required":["success","message","booking_id","deleted_at","deleted_by","restore_until","reason"],"title":"DeleteBookingResponse","description":"Schema for delete booking response.","examples":[{"booking_id":"booking-abc123","deleted_at":"2025-10-28T15:30:00Z","deleted_by":"user-xyz789","message":"Booking deleted successfully","reason":"Customer requested cancellation","restore_until":"2025-11-27T15:30:00Z","success":true}]},"DepositConfig":{"properties":{"deposit_amount_cents":{"type":"integer","title":"Deposit Amount Cents","description":"Fixed deposit amount in cents"},"deposit_refundable_days":{"type":"integer","title":"Deposit Refundable Days","description":"Days before event for deposit to be refundable"}},"type":"object","required":["deposit_amount_cents","deposit_refundable_days"],"title":"DepositConfig","description":"Deposit configuration."},"DepositPolicy":{"properties":{"amount":{"type":"integer","title":"Amount","description":"Deposit amount in dollars"},"refund_days":{"type":"integer","title":"Refund Days","description":"Days before event for refund eligibility"},"text":{"type":"string","title":"Text","description":"Human-readable policy text"}},"type":"object","required":["amount","refund_days","text"],"title":"DepositPolicy","description":"Deposit policy with amount and human-readable text."},"DetailedHealthResponse":{"properties":{"status":{"type":"string","title":"Status","description":"Overall health status"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp","description":"Response timestamp"},"uptime_seconds":{"type":"number","title":"Uptime Seconds","description":"Service uptime"},"version":{"type":"string","title":"Version","description":"Service version"},"environment":{"type":"string","title":"Environment","description":"Environment name"},"services":{"additionalProperties":{"$ref":"#/components/schemas/ServiceHealthCheck"},"type":"object","title":"Services","description":"Service health checks"},"system":{"additionalProperties":true,"type":"object","title":"System","description":"System metrics"},"configuration":{"additionalProperties":true,"type":"object","title":"Configuration","description":"Configuration status"}},"type":"object","required":["status","timestamp","uptime_seconds","version","environment","services","system","configuration"],"title":"DetailedHealthResponse","description":"Comprehensive health check response.","example":{"configuration":{},"environment":"production","services":{},"status":"healthy","system":{},"timestamp":"2024-10-25T10:30:00Z","uptime_seconds":3600.5,"version":"2.0.0"}},"Email":{"properties":{"message_id":{"type":"string","title":"Message Id"},"thread_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Thread Id"},"from_address":{"type":"string","title":"From Address"},"from_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"From Name"},"to_address":{"type":"string","title":"To Address"},"to_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"To Name"},"cc":{"items":{"$ref":"#/components/schemas/EmailAddress"},"type":"array","title":"Cc"},"bcc":{"items":{"$ref":"#/components/schemas/EmailAddress"},"type":"array","title":"Bcc"},"subject":{"type":"string","title":"Subject"},"text_body":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Text Body"},"html_body":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Html Body"},"received_at":{"type":"string","format":"date-time","title":"Received At"},"is_read":{"type":"boolean","title":"Is Read","default":false},"is_starred":{"type":"boolean","title":"Is Starred","default":false},"is_archived":{"type":"boolean","title":"Is Archived","default":false},"has_attachments":{"type":"boolean","title":"Has Attachments","default":false},"attachments":{"items":{"$ref":"#/components/schemas/EmailAttachment"},"type":"array","title":"Attachments"},"labels":{"items":{"type":"string"},"type":"array","title":"Labels"}},"type":"object","required":["message_id","from_address","to_address","subject","received_at"],"title":"Email","description":"Single email message"},"EmailAddress":{"properties":{"email":{"type":"string","title":"Email"},"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"}},"type":"object","required":["email"],"title":"EmailAddress","description":"Email address with optional name"},"EmailApprovalRequest":{"properties":{"email_id":{"type":"string","title":"Email Id"},"edited_response":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Edited Response"},"add_cc":{"anyOf":[{"items":{"type":"string","format":"email"},"type":"array"},{"type":"null"}],"title":"Add Cc"},"add_bcc":{"anyOf":[{"items":{"type":"string","format":"email"},"type":"array"},{"type":"null"}],"title":"Add Bcc"},"schedule_send":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Schedule Send"},"reviewer_notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reviewer Notes"}},"type":"object","required":["email_id"],"title":"EmailApprovalRequest","description":"Request to approve and send email"},"EmailAttachment":{"properties":{"filename":{"type":"string","title":"Filename"},"content_type":{"type":"string","title":"Content Type"},"size_bytes":{"type":"integer","title":"Size Bytes"}},"type":"object","required":["filename","content_type","size_bytes"],"title":"EmailAttachment","description":"Email attachment metadata"},"EmailContentResponse":{"properties":{"subject":{"type":"string","title":"Subject"},"preview_text":{"type":"string","title":"Preview Text"},"body":{"type":"string","title":"Body"}},"type":"object","required":["subject","preview_text","body"],"title":"EmailContentResponse","description":"Email campaign content"},"EmailEditRequest":{"properties":{"email_id":{"type":"string","title":"Email Id"},"edited_subject":{"type":"string","title":"Edited Subject"},"edited_body":{"type":"string","title":"Edited Body"},"save_as_template":{"type":"boolean","title":"Save As Template","default":false},"template_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Template Name"}},"type":"object","required":["email_id","edited_subject","edited_body"],"title":"EmailEditRequest","description":"Request to edit AI-generated response"},"EmailListResponse":{"properties":{"inbox":{"type":"string","title":"Inbox"},"threads":{"items":{"$ref":"#/components/schemas/EmailThread"},"type":"array","title":"Threads"},"total_count":{"type":"integer","title":"Total Count"},"unread_count":{"type":"integer","title":"Unread Count"},"page":{"type":"integer","title":"Page"},"limit":{"type":"integer","title":"Limit"},"has_more":{"type":"boolean","title":"Has More"}},"type":"object","required":["inbox","threads","total_count","unread_count","page","limit","has_more"],"title":"EmailListResponse","description":"Paginated email list"},"EmailNotificationResponse":{"properties":{"email_id":{"type":"string","title":"Email Id"},"provider":{"type":"string","title":"Provider"},"amount":{"type":"number","title":"Amount"},"status":{"type":"string","title":"Status"},"subject":{"type":"string","title":"Subject"},"from":{"type":"string","title":"From"},"received_at":{"type":"string","title":"Received At"},"transaction_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Transaction Id"},"sender_username":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sender Username"},"sender_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sender Name"},"payment_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Payment Type"},"parsed_at":{"type":"string","title":"Parsed At"}},"type":"object","required":["email_id","provider","amount","status","subject","from","received_at","parsed_at"],"title":"EmailNotificationResponse","description":"Payment email notification details"},"EmailQuoteRequest":{"properties":{"customerEmail":{"type":"string","title":"Customeremail","description":"Customer email address"},"customerName":{"type":"string","title":"Customername","description":"Customer name"},"customerPhone":{"type":"string","title":"Customerphone","description":"Customer phone number","default":""},"adults":{"type":"integer","minimum":0.0,"title":"Adults","description":"Number of adults"},"children":{"type":"integer","minimum":0.0,"title":"Children","description":"Number of children","default":0},"venueAddress":{"type":"string","title":"Venueaddress","description":"Venue address","default":""},"venueCity":{"type":"string","title":"Venuecity","description":"Venue city","default":""},"venueZipcode":{"type":"string","title":"Venuezipcode","description":"Venue ZIP code","default":""},"baseTotal":{"type":"number","minimum":0.0,"title":"Basetotal","description":"Base price total"},"upgradeTotal":{"type":"number","minimum":0.0,"title":"Upgradetotal","description":"Upgrades total","default":0},"travelFee":{"type":"number","minimum":0.0,"title":"Travelfee","description":"Travel fee","default":0},"grandTotal":{"type":"number","minimum":0.0,"title":"Grandtotal","description":"Grand total"},"depositRequired":{"type":"number","minimum":0.0,"title":"Depositrequired","description":"Deposit required","default":100},"salmon":{"type":"integer","minimum":0.0,"title":"Salmon","default":0},"scallops":{"type":"integer","minimum":0.0,"title":"Scallops","default":0},"filetMignon":{"type":"integer","minimum":0.0,"title":"Filetmignon","default":0},"lobsterTail":{"type":"integer","minimum":0.0,"title":"Lobstertail","default":0},"extraProteins":{"type":"integer","minimum":0.0,"title":"Extraproteins","default":0},"yakisobaNoodles":{"type":"integer","minimum":0.0,"title":"Yakisobanoodles","default":0},"extraFriedRice":{"type":"integer","minimum":0.0,"title":"Extrafriedrice","default":0},"extraVegetables":{"type":"integer","minimum":0.0,"title":"Extravegetables","default":0},"edamame":{"type":"integer","minimum":0.0,"title":"Edamame","default":0},"gyoza":{"type":"integer","minimum":0.0,"title":"Gyoza","default":0}},"type":"object","required":["customerEmail","customerName","adults","baseTotal","grandTotal"],"title":"EmailQuoteRequest","description":"Schema for emailing a quote to customer."},"EmailQuoteResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Whether email was sent successfully"},"message":{"type":"string","title":"Message","description":"Success or error message"}},"type":"object","required":["success","message"],"title":"EmailQuoteResponse","description":"Response for email quote endpoint."},"EmailRejectRequest":{"properties":{"email_id":{"type":"string","title":"Email Id"},"reason":{"type":"string","title":"Reason"},"assign_to_human":{"type":"boolean","title":"Assign To Human","default":true},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"}},"type":"object","required":["email_id","reason"],"title":"EmailRejectRequest","description":"Request to reject AI response"},"EmailStats":{"properties":{"inbox":{"type":"string","title":"Inbox"},"total_emails":{"type":"integer","title":"Total Emails"},"unread_emails":{"type":"integer","title":"Unread Emails"},"starred_emails":{"type":"integer","title":"Starred Emails"},"archived_emails":{"type":"integer","title":"Archived Emails"},"today_count":{"type":"integer","title":"Today Count"},"week_count":{"type":"integer","title":"Week Count"}},"type":"object","required":["inbox","total_emails","unread_emails","starred_emails","archived_emails","today_count","week_count"],"title":"EmailStats","description":"Email inbox statistics"},"EmailStatus":{"type":"string","enum":["pending","approved","sent","rejected","edited"],"title":"EmailStatus","description":"Email response status"},"EmailThread":{"properties":{"thread_id":{"type":"string","title":"Thread Id"},"subject":{"type":"string","title":"Subject"},"participants":{"items":{"$ref":"#/components/schemas/EmailAddress"},"type":"array","title":"Participants"},"messages":{"items":{"$ref":"#/components/schemas/Email"},"type":"array","title":"Messages"},"message_count":{"type":"integer","title":"Message Count"},"unread_count":{"type":"integer","title":"Unread Count"},"last_message_at":{"type":"string","format":"date-time","title":"Last Message At"},"is_read":{"type":"boolean","title":"Is Read"},"is_starred":{"type":"boolean","title":"Is Starred"},"is_archived":{"type":"boolean","title":"Is Archived"},"labels":{"items":{"type":"string"},"type":"array","title":"Labels"}},"type":"object","required":["thread_id","subject","participants","messages","message_count","unread_count","last_message_at","is_read","is_starred","is_archived"],"title":"EmailThread","description":"Email conversation thread (Gmail-style)"},"EngagementTrends":{"properties":{"daily_active_users":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Daily Active Users"},"page_views":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Page Views"},"interaction_rate":{"type":"number","title":"Interaction Rate"},"popular_features":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Popular Features"},"engagement_by_channel":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Engagement By Channel"}},"type":"object","required":["daily_active_users","page_views","interaction_rate","popular_features","engagement_by_channel"],"title":"EngagementTrends","description":"Customer engagement trends"},"EnrollLeadRequest":{"properties":{"lead_id":{"type":"integer","title":"Lead Id"},"campaign_type":{"$ref":"#/components/schemas/CampaignType"},"personalization":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Personalization"},"skip_if_enrolled":{"type":"boolean","title":"Skip If Enrolled","default":true}},"type":"object","required":["lead_id","campaign_type"],"title":"EnrollLeadRequest","description":"Request model for enrolling a lead in a campaign."},"ErrorLogDetailResponse":{"properties":{"id":{"type":"integer","title":"Id"},"correlation_id":{"type":"string","title":"Correlation Id"},"timestamp":{"type":"string","title":"Timestamp"},"method":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Method"},"path":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Path"},"client_ip":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Ip"},"user_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"User Id"},"user_role":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Role"},"error_type":{"type":"string","title":"Error Type"},"error_message":{"type":"string","title":"Error Message"},"status_code":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Status Code"},"response_time_ms":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Response Time Ms"},"level":{"type":"string","title":"Level"},"resolved":{"type":"boolean","title":"Resolved"},"resolved_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Resolved At"},"resolved_by":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Resolved By"},"resolution_notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Resolution Notes"},"error_traceback":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Traceback"},"request_body":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Request Body"},"request_headers":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Request Headers"},"user_agent":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Agent"}},"type":"object","required":["id","correlation_id","timestamp","method","path","client_ip","user_id","user_role","error_type","error_message","status_code","response_time_ms","level","resolved","resolved_at","resolved_by","resolution_notes","error_traceback","request_body","request_headers","user_agent"],"title":"ErrorLogDetailResponse","description":"Detailed error log with full traceback"},"ErrorLogResponse":{"properties":{"id":{"type":"integer","title":"Id"},"correlation_id":{"type":"string","title":"Correlation Id"},"timestamp":{"type":"string","title":"Timestamp"},"method":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Method"},"path":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Path"},"client_ip":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Ip"},"user_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"User Id"},"user_role":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Role"},"error_type":{"type":"string","title":"Error Type"},"error_message":{"type":"string","title":"Error Message"},"status_code":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Status Code"},"response_time_ms":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Response Time Ms"},"level":{"type":"string","title":"Level"},"resolved":{"type":"boolean","title":"Resolved"},"resolved_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Resolved At"},"resolved_by":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Resolved By"},"resolution_notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Resolution Notes"}},"type":"object","required":["id","correlation_id","timestamp","method","path","client_ip","user_id","user_role","error_type","error_message","status_code","response_time_ms","level","resolved","resolved_at","resolved_by","resolution_notes"],"title":"ErrorLogResponse","description":"Error log response model"},"ErrorStatsResponse":{"properties":{"total_errors":{"type":"integer","title":"Total Errors"},"unresolved_errors":{"type":"integer","title":"Unresolved Errors"},"errors_last_hour":{"type":"integer","title":"Errors Last Hour"},"errors_last_24h":{"type":"integer","title":"Errors Last 24H"},"errors_by_level":{"additionalProperties":true,"type":"object","title":"Errors By Level"},"errors_by_type":{"additionalProperties":true,"type":"object","title":"Errors By Type"},"errors_by_path":{"additionalProperties":true,"type":"object","title":"Errors By Path"},"top_error_users":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Top Error Users"},"average_response_time_ms":{"type":"number","title":"Average Response Time Ms"}},"type":"object","required":["total_errors","unresolved_errors","errors_last_hour","errors_last_24h","errors_by_level","errors_by_type","errors_by_path","top_error_users","average_response_time_ms"],"title":"ErrorStatsResponse","description":"Error statistics response"},"EscalationAssignRequest":{"properties":{"admin_id":{"type":"string","title":"Admin Id","description":"ID of admin to assign to"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes","description":"Assignment notes"}},"type":"object","required":["admin_id"],"title":"EscalationAssignRequest","description":"Request to assign escalation to an admin"},"EscalationCreateRequest":{"properties":{"conversation_id":{"type":"string","title":"Conversation Id","description":"ID of the conversation to escalate"},"phone":{"type":"string","maxLength":20,"minLength":10,"title":"Phone","description":"Customer phone number"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email","description":"Customer email (optional)"},"preferred_method":{"type":"string","title":"Preferred Method","description":"Preferred contact method: sms, call, or email","default":"sms"},"reason":{"type":"string","maxLength":1000,"minLength":10,"title":"Reason","description":"Reason for escalation"},"priority":{"type":"string","title":"Priority","description":"Priority level: low, medium, high, urgent","default":"medium"},"customer_consent":{"type":"boolean","title":"Customer Consent","description":"Customer consent to receive SMS/calls","default":true},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Additional context"}},"type":"object","required":["conversation_id","phone","reason"],"title":"EscalationCreateRequest","description":"Request to create a new escalation","example":{"conversation_id":"550e8400-e29b-41d4-a716-446655440000","customer_consent":true,"email":"customer@example.com","metadata":{"booking_id":"booking-123","issue_type":"booking_modification"},"phone":"+1-555-0100","preferred_method":"sms","priority":"high","reason":"Need immediate assistance with booking modification for tomorrow"}},"EscalationListRequest":{"properties":{"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status","description":"Filter by status"},"priority":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Priority","description":"Filter by priority"},"assigned_to_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assigned To Id","description":"Filter by assigned admin"},"from_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"From Date","description":"Filter from date"},"to_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"To Date","description":"Filter to date"},"page":{"type":"integer","minimum":1.0,"title":"Page","description":"Page number","default":1},"page_size":{"type":"integer","maximum":100.0,"minimum":1.0,"title":"Page Size","description":"Items per page","default":20}},"type":"object","title":"EscalationListRequest","description":"Request to list escalations with filters"},"EscalationListResponse":{"properties":{"escalations":{"items":{"$ref":"#/components/schemas/EscalationResponse"},"type":"array","title":"Escalations"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"page_size":{"type":"integer","title":"Page Size"},"has_more":{"type":"boolean","title":"Has More"}},"type":"object","required":["escalations","total","page","page_size","has_more"],"title":"EscalationListResponse","description":"Response for list escalations"},"EscalationResolveRequest":{"properties":{"resolution_notes":{"type":"string","minLength":10,"title":"Resolution Notes","description":"Resolution notes"},"resume_ai":{"type":"boolean","title":"Resume Ai","description":"Resume AI conversation after resolution","default":true}},"type":"object","required":["resolution_notes"],"title":"EscalationResolveRequest","description":"Request to resolve an escalation"},"EscalationResponse":{"properties":{"id":{"type":"string","title":"Id"},"conversation_id":{"type":"string","title":"Conversation Id"},"customer_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Id"},"phone":{"type":"string","title":"Phone"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"preferred_method":{"type":"string","title":"Preferred Method"},"reason":{"type":"string","title":"Reason"},"priority":{"type":"string","title":"Priority"},"status":{"type":"string","title":"Status"},"assigned_to_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assigned To Id"},"assigned_to":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assigned To"},"resolved_by_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Resolved By Id"},"resolved_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Resolved By"},"resolution_notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Resolution Notes"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata"},"tags":{"items":{},"type":"array","title":"Tags"},"created_at":{"type":"string","title":"Created At"},"updated_at":{"type":"string","title":"Updated At"},"resolved_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Resolved At"}},"type":"object","required":["id","conversation_id","customer_id","phone","email","preferred_method","reason","priority","status","assigned_to_id","assigned_to","resolved_by_id","resolved_by","resolution_notes","error_message","metadata","tags","created_at","updated_at","resolved_at"],"title":"EscalationResponse","description":"Response for escalation operations"},"EscalationStatsResponse":{"properties":{"total_escalations":{"type":"integer","title":"Total Escalations"},"pending":{"type":"integer","title":"Pending"},"assigned":{"type":"integer","title":"Assigned"},"in_progress":{"type":"integer","title":"In Progress"},"resolved":{"type":"integer","title":"Resolved"},"closed":{"type":"integer","title":"Closed"},"error":{"type":"integer","title":"Error"},"average_resolution_time_hours":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Average Resolution Time Hours"},"escalations_today":{"type":"integer","title":"Escalations Today"},"escalations_this_week":{"type":"integer","title":"Escalations This Week"}},"type":"object","required":["total_escalations","pending","assigned","in_progress","resolved","closed","error","average_resolution_time_hours","escalations_today","escalations_this_week"],"title":"EscalationStatsResponse","description":"Statistics about escalations"},"EventDurationRequest":{"properties":{"guest_count":{"type":"integer","maximum":100.0,"minimum":1.0,"title":"Guest Count"}},"type":"object","required":["guest_count"],"title":"EventDurationRequest","description":"Request to calculate event duration."},"EventDurationResponse":{"properties":{"guest_count":{"type":"integer","title":"Guest Count"},"duration_minutes":{"type":"integer","title":"Duration Minutes"},"duration_formula":{"type":"string","title":"Duration Formula","default":""}},"type":"object","required":["guest_count","duration_minutes"],"title":"EventDurationResponse","description":"Response with calculated duration."},"EventSubscriptionRequest":{"properties":{"event_type":{"type":"string","title":"Event Type"},"priority_filter":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Priority Filter"},"custom_filters":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Custom Filters"}},"type":"object","required":["event_type"],"title":"EventSubscriptionRequest","description":"Request to add event subscription"},"ExternalReviewTrackingRequest":{"properties":{"platform":{"type":"string","title":"Platform","description":"Platform: yelp or google"}},"type":"object","required":["platform"],"title":"ExternalReviewTrackingRequest","description":"Request model for tracking external reviews."},"FacebookContentResponse":{"properties":{"post_text":{"type":"string","title":"Post Text"},"image_prompt":{"type":"string","title":"Image Prompt"},"cta":{"type":"string","title":"Cta"},"targeting":{"type":"string","title":"Targeting"}},"type":"object","required":["post_text","image_prompt","cta","targeting"],"title":"FacebookContentResponse","description":"Facebook campaign content"},"GeocodeStationResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"station_id":{"type":"string","title":"Station Id"},"lat":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Lat"},"lng":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Lng"},"geocode_status":{"type":"string","title":"Geocode Status"},"geocoded_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Geocoded At"},"full_address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Full Address"},"message":{"type":"string","title":"Message"}},"type":"object","required":["success","station_id","geocode_status","message"],"title":"GeocodeStationResponse","description":"Response model for geocoding a station."},"GeocodedAddressResponse":{"properties":{"original_address":{"type":"string","title":"Original Address"},"formatted_address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Formatted Address","description":"Normalized address from geocoder"},"lat":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Lat"},"lng":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Lng"},"city":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"City"},"state":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"State"},"zip_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Zip Code"},"is_valid":{"type":"boolean","title":"Is Valid"},"confidence":{"type":"number","maximum":1.0,"minimum":0.0,"title":"Confidence","default":0.0}},"type":"object","required":["original_address","lat","lng","city","state","zip_code","is_valid"],"title":"GeocodedAddressResponse","description":"Response from geocoding endpoint."},"GoogleAdsContentResponse":{"properties":{"headlines":{"items":{"type":"string"},"type":"array","title":"Headlines"},"descriptions":{"items":{"type":"string"},"type":"array","title":"Descriptions"},"keywords":{"items":{"type":"string"},"type":"array","title":"Keywords"},"display_url":{"type":"string","title":"Display Url"}},"type":"object","required":["headlines","descriptions","keywords","display_url"],"title":"GoogleAdsContentResponse","description":"Google Ads campaign content"},"GroupCreateRequest":{"properties":{"name":{"type":"string","maxLength":100,"minLength":3,"title":"Name"},"description":{"type":"string","minLength":10,"title":"Description"},"station_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Station Id","description":"Station ID (null = all stations)"},"event_types":{"items":{"type":"string"},"type":"array","title":"Event Types","description":"Event types to subscribe to","default":["all"]}},"type":"object","required":["name","description"],"title":"GroupCreateRequest","description":"Request to create a new notification group"},"GroupResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"name":{"type":"string","title":"Name"},"description":{"type":"string","title":"Description"},"station_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Station Id"},"is_active":{"type":"boolean","title":"Is Active"},"member_count":{"type":"integer","title":"Member Count"},"event_count":{"type":"integer","title":"Event Count"},"created_at":{"type":"string","title":"Created At"}},"type":"object","required":["id","name","description","station_id","is_active","member_count","event_count","created_at"],"title":"GroupResponse","description":"Response model for notification group"},"GroupUpdateRequest":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":100,"minLength":3},{"type":"null"}],"title":"Name"},"description":{"anyOf":[{"type":"string","minLength":10},{"type":"null"}],"title":"Description"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},"type":"object","title":"GroupUpdateRequest","description":"Request to update a notification group"},"GuestLimitsConfig":{"properties":{"minimum":{"type":"integer","title":"Minimum","description":"Minimum guest count","default":1},"maximum":{"type":"integer","title":"Maximum","description":"Maximum guest count","default":100},"minimum_for_hibachi":{"type":"integer","title":"Minimum For Hibachi","description":"Minimum guests for standard hibachi","default":10}},"type":"object","title":"GuestLimitsConfig","description":"Guest count limits."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HandleResponseRequest":{"properties":{"lead_id":{"type":"integer","title":"Lead Id"},"response_type":{"type":"string","title":"Response Type"},"response_data":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Response Data"}},"type":"object","required":["lead_id","response_type"],"title":"HandleResponseRequest","description":"Request model for handling campaign response."},"HoldInfoResponse":{"properties":{"id":{"type":"string","title":"Id"},"station_id":{"type":"string","title":"Station Id"},"station_name":{"type":"string","title":"Station Name"},"slot_datetime":{"type":"string","title":"Slot Datetime"},"customer_email":{"type":"string","title":"Customer Email"},"expires_at":{"type":"string","title":"Expires At"},"status":{"type":"string","title":"Status"},"agreement_signed":{"type":"boolean","title":"Agreement Signed"},"deposit_paid":{"type":"boolean","title":"Deposit Paid"}},"type":"object","required":["id","station_id","station_name","slot_datetime","customer_email","expires_at","status","agreement_signed","deposit_paid"],"title":"HoldInfoResponse","description":"Hold info for signing page - matches frontend HoldInfo interface."},"HolidayForecastResponse":{"properties":{"holiday_key":{"type":"string","title":"Holiday Key"},"holiday_name":{"type":"string","title":"Holiday Name"},"year":{"type":"integer","title":"Year"},"forecasted_bookings":{"type":"integer","title":"Forecasted Bookings"},"forecasted_revenue":{"type":"number","title":"Forecasted Revenue"},"confidence_level":{"type":"string","title":"Confidence Level"},"based_on_years":{"type":"integer","title":"Based On Years"},"growth_trend":{"type":"string","title":"Growth Trend"},"recommendations":{"items":{"type":"string"},"type":"array","title":"Recommendations"}},"type":"object","required":["holiday_key","holiday_name","year","forecasted_bookings","forecasted_revenue","confidence_level","based_on_years","growth_trend","recommendations"],"title":"HolidayForecastResponse","description":"Forecast for specific holiday"},"HolidayTrendResponse":{"properties":{"holiday_key":{"type":"string","title":"Holiday Key"},"holiday_name":{"type":"string","title":"Holiday Name"},"holiday_date":{"type":"string","title":"Holiday Date"},"booking_count":{"type":"integer","title":"Booking Count"},"total_revenue":{"type":"number","title":"Total Revenue"},"avg_order_value":{"type":"number","title":"Avg Order Value"},"top_event_types":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Top Event Types"},"yoy_growth_percentage":{"anyOf":[{"type":"number"},{"type":"string"}],"title":"Yoy Growth Percentage"},"previous_year_bookings":{"anyOf":[{"type":"integer"},{"type":"string"}],"title":"Previous Year Bookings"},"previous_year_revenue":{"anyOf":[{"type":"number"},{"type":"string"}],"title":"Previous Year Revenue"}},"type":"object","required":["holiday_key","holiday_name","holiday_date","booking_count","total_revenue","avg_order_value","top_event_types","yoy_growth_percentage","previous_year_bookings","previous_year_revenue"],"title":"HolidayTrendResponse","description":"Single holiday performance metrics"},"InboxStats":{"properties":{"total_threads":{"type":"integer","title":"Total Threads","default":0},"open_threads":{"type":"integer","title":"Open Threads","default":0},"pending_threads":{"type":"integer","title":"Pending Threads","default":0},"unread_messages":{"type":"integer","title":"Unread Messages","default":0},"avg_response_time_minutes":{"type":"number","title":"Avg Response Time Minutes","default":0.0},"channels":{"additionalProperties":{"type":"integer"},"type":"object","title":"Channels","default":{}}},"type":"object","title":"InboxStats"},"InquiryAnalysis":{"properties":{"message":{"type":"string","title":"Message","description":"Message to analyze"},"channel":{"type":"string","title":"Channel","description":"Channel context","default":"email"}},"type":"object","required":["message"],"title":"InquiryAnalysis","description":"Request to analyze inquiry without generating response."},"InstagramContentResponse":{"properties":{"caption":{"type":"string","title":"Caption"},"hashtags":{"items":{"type":"string"},"type":"array","title":"Hashtags"},"image_prompt":{"type":"string","title":"Image Prompt"},"story_text":{"type":"string","title":"Story Text"}},"type":"object","required":["caption","hashtags","image_prompt","story_text"],"title":"InstagramContentResponse","description":"Instagram campaign content"},"InvoiceListResponse":{"properties":{"invoices":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Invoices"},"total":{"type":"integer","title":"Total"},"has_more":{"type":"boolean","title":"Has More"},"next_cursor":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Next Cursor"}},"type":"object","required":["invoices","total","has_more"],"title":"InvoiceListResponse","description":"Response model for paginated invoice list."},"InvoiceStatus":{"type":"string","enum":["draft","open","paid","uncollectible","void"],"title":"InvoiceStatus","description":"Invoice status workflow - Stripe-aligned.\n\nValues:\n    DRAFT: Invoice created but not finalized\n    OPEN: Invoice sent, awaiting payment\n    PAID: Invoice fully paid\n    UNCOLLECTIBLE: Invoice marked as uncollectible\n    VOID: Invoice voided/cancelled"},"LabelCreate":{"properties":{"name":{"type":"string","maxLength":100,"minLength":1,"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"color":{"type":"string","pattern":"^#[0-9A-Fa-f]{6}$","title":"Color","default":"#6B7280"},"icon":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Icon"}},"type":"object","required":["name"],"title":"LabelCreate","description":"Create new email label"},"LabelResponse":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name"},"slug":{"type":"string","title":"Slug"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"color":{"type":"string","title":"Color"},"icon":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Icon"},"is_system":{"type":"boolean","title":"Is System"},"is_archived":{"type":"boolean","title":"Is Archived"},"email_count":{"type":"integer","title":"Email Count"},"sort_order":{"type":"integer","title":"Sort Order"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","name","slug","description","color","icon","is_system","is_archived","email_count","sort_order","created_at","updated_at"],"title":"LabelResponse","description":"Label response"},"LabelUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":100,"minLength":1},{"type":"null"}],"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"color":{"anyOf":[{"type":"string","pattern":"^#[0-9A-Fa-f]{6}$"},{"type":"null"}],"title":"Color"},"icon":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Icon"},"is_archived":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Archived"},"sort_order":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Sort Order"}},"type":"object","title":"LabelUpdate","description":"Update existing label"},"LeadContactCreate":{"properties":{"channel":{"$ref":"#/components/schemas/ContactChannel"},"handle_or_address":{"type":"string","title":"Handle Or Address"},"verified":{"type":"boolean","title":"Verified","default":false}},"type":"object","required":["channel","handle_or_address"],"title":"LeadContactCreate"},"LeadContextCreate":{"properties":{"party_size_adults":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Party Size Adults"},"party_size_kids":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Party Size Kids"},"estimated_budget_dollars":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Estimated Budget Dollars"},"event_date_pref":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Event Date Pref"},"event_date_range_start":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Event Date Range Start"},"event_date_range_end":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Event Date Range End"},"zip_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Zip Code"},"service_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Service Type"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"}},"type":"object","title":"LeadContextCreate"},"LeadDetailResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"source":{"$ref":"#/components/schemas/LeadSource"},"status":{"$ref":"#/components/schemas/LeadStatus"},"quality":{"anyOf":[{"$ref":"#/components/schemas/LeadQuality"},{"type":"null"}]},"score":{"type":"number","title":"Score"},"assigned_to":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assigned To"},"last_contact_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Contact Date"},"follow_up_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Follow Up Date"},"conversion_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Conversion Date"},"lost_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lost Reason"},"utm_source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Utm Source"},"utm_medium":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Utm Medium"},"utm_campaign":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Utm Campaign"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"contacts":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Contacts"},"context":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Context"},"events":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Events"}},"type":"object","required":["id","source","status","quality","score","assigned_to","last_contact_date","follow_up_date","conversion_date","lost_reason","utm_source","utm_medium","created_at","updated_at","contacts","context","events"],"title":"LeadDetailResponse"},"LeadEventCreate":{"properties":{"event_type":{"type":"string","title":"Event Type"},"payload":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Payload"}},"type":"object","required":["event_type"],"title":"LeadEventCreate","description":"Request model for adding an event to a lead's funnel tracking."},"LeadEventResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"lead_id":{"type":"string","format":"uuid","title":"Lead Id"},"event_type":{"type":"string","title":"Event Type"},"payload":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Payload"},"occurred_at":{"type":"string","format":"date-time","title":"Occurred At"}},"type":"object","required":["id","lead_id","event_type","payload","occurred_at"],"title":"LeadEventResponse","description":"Response model for lead events."},"LeadPipelineStats":{"properties":{"new":{"type":"integer","title":"New","default":0},"contacted":{"type":"integer","title":"Contacted","default":0},"qualified":{"type":"integer","title":"Qualified","default":0},"quoted":{"type":"integer","title":"Quoted","default":0},"negotiating":{"type":"integer","title":"Negotiating","default":0},"won":{"type":"integer","title":"Won","default":0},"lost":{"type":"integer","title":"Lost","default":0},"total_value":{"type":"number","title":"Total Value","default":0.0},"conversion_rate":{"type":"number","title":"Conversion Rate","default":0.0}},"type":"object","title":"LeadPipelineStats"},"LeadQuality":{"type":"string","enum":["hot","warm","cold"],"title":"LeadQuality","description":"Lead temperature/quality (hot/warm/cold)"},"LeadScoring":{"properties":{"score_distribution":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Score Distribution"},"high_value_leads":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"High Value Leads"},"scoring_factors":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Scoring Factors"},"conversion_by_score":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Conversion By Score"}},"type":"object","required":["score_distribution","high_value_leads","scoring_factors","conversion_by_score"],"title":"LeadScoring","description":"Lead scoring analytics"},"LeadSearchResponse":{"properties":{"leads":{"items":{"$ref":"#/components/schemas/api__v1__endpoints__leads__LeadResponse"},"type":"array","title":"Leads"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"per_page":{"type":"integer","title":"Per Page"},"total_pages":{"type":"integer","title":"Total Pages"}},"type":"object","required":["leads","total","page","per_page","total_pages"],"title":"LeadSearchResponse"},"LeadSource":{"type":"string","enum":["web_quote","website","chat","instagram","facebook","google","yelp","sms","phone","referral","event"],"title":"LeadSource","description":"Where the lead originated"},"LeadStatus":{"type":"string","enum":["new","working","qualified","disqualified","converted","nurturing"],"title":"LeadStatus","description":"Lead workflow status"},"LivenessResponse":{"properties":{"status":{"type":"string","title":"Status","description":"Service liveness status","default":"alive"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp","description":"Response timestamp"},"uptime_seconds":{"type":"number","title":"Uptime Seconds","description":"Service uptime in seconds"},"pid":{"type":"integer","title":"Pid","description":"Process ID"}},"type":"object","required":["timestamp","uptime_seconds","pid"],"title":"LivenessResponse","description":"Kubernetes liveness probe response.","example":{"pid":12345,"status":"alive","timestamp":"2024-10-25T10:30:00Z","uptime_seconds":3600.5}},"LoyaltyTier":{"type":"string","enum":["new","silver","gold","vip"],"title":"LoyaltyTier","description":"Customer loyalty tier based on total spending."},"MFAStatusResponse":{"properties":{"mfa_setup_complete":{"type":"boolean","title":"Mfa Setup Complete"},"has_webauthn":{"type":"boolean","title":"Has Webauthn"},"webauthn_device_count":{"type":"integer","title":"Webauthn Device Count"},"has_pin":{"type":"boolean","title":"Has Pin"},"pin_reset_required":{"type":"boolean","title":"Pin Reset Required"}},"type":"object","required":["mfa_setup_complete","has_webauthn","webauthn_device_count","has_pin","pin_reset_required"],"title":"MFAStatusResponse","description":"Response for MFA status check"},"MFAVerifiedResponse":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"},"expires_in":{"type":"integer","title":"Expires In"},"user":{"additionalProperties":true,"type":"object","title":"User"},"mfa_verified":{"type":"boolean","title":"Mfa Verified","default":true}},"type":"object","required":["access_token","expires_in","user"],"title":"MFAVerifiedResponse","description":"Response after successful MFA verification"},"ManualMatchRequest":{"properties":{"email_id":{"type":"string","title":"Email Id","description":"Email ID from notification"},"payment_id":{"type":"string","title":"Payment Id","description":"Payment ID to match"},"confirm_payment":{"type":"boolean","title":"Confirm Payment","description":"Confirm payment after matching","default":true}},"type":"object","required":["email_id","payment_id"],"title":"ManualMatchRequest","description":"Manually match email notification to payment"},"ManualMatchResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"payment_id":{"type":"string","title":"Payment Id"},"booking_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Booking Id"},"message":{"type":"string","title":"Message"}},"type":"object","required":["success","payment_id","booking_id","message"],"title":"ManualMatchResponse","description":"Manual match result"},"MarketingChannel":{"type":"string","enum":["email","sms","facebook","instagram","google_ads","tiktok"],"title":"MarketingChannel","description":"Marketing channels."},"MemberAddRequest":{"properties":{"phone_number":{"type":"string","pattern":"^\\+?[1-9]\\d{1,14}$","title":"Phone Number"},"name":{"type":"string","maxLength":100,"minLength":2,"title":"Name"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"user_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"User Id"},"receive_whatsapp":{"type":"boolean","title":"Receive Whatsapp","default":true},"receive_sms":{"type":"boolean","title":"Receive Sms","default":false},"receive_email":{"type":"boolean","title":"Receive Email","default":false}},"type":"object","required":["phone_number","name"],"title":"MemberAddRequest","description":"Request to add a member to a group"},"MemberResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"name":{"type":"string","title":"Name"},"phone_number":{"type":"string","title":"Phone Number"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"is_active":{"type":"boolean","title":"Is Active"},"receive_whatsapp":{"type":"boolean","title":"Receive Whatsapp"},"receive_sms":{"type":"boolean","title":"Receive Sms"},"receive_email":{"type":"boolean","title":"Receive Email"},"joined_at":{"type":"string","title":"Joined At"}},"type":"object","required":["id","name","phone_number","email","is_active","receive_whatsapp","receive_sms","receive_email","joined_at"],"title":"MemberResponse","description":"Response model for group member"},"MemberUpdateRequest":{"properties":{"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"},"receive_whatsapp":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Receive Whatsapp"},"receive_sms":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Receive Sms"},"receive_email":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Receive Email"}},"type":"object","title":"MemberUpdateRequest","description":"Request to update member preferences"},"MenuItemCreate":{"properties":{"name":{"type":"string","maxLength":200,"minLength":1,"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"price":{"type":"number","minimum":0.0,"title":"Price"},"category":{"type":"string","pattern":"^(base_pricing|protein|side)$","title":"Category"},"is_included":{"type":"boolean","title":"Is Included","default":false},"is_active":{"type":"boolean","title":"Is Active","default":true},"display_order":{"type":"integer","minimum":0.0,"title":"Display Order","default":0}},"type":"object","required":["name","price","category"],"title":"MenuItemCreate","description":"Schema for creating a menu item"},"MenuItemResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"name":{"type":"string","title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"price":{"type":"number","title":"Price"},"category":{"type":"string","title":"Category"},"is_included":{"type":"boolean","title":"Is Included"},"is_active":{"type":"boolean","title":"Is Active"},"display_order":{"type":"integer","title":"Display Order"},"created_at":{"type":"string","title":"Created At"},"updated_at":{"type":"string","title":"Updated At"}},"type":"object","required":["id","name","description","price","category","is_included","is_active","display_order","created_at","updated_at"],"title":"MenuItemResponse","description":"Schema for menu item response"},"MenuItemUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":200,"minLength":1},{"type":"null"}],"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"price":{"anyOf":[{"type":"number","minimum":0.0},{"type":"null"}],"title":"Price"},"category":{"anyOf":[{"type":"string","pattern":"^(base_pricing|protein|side)$"},{"type":"null"}],"title":"Category"},"is_included":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Included"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"},"display_order":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Display Order"}},"type":"object","title":"MenuItemUpdate","description":"Schema for updating a menu item"},"MessageCreate":{"properties":{"content":{"type":"string","maxLength":2000,"minLength":1,"title":"Content"},"channel":{"$ref":"#/components/schemas/api__v1__endpoints__inbox__MessageChannel"},"direction":{"$ref":"#/components/schemas/api__v1__endpoints__inbox__MessageDirection"},"thread_id":{"type":"integer","title":"Thread Id"},"from_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"From Number"},"to_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"To Number"},"from_email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"From Email"},"to_email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"To Email"},"social_user_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Social User Id"},"social_username":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Social Username"},"attachments":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Attachments","default":[]},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata","default":{}}},"type":"object","required":["content","channel","direction","thread_id"],"title":"MessageCreate"},"MessageStatsResponse":{"properties":{"total_messages":{"type":"integer","title":"Total Messages"},"total_threads":{"type":"integer","title":"Total Threads"},"channel_stats":{"additionalProperties":{"type":"integer"},"type":"object","title":"Channel Stats"},"status_stats":{"additionalProperties":{"type":"integer"},"type":"object","title":"Status Stats"},"direction_stats":{"additionalProperties":{"type":"integer"},"type":"object","title":"Direction Stats"},"messages_last_24h":{"type":"integer","title":"Messages Last 24H"},"threads_last_24h":{"type":"integer","title":"Threads Last 24H"}},"type":"object","required":["total_messages","total_threads","channel_stats","status_stats","direction_stats","messages_last_24h","threads_last_24h"],"title":"MessageStatsResponse","description":"Message statistics response"},"MultiChannelInquiry":{"properties":{"message":{"type":"string","title":"Message","description":"The raw customer message/inquiry"},"channel":{"type":"string","title":"Channel","description":"Communication channel: email, sms, instagram, facebook, phone_transcript, web_chat"},"customer_metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Customer Metadata","description":"Additional customer metadata (if available)"}},"type":"object","required":["message","channel"],"title":"MultiChannelInquiry","description":"Customer inquiry from any communication channel.","example":{"channel":"email","customer_metadata":{"source":"contact_form","timestamp":"2025-10-31T10:30:00Z"},"message":"I'm looking into booking a hibachi experience for 9 people in August of 2026, likely in the Sonoma area. Do you have a quote I could take a look at? Looking forward to hearing from you. Malia -- Malia Nakamura (206)-661-8822"}},"NegotiationDetailResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"existing_booking_id":{"type":"string","format":"uuid","title":"Existing Booking Id"},"original_time":{"type":"string","format":"time","title":"Original Time"},"proposed_time":{"type":"string","format":"time","title":"Proposed Time"},"shift_minutes":{"type":"integer","title":"Shift Minutes"},"status":{"$ref":"#/components/schemas/NegotiationStatusEnum"},"incentive_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Incentive Type"},"incentive_description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Incentive Description"},"reason":{"type":"string","title":"Reason"},"expires_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Expires At"}},"type":"object","required":["id","existing_booking_id","original_time","proposed_time","shift_minutes","status","incentive_type","incentive_description","reason","expires_at"],"title":"NegotiationDetailResponse","description":"Detailed negotiation info."},"NegotiationReasonEnum":{"type":"string","enum":["travel_conflict","chef_availability","double_booking","customer_preference"],"title":"NegotiationReasonEnum","description":"Reason for requesting a time shift."},"NegotiationResponse":{"properties":{"negotiation_id":{"type":"string","format":"uuid","title":"Negotiation Id"},"status":{"$ref":"#/components/schemas/NegotiationStatusEnum"},"notification_sent":{"type":"boolean","title":"Notification Sent","default":false},"incentive_offered":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Incentive Offered"}},"type":"object","required":["negotiation_id","status"],"title":"NegotiationResponse","description":"Response after creating negotiation."},"NegotiationStatusEnum":{"type":"string","enum":["pending","sent","accepted","declined","expired"],"title":"NegotiationStatusEnum","description":"Status of a booking negotiation request."},"NewsletterContentRequest":{"properties":{"holiday_key":{"type":"string","title":"Holiday Key","description":"Holiday key (e.g., 'christmas', 'thanksgiving')"},"segment":{"$ref":"#/components/schemas/CustomerSegment","description":"Customer segment to target","default":"all"}},"type":"object","required":["holiday_key"],"title":"NewsletterContentRequest","description":"Request to generate content for a specific holiday and segment"},"NewsletterContentResponse":{"properties":{"id":{"type":"string","title":"Id"},"holiday_key":{"type":"string","title":"Holiday Key"},"holiday_name":{"type":"string","title":"Holiday Name"},"holiday_date":{"type":"string","title":"Holiday Date"},"segment":{"type":"string","title":"Segment"},"subject_line":{"type":"string","title":"Subject Line"},"content_html":{"type":"string","title":"Content Html"},"content_text":{"type":"string","title":"Content Text"},"preview_text":{"type":"string","title":"Preview Text"},"send_date":{"type":"string","title":"Send Date"},"generated_at":{"type":"string","format":"date-time","title":"Generated At"}},"type":"object","required":["id","holiday_key","holiday_name","holiday_date","segment","subject_line","content_html","content_text","preview_text","send_date","generated_at"],"title":"NewsletterContentResponse","description":"Response with generated newsletter content"},"NewsletterListResponse":{"properties":{"newsletters":{"items":{"$ref":"#/components/schemas/NewsletterContentResponse"},"type":"array","title":"Newsletters"},"total":{"type":"integer","title":"Total"},"holidays_covered":{"items":{"type":"string"},"type":"array","title":"Holidays Covered"}},"type":"object","required":["newsletters","total","holidays_covered"],"title":"NewsletterListResponse","description":"Response with list of generated newsletters"},"NewsletterSendRequest":{"properties":{"holiday_key":{"type":"string","title":"Holiday Key"},"segment":{"$ref":"#/components/schemas/CustomerSegment"},"send_immediately":{"type":"boolean","title":"Send Immediately","description":"Send now or schedule for later","default":false},"scheduled_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Scheduled Time","description":"When to send (if not immediate)"}},"type":"object","required":["holiday_key","segment"],"title":"NewsletterSendRequest","description":"Request to send newsletter to subscribers"},"NewsletterSendResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"newsletter_id":{"type":"string","title":"Newsletter Id"},"recipients_count":{"type":"integer","title":"Recipients Count"},"send_status":{"type":"string","title":"Send Status"},"scheduled_time":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Scheduled Time"},"message":{"type":"string","title":"Message"}},"type":"object","required":["success","newsletter_id","recipients_count","send_status","message"],"title":"NewsletterSendResponse","description":"Response after sending newsletter"},"OrchestratorRequest":{"properties":{"message":{"type":"string","minLength":1,"title":"Message","description":"Customer inquiry message"},"channel":{"type":"string","title":"Channel","description":"Communication channel (email, phone, instagram, facebook, tiktok, sms)","default":"email"},"customer_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Id","description":"Customer identifier if known"},"customer_context":{"additionalProperties":true,"type":"object","title":"Customer Context","description":"Customer context (email, phone, name, address, etc.)"},"conversation_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Conversation Id","description":"Existing conversation ID"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Additional request metadata"}},"type":"object","required":["message"],"title":"OrchestratorRequest","description":"Request to the AI orchestrator.\n\nAttributes:\n    message: Customer inquiry message\n    channel: Communication channel (email, phone, instagram, etc.)\n    customer_id: Optional customer identifier\n    customer_context: Optional additional context (email, phone, name, etc.)\n    conversation_id: Optional existing conversation ID\n    metadata: Additional request metadata","example":{"channel":"email","customer_context":{"email":"customer@example.com","name":"John Doe","zipcode":"95630"},"message":"I need a hibachi chef for 10 adults with filet mignon in 95630"}},"OrchestratorResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"response":{"type":"string","title":"Response"},"tools_used":{"items":{"$ref":"#/components/schemas/ToolCall"},"type":"array","title":"Tools Used"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"},"requires_admin_review":{"type":"boolean","title":"Requires Admin Review","default":false},"conversation_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Conversation Id"}},"type":"object","required":["success","response"],"title":"OrchestratorResponse","description":"Response from the AI orchestrator.\n\nAttributes:\n    success: Whether request was processed successfully\n    response: AI-generated response text\n    tools_used: List of tools that were executed\n    metadata: Response metadata (costs, timing, etc.)\n    error: Error message if request failed\n    requires_admin_review: Whether response needs admin approval\n    conversation_id: Conversation identifier","example":{"conversation_id":"conv_20251031_143022","metadata":{"model":"gpt-4-turbo-preview","total_time_ms":1250,"total_tokens":850},"requires_admin_review":false,"response":"Great! For 10 adults with filet mignon in 95630, your total is $575.00...","success":true,"tools_used":[{"execution_time_ms":45.2,"parameters":{"adults":10,"protein_selections":{"filet_mignon":10}},"result":{"total":575.0},"success":true,"tool_name":"calculate_party_quote"}]}},"OverviewStats":{"properties":{"total_revenue":{"type":"number","title":"Total Revenue"},"total_bookings":{"type":"integer","title":"Total Bookings"},"total_customers":{"type":"integer","title":"Total Customers"},"total_leads":{"type":"integer","title":"Total Leads"},"avg_booking_value":{"type":"number","title":"Avg Booking Value"},"conversion_rate":{"type":"number","title":"Conversion Rate"},"active_campaigns":{"type":"integer","title":"Active Campaigns"},"pending_reviews":{"type":"integer","title":"Pending Reviews"},"revenue_trend":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Revenue Trend"},"booking_trend":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Booking Trend"},"top_revenue_sources":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Top Revenue Sources"}},"type":"object","required":["total_revenue","total_bookings","total_customers","total_leads","avg_booking_value","conversion_rate","active_campaigns","pending_reviews","revenue_trend","booking_trend","top_revenue_sources"],"title":"OverviewStats","description":"Dashboard overview statistics"},"PINResetRequest":{"properties":{"user_id":{"type":"string","title":"User Id"}},"type":"object","required":["user_id"],"title":"PINResetRequest","description":"Request to reset a user's PIN (SUPER_ADMIN only)"},"PINSetupRequest":{"properties":{"pin":{"type":"string","maxLength":6,"minLength":4,"title":"Pin"}},"type":"object","required":["pin"],"title":"PINSetupRequest","description":"Request to set up a PIN"},"PINVerifyRequest":{"properties":{"pin":{"type":"string","maxLength":6,"minLength":4,"title":"Pin"}},"type":"object","required":["pin"],"title":"PINVerifyRequest","description":"Request to verify PIN"},"PaginatedResponse":{"properties":{"data":{"items":{},"type":"array","title":"Data"},"total_count":{"type":"integer","title":"Total Count"},"page":{"type":"integer","title":"Page"},"limit":{"type":"integer","title":"Limit"},"has_next":{"type":"boolean","title":"Has Next"},"has_prev":{"type":"boolean","title":"Has Prev"},"next_cursor":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Next Cursor"},"prev_cursor":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Prev Cursor"}},"type":"object","required":["data","total_count","page","limit","has_next","has_prev"],"title":"PaginatedResponse","description":"Paginated list response."},"PasswordResetRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email","description":"Email address to send reset link"}},"type":"object","required":["email"],"title":"PasswordResetRequest","description":"Request body for requesting password reset.","examples":[{"email":"user@example.com"}]},"PaymentAnalyticsResponse":{"properties":{"total_revenue":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Total Revenue"},"total_payments":{"type":"integer","title":"Total Payments"},"successful_payments":{"type":"integer","title":"Successful Payments"},"failed_payments":{"type":"integer","title":"Failed Payments"},"average_transaction":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Average Transaction"},"revenue_by_method":{"additionalProperties":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},"type":"object","title":"Revenue By Method"},"daily_revenue":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Daily Revenue"}},"type":"object","required":["total_revenue","total_payments","successful_payments","failed_payments","average_transaction","revenue_by_method","daily_revenue"],"title":"PaymentAnalyticsResponse","description":"Response model for payment analytics (admin only)."},"PaymentIntentRequest":{"properties":{"amount":{"type":"integer","minimum":100.0,"title":"Amount","description":"Amount in cents"},"currency":{"type":"string","title":"Currency","default":"usd"},"booking_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Booking Id"},"customer_email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Email"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"metadata":{"anyOf":[{"additionalProperties":{"type":"string"},"type":"object"},{"type":"null"}],"title":"Metadata"}},"type":"object","required":["amount"],"title":"PaymentIntentRequest","description":"Request model for creating a payment intent."},"PaymentIntentResponse":{"properties":{"client_secret":{"type":"string","title":"Client Secret"},"payment_intent_id":{"type":"string","title":"Payment Intent Id"},"amount":{"type":"integer","title":"Amount"},"currency":{"type":"string","title":"Currency"},"status":{"type":"string","title":"Status"}},"type":"object","required":["client_secret","payment_intent_id","amount","currency","status"],"title":"PaymentIntentResponse","description":"Response model for payment intent creation."},"PaymentListResponse":{"properties":{"payments":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Payments"},"total":{"type":"integer","title":"Total"},"has_more":{"type":"boolean","title":"Has More"},"next_cursor":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Next Cursor"}},"type":"object","required":["payments","total","has_more"],"title":"PaymentListResponse","description":"Response model for paginated payment list."},"PaymentMethodBreakdown":{"properties":{"method":{"type":"string","title":"Method"},"method_display_name":{"type":"string","title":"Method Display Name"},"base_amount":{"type":"number","title":"Base Amount"},"tip_amount":{"type":"number","title":"Tip Amount"},"subtotal":{"type":"number","title":"Subtotal"},"processing_fee":{"type":"number","title":"Processing Fee"},"processing_fee_percentage":{"type":"string","title":"Processing Fee Percentage"},"total_amount":{"type":"number","title":"Total Amount"},"savings_vs_stripe":{"type":"number","title":"Savings Vs Stripe"},"is_free":{"type":"boolean","title":"Is Free"},"is_instant":{"type":"boolean","title":"Is Instant"},"confirmation_time":{"type":"string","title":"Confirmation Time"}},"type":"object","required":["method","method_display_name","base_amount","tip_amount","subtotal","processing_fee","processing_fee_percentage","total_amount","savings_vs_stripe","is_free","is_instant","confirmation_time"],"title":"PaymentMethodBreakdown","description":"Payment breakdown for a specific method"},"PaymentStatus":{"type":"string","enum":["pending","processing","succeeded","failed","cancelled","refunded","partially_refunded"],"title":"PaymentStatus","description":"Payment status workflow - Stripe-aligned.\n\nValues:\n    PENDING: Payment initiated, awaiting processing\n    PROCESSING: Payment is being processed\n    SUCCEEDED: Payment completed successfully (Stripe standard)\n    FAILED: Payment failed\n    CANCELLED: Payment was cancelled before completion\n    REFUNDED: Full refund issued\n    PARTIALLY_REFUNDED: Partial refund issued\n\nNote: \"completed\" is DEPRECATED. Use \"succeeded\" for new payments.\nMigration required for existing \"completed\" records."},"PeakSeasonResponse":{"properties":{"holiday_name":{"type":"string","title":"Holiday Name"},"holiday_key":{"type":"string","title":"Holiday Key"},"total_revenue":{"type":"number","title":"Total Revenue"},"booking_count":{"type":"integer","title":"Booking Count"},"rank":{"type":"integer","title":"Rank"}},"type":"object","required":["holiday_name","holiday_key","total_revenue","booking_count","rank"],"title":"PeakSeasonResponse","description":"Peak season identification"},"PendingEmailResponse":{"properties":{"id":{"type":"string","title":"Id","description":"Unique email ID"},"customer_name":{"type":"string","title":"Customer Name"},"customer_email":{"type":"string","format":"email","title":"Customer Email"},"original_subject":{"type":"string","title":"Original Subject"},"original_body":{"type":"string","title":"Original Body"},"received_at":{"type":"string","format":"date-time","title":"Received At"},"ai_response":{"type":"string","title":"Ai Response"},"ai_subject":{"type":"string","title":"Ai Subject"},"ai_confidence":{"type":"number","title":"Ai Confidence"},"ai_model_used":{"type":"string","title":"Ai Model Used"},"complexity_score":{"type":"number","title":"Complexity Score"},"party_size":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Party Size"},"location":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Location"},"event_date":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Event Date"},"inquiry_type":{"type":"string","title":"Inquiry Type"},"special_requests":{"items":{"type":"string"},"type":"array","title":"Special Requests","default":[]},"estimated_quote":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Estimated Quote"},"quote_breakdown":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Quote Breakdown"},"status":{"$ref":"#/components/schemas/EmailStatus","default":"pending"},"priority":{"$ref":"#/components/schemas/Priority","default":"normal"},"requires_follow_up":{"type":"boolean","title":"Requires Follow Up","default":false},"processed_at":{"type":"string","format":"date-time","title":"Processed At"},"reviewed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Reviewed At"},"sent_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Sent At"},"reviewer_notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reviewer Notes"},"edited_response":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Edited Response"}},"type":"object","required":["id","customer_name","customer_email","original_subject","original_body","received_at","ai_response","ai_subject","ai_confidence","ai_model_used","complexity_score","party_size","location","event_date","inquiry_type","estimated_quote","quote_breakdown","processed_at"],"title":"PendingEmailResponse","description":"Email response awaiting human review"},"PendingNegotiationsResponse":{"properties":{"negotiations":{"items":{"$ref":"#/components/schemas/NegotiationDetailResponse"},"type":"array","title":"Negotiations"},"count":{"type":"integer","title":"Count"}},"type":"object","required":["negotiations","count"],"title":"PendingNegotiationsResponse","description":"List of pending negotiations."},"PermissionResponse":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"display_name":{"type":"string","title":"Display Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"resource":{"type":"string","title":"Resource"},"action":{"type":"string","title":"Action"}},"type":"object","required":["id","name","display_name","description","resource","action"],"title":"PermissionResponse","description":"Permission details"},"PoliciesResponse":{"properties":{"deposit":{"$ref":"#/components/schemas/DepositPolicy"},"cancellation":{"$ref":"#/components/schemas/CancellationPolicy"},"travel":{"$ref":"#/components/schemas/TravelPolicy"},"booking":{"$ref":"#/components/schemas/BookingPolicy"},"source":{"type":"string","title":"Source","description":"Data source for debugging","default":"api"},"fetched_at":{"type":"string","title":"Fetched At","description":"ISO timestamp when fetched"}},"type":"object","required":["deposit","cancellation","travel","booking","fetched_at"],"title":"PoliciesResponse","description":"Complete policies response with human-readable text.\n\nThis is the structure expected by the frontend usePolicies hook.\nText fields are dynamically generated from config values."},"PolicyConfig":{"properties":{"reschedule_fee_cents":{"type":"integer","title":"Reschedule Fee Cents","description":"Fee for late rescheduling in cents"},"free_reschedule_count":{"type":"integer","title":"Free Reschedule Count","description":"Number of free reschedules allowed"}},"type":"object","required":["reschedule_fee_cents","free_reschedule_count"],"title":"PolicyConfig","description":"Policy configuration for fees and limits."},"PortalSessionRequest":{"properties":{"return_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Return Url"}},"type":"object","title":"PortalSessionRequest","description":"Request model for creating a customer portal session."},"PortalSessionResponse":{"properties":{"portal_url":{"type":"string","title":"Portal Url"},"expires_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Expires At"}},"type":"object","required":["portal_url"],"title":"PortalSessionResponse","description":"Response model for customer portal session."},"PricingConfig":{"properties":{"adult_price_cents":{"type":"integer","title":"Adult Price Cents","description":"Adult price per person in cents"},"child_price_cents":{"type":"integer","title":"Child Price Cents","description":"Child (6-12) price per person in cents"},"child_free_under_age":{"type":"integer","title":"Child Free Under Age","description":"Age under which children are free"},"party_minimum_cents":{"type":"integer","title":"Party Minimum Cents","description":"Minimum party total in cents"}},"type":"object","required":["adult_price_cents","child_price_cents","child_free_under_age","party_minimum_cents"],"title":"PricingConfig","description":"Pricing configuration values (all amounts in cents)."},"Priority":{"type":"string","enum":["low","normal","high","urgent"],"title":"Priority","description":"Email priority levels"},"ProcessEmailsRequest":{"properties":{"since_hours":{"type":"integer","maximum":168.0,"minimum":1.0,"title":"Since Hours","description":"Process emails from last N hours","default":24},"auto_confirm":{"type":"boolean","title":"Auto Confirm","description":"Automatically confirm matched payments","default":true},"mark_as_read":{"type":"boolean","title":"Mark As Read","description":"Mark processed emails as read","default":true}},"type":"object","title":"ProcessEmailsRequest","description":"Request to process payment emails"},"ProcessEmailsResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"emails_found":{"type":"integer","title":"Emails Found"},"emails_parsed":{"type":"integer","title":"Emails Parsed"},"payments_matched":{"type":"integer","title":"Payments Matched"},"payments_confirmed":{"type":"integer","title":"Payments Confirmed"},"errors":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Errors"},"processed_at":{"type":"string","title":"Processed At"}},"type":"object","required":["success","emails_found","emails_parsed","payments_matched","payments_confirmed","errors","processed_at"],"title":"ProcessEmailsResponse","description":"Results of email processing"},"PublicBookingCreate":{"properties":{"date":{"type":"string","title":"Date","description":"Booking date in YYYY-MM-DD format"},"time":{"type":"string","title":"Time","description":"Booking time in HH:MM format"},"guests":{"type":"integer","maximum":50.0,"minimum":1.0,"title":"Guests","description":"Number of guests (1-50)"},"location_address":{"type":"string","minLength":10,"title":"Location Address","description":"Event location address"},"customer_name":{"type":"string","minLength":2,"title":"Customer Name","description":"Customer full name"},"customer_email":{"type":"string","format":"email","title":"Customer Email","description":"Customer email address"},"customer_phone":{"type":"string","title":"Customer Phone","description":"Customer phone number"},"special_requests":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Special Requests","description":"Special requests or dietary restrictions"}},"type":"object","required":["date","time","guests","location_address","customer_name","customer_email","customer_phone"],"title":"PublicBookingCreate","description":"Schema for creating a public booking (no auth required).","examples":[{"customer_email":"john@example.com","customer_name":"John Doe","customer_phone":"+14155551234","date":"2024-12-25","guests":8,"location_address":"123 Main St, San Jose, CA 95123","special_requests":"Vegetarian option for 2 guests","time":"18:00"}]},"PublicBookingResponse":{"properties":{"id":{"type":"string","title":"Id","description":"Unique booking identifier"},"date":{"type":"string","title":"Date","description":"Booking date"},"time":{"type":"string","title":"Time","description":"Booking time"},"guests":{"type":"integer","title":"Guests","description":"Number of guests"},"status":{"type":"string","title":"Status","description":"Booking status (pending)"},"total_amount":{"type":"number","title":"Total Amount","description":"Total cost in USD"},"deposit_amount":{"type":"number","title":"Deposit Amount","description":"Required deposit in USD ($100 fixed)"},"deposit_deadline":{"type":"string","title":"Deposit Deadline","description":"Deadline to pay deposit"},"created_at":{"type":"string","title":"Created At","description":"Creation timestamp"},"message":{"type":"string","title":"Message","description":"Confirmation message"}},"type":"object","required":["id","date","time","guests","status","total_amount","deposit_amount","deposit_deadline","created_at","message"],"title":"PublicBookingResponse","description":"Response schema for public booking creation."},"PublicReviewResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"review_id":{"type":"string","title":"Review Id"},"message":{"type":"string","title":"Message"},"media_count":{"type":"integer","title":"Media Count","default":0},"media_processing":{"type":"boolean","title":"Media Processing","default":false}},"type":"object","required":["success","review_id","message"],"title":"PublicReviewResponse","description":"Response model for public review submission."},"QuoteRequest":{"properties":{"adults":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Adults","description":"Number of adults (13+)"},"children":{"type":"integer","maximum":50.0,"minimum":0.0,"title":"Children","description":"Number of children (6-12)","default":0},"salmon":{"type":"integer","minimum":0.0,"title":"Salmon","description":"Number of salmon upgrades","default":0},"scallops":{"type":"integer","minimum":0.0,"title":"Scallops","description":"Number of scallop upgrades","default":0},"filet_mignon":{"type":"integer","minimum":0.0,"title":"Filet Mignon","description":"Number of filet mignon upgrades","default":0},"lobster_tail":{"type":"integer","minimum":0.0,"title":"Lobster Tail","description":"Number of lobster tail upgrades","default":0},"extra_proteins":{"type":"integer","minimum":0.0,"title":"Extra Proteins","description":"Number of extra protein additions","default":0},"yakisoba_noodles":{"type":"integer","minimum":0.0,"title":"Yakisoba Noodles","description":"Number of yakisoba noodle portions","default":0},"extra_fried_rice":{"type":"integer","minimum":0.0,"title":"Extra Fried Rice","description":"Number of extra fried rice portions","default":0},"extra_vegetables":{"type":"integer","minimum":0.0,"title":"Extra Vegetables","description":"Number of extra vegetable portions","default":0},"edamame":{"type":"integer","minimum":0.0,"title":"Edamame","description":"Number of edamame portions","default":0},"gyoza":{"type":"integer","minimum":0.0,"title":"Gyoza","description":"Number of gyoza portions","default":0},"venue_address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Venue Address","description":"Full venue address for travel calculation"},"zip_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Zip Code","description":"ZIP code for fallback travel calculation"},"venue_lat":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Venue Lat","description":"Venue latitude (if already geocoded)"},"venue_lng":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Venue Lng","description":"Venue longitude (if already geocoded)"}},"type":"object","required":["adults"],"title":"QuoteRequest","description":"Schema for quote calculation request.","examples":[{"adults":10,"children":2,"lobster_tail":1,"salmon":2,"venue_address":"123 Main St, San Jose, CA 95123"}]},"QuoteResponse":{"properties":{"adults":{"type":"integer","title":"Adults"},"children":{"type":"integer","title":"Children"},"adult_price":{"type":"number","title":"Adult Price"},"child_price":{"type":"number","title":"Child Price"},"base_total":{"type":"number","title":"Base Total"},"upgrade_total":{"type":"number","title":"Upgrade Total"},"addon_total":{"type":"number","title":"Addon Total"},"subtotal":{"type":"number","title":"Subtotal"},"travel_info":{"anyOf":[{"$ref":"#/components/schemas/TravelInfo"},{"type":"null"}]},"grand_total":{"type":"number","title":"Grand Total"},"deposit_required":{"type":"number","title":"Deposit Required"},"balance_due":{"type":"number","title":"Balance Due"},"party_minimum":{"type":"number","title":"Party Minimum"},"applied_minimum":{"type":"boolean","title":"Applied Minimum","default":false}},"type":"object","required":["adults","children","adult_price","child_price","base_total","upgrade_total","addon_total","subtotal","grand_total","deposit_required","balance_due","party_minimum"],"title":"QuoteResponse","description":"Schema for quote calculation response."},"RecordingStatus":{"type":"string","enum":["pending","downloading","available","archived","deleted","error"],"title":"RecordingStatus","description":"Recording processing status"},"RefreshTokenRequest":{"properties":{"refresh_token":{"type":"string","title":"Refresh Token"}},"type":"object","required":["refresh_token"],"title":"RefreshTokenRequest"},"RefundRequest":{"properties":{"payment_intent_id":{"type":"string","title":"Payment Intent Id"},"amount":{"anyOf":[{"type":"integer","minimum":1.0},{"type":"null"}],"title":"Amount","description":"Partial refund amount in cents"},"reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Reason"}},"type":"object","required":["payment_intent_id"],"title":"RefundRequest","description":"Request model for creating a refund."},"RefundResponse":{"properties":{"refund_id":{"type":"string","title":"Refund Id"},"amount":{"type":"integer","title":"Amount"},"status":{"type":"string","title":"Status"},"payment_intent_id":{"type":"string","title":"Payment Intent Id"}},"type":"object","required":["refund_id","amount","status","payment_intent_id"],"title":"RefundResponse","description":"Response model for refund creation."},"RegisterRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email","description":"User email address"},"password":{"type":"string","minLength":8,"title":"Password","description":"User password (minimum 8 characters)"},"full_name":{"type":"string","maxLength":100,"minLength":2,"title":"Full Name","description":"User's full name"}},"type":"object","required":["email","password","full_name"],"title":"RegisterRequest","description":"User registration request schema.","examples":[{"email":"jane@example.com","full_name":"Jane Smith","password":"SecurePass123!"}]},"ResolveErrorRequest":{"properties":{"resolution_notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Resolution Notes"}},"type":"object","title":"ResolveErrorRequest","description":"Request to resolve an error"},"RespondToNegotiationRequest":{"properties":{"negotiation_id":{"type":"string","format":"uuid","title":"Negotiation Id"},"accepted":{"type":"boolean","title":"Accepted"},"customer_notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Notes"},"selected_incentive":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Selected Incentive"}},"type":"object","required":["negotiation_id","accepted"],"title":"RespondToNegotiationRequest","description":"Customer response to negotiation."},"RestoreAccountRequest":{"properties":{"user_id":{"type":"string","title":"User Id"},"reset_pin":{"type":"boolean","title":"Reset Pin","default":true}},"type":"object","required":["user_id"],"title":"RestoreAccountRequest","description":"Request to restore a security-disabled account"},"ReviewCreateRequest":{"properties":{"rating":{"type":"integer","maximum":5.0,"minimum":1.0,"title":"Rating","description":"Rating from 1 to 5"},"comment":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Comment","description":"Review comment/feedback"},"customer_email":{"type":"string","title":"Customer Email","description":"Customer email address"},"booking_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Booking Id","description":"Associated booking ID (if any)"}},"type":"object","required":["rating","customer_email"],"title":"ReviewCreateRequest","description":"Request model for creating a new review."},"ReviewResolutionRequest":{"properties":{"resolved_by":{"type":"string","format":"uuid","title":"Resolved By","description":"Admin user ID who resolved the issue"},"resolution_notes":{"type":"string","title":"Resolution Notes","description":"Notes about the resolution"}},"type":"object","required":["resolved_by","resolution_notes"],"title":"ReviewResolutionRequest","description":"Request model for resolving a review."},"ReviewSubmissionRequest":{"properties":{"rating":{"type":"string","title":"Rating","description":"Rating: great, good, okay, could_be_better"},"complaint_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Complaint Text","description":"Required for negative reviews"},"improvement_suggestions":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Improvement Suggestions","description":"How we can improve"}},"type":"object","required":["rating"],"title":"ReviewSubmissionRequest","description":"Request model for submitting a review."},"RoleResponse":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"display_name":{"type":"string","title":"Display Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"is_system_role":{"type":"boolean","title":"Is System Role"},"is_active":{"type":"boolean","title":"Is Active"},"permission_count":{"type":"integer","title":"Permission Count"},"permissions":{"items":{"type":"string"},"type":"array","title":"Permissions"}},"type":"object","required":["id","name","display_name","description","is_system_role","is_active","permission_count","permissions"],"title":"RoleResponse","description":"Role with permission details"},"SMSContentResponse":{"properties":{"message":{"type":"string","title":"Message"},"character_count":{"type":"integer","title":"Character Count"}},"type":"object","required":["message","character_count"],"title":"SMSContentResponse","description":"SMS campaign content"},"SMSResponse":{"properties":{"escalation_id":{"type":"string","title":"Escalation Id"},"message_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message Id"},"status":{"type":"string","title":"Status"},"sent_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Sent At"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"}},"type":"object","required":["escalation_id","message_id","status","sent_at","error_message"],"title":"SMSResponse","description":"Response for SMS operations"},"SalesAnalytics":{"properties":{"total_revenue":{"type":"number","title":"Total Revenue"},"total_bookings":{"type":"integer","title":"Total Bookings"},"conversion_value":{"type":"number","title":"Conversion Value"},"average_booking_value":{"type":"number","title":"Average Booking Value"},"revenue_by_month":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Revenue By Month"},"lead_to_booking_conversion":{"type":"number","title":"Lead To Booking Conversion"}},"type":"object","required":["total_revenue","total_bookings","conversion_value","average_booking_value","revenue_by_month","lead_to_booking_conversion"],"title":"SalesAnalytics"},"SeasonalTrendsResponse":{"properties":{"year":{"type":"integer","title":"Year"},"holidays":{"items":{"$ref":"#/components/schemas/HolidayTrendResponse"},"type":"array","title":"Holidays"},"total_bookings":{"type":"integer","title":"Total Bookings"},"total_revenue":{"type":"number","title":"Total Revenue"},"avg_yoy_growth":{"type":"number","title":"Avg Yoy Growth"}},"type":"object","required":["year","holidays","total_bookings","total_revenue","avg_yoy_growth"],"title":"SeasonalTrendsResponse","description":"Seasonal trends for all holidays"},"SecurityStats":{"properties":{"new_alerts":{"type":"integer","title":"New Alerts","default":0},"critical_alerts":{"type":"integer","title":"Critical Alerts","default":0},"events_24h":{"type":"integer","title":"Events 24H","default":0},"lockouts_24h":{"type":"integer","title":"Lockouts 24H","default":0},"failed_mfa_24h":{"type":"integer","title":"Failed Mfa 24H","default":0},"suspicious_ips_1h":{"type":"integer","title":"Suspicious Ips 1H","default":0},"blocked_ips":{"type":"integer","title":"Blocked Ips","default":0}},"type":"object","title":"SecurityStats","description":"Security dashboard statistics"},"SendEmailRequest":{"properties":{"to":{"items":{"$ref":"#/components/schemas/EmailAddress"},"type":"array","title":"To"},"cc":{"anyOf":[{"items":{"$ref":"#/components/schemas/EmailAddress"},"type":"array"},{"type":"null"}],"title":"Cc"},"bcc":{"anyOf":[{"items":{"$ref":"#/components/schemas/EmailAddress"},"type":"array"},{"type":"null"}],"title":"Bcc"},"subject":{"type":"string","title":"Subject"},"text_body":{"type":"string","title":"Text Body"},"html_body":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Html Body"},"in_reply_to":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"In Reply To"},"thread_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Thread Id"}},"type":"object","required":["to","subject","text_body"],"title":"SendEmailRequest","description":"Send or reply to email"},"SendLinkRequest":{"properties":{"hold_token":{"type":"string","title":"Hold Token","description":"Slot hold token"},"send_via":{"type":"string","title":"Send Via","description":"Send method: 'sms' or 'email'","default":"sms"},"phone_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone Number","description":"Phone for SMS"},"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email","description":"Email for email link"}},"type":"object","required":["hold_token"],"title":"SendLinkRequest","description":"Request to send signing link via SMS/email."},"SendSMSRequest":{"properties":{"escalation_id":{"type":"string","title":"Escalation Id","description":"ID of the escalation"},"message":{"type":"string","maxLength":1600,"minLength":1,"title":"Message","description":"SMS message content"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata","description":"Additional context"}},"type":"object","required":["escalation_id","message"],"title":"SendSMSRequest","description":"Request to send SMS via escalation"},"ServiceConfig":{"properties":{"standard_duration_minutes":{"type":"integer","title":"Standard Duration Minutes","description":"Standard service duration in minutes"},"extended_duration_minutes":{"type":"integer","title":"Extended Duration Minutes","description":"Maximum extended service duration for large parties"},"chef_arrival_minutes_before":{"type":"integer","title":"Chef Arrival Minutes Before","description":"Minutes before event when chef arrives"}},"type":"object","required":["standard_duration_minutes","extended_duration_minutes","chef_arrival_minutes_before"],"title":"ServiceConfig","description":"Service duration and logistics configuration (all values in minutes)."},"ServiceHealthCheck":{"properties":{"status":{"type":"string","title":"Status","description":"healthy, degraded, or unhealthy"},"response_time_ms":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Response Time Ms","description":"Response time in milliseconds"},"details":{"type":"string","title":"Details","description":"Health check details"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error","description":"Error message if unhealthy"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp","description":"Timestamp of the health check"}},"type":"object","required":["status","details","timestamp"],"title":"ServiceHealthCheck","description":"Individual service health check result.","example":{"details":"Service is operational","response_time_ms":45.2,"status":"healthy","timestamp":"2024-10-25T10:30:00Z"}},"SignAgreementRequest":{"properties":{"hold_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Hold Token","description":"Slot hold token from hold creation (pre-booking flow)"},"booking_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Booking Id","description":"Existing booking ID (post-booking flow)"},"agreement_type":{"type":"string","title":"Agreement Type","description":"Type: 'liability_waiver' or 'allergen_disclosure'"},"signature_image_base64":{"type":"string","title":"Signature Image Base64","description":"Base64-encoded signature image (PNG/JPEG/WEBP)"},"typed_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Typed Name","description":"Typed name if signature is typed instead of drawn"},"customer_email":{"type":"string","format":"email","title":"Customer Email","description":"Customer email for confirmation"},"customer_name":{"type":"string","title":"Customer Name","description":"Customer full name"},"allergens":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Allergens","description":"List of allergen codes for disclosure"},"allergen_notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Allergen Notes","description":"Additional allergen notes from customer"}},"type":"object","required":["agreement_type","signature_image_base64","customer_email","customer_name"],"title":"SignAgreementRequest","description":"Request to sign an agreement.\n\nAccepts EITHER hold_token (pre-booking flow) OR booking_id (post-booking flow).\nExactly one must be provided."},"SignAgreementResponse":{"properties":{"agreement_id":{"type":"string","format":"uuid","title":"Agreement Id"},"signed_at":{"type":"string","format":"date-time","title":"Signed At"},"pdf_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pdf Url"},"confirmation_sent":{"type":"boolean","title":"Confirmation Sent"},"message":{"type":"string","title":"Message"}},"type":"object","required":["agreement_id","signed_at","confirmation_sent","message"],"title":"SignAgreementResponse","description":"Response after signing agreement."},"SigningPageResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"hold":{"anyOf":[{"$ref":"#/components/schemas/HoldInfoResponse"},{"type":"null"}]},"agreement":{"anyOf":[{"$ref":"#/components/schemas/AgreementContentResponse"},{"type":"null"}]},"error_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Code"}},"type":"object","required":["success"],"title":"SigningPageResponse","description":"Response for signing page - wrapped structure matching frontend expectations.\n\nUsed by: apps/customer/src/app/sign/[token]/page.tsx"},"SlotAvailabilityResponse":{"properties":{"slot_time":{"type":"string","format":"time","title":"Slot Time"},"slot_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Slot Date"},"slot_label":{"type":"string","title":"Slot Label","default":""},"is_available":{"type":"boolean","title":"Is Available"},"available_chefs":{"type":"integer","title":"Available Chefs","default":0},"conflict_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Conflict Reason"},"can_adjust":{"type":"boolean","title":"Can Adjust","default":false},"adjustment_options":{"items":{"type":"integer"},"type":"array","title":"Adjustment Options","default":[]},"adjusted_time":{"anyOf":[{"type":"string","format":"time"},{"type":"null"}],"title":"Adjusted Time"},"travel_time_from_prev":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Travel Time From Prev"},"travel_time_to_next":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Travel Time To Next"},"score":{"type":"number","title":"Score","default":0.0}},"type":"object","required":["slot_time","is_available"],"title":"SlotAvailabilityResponse","description":"Single time slot availability info."},"SlotConfigResponse":{"properties":{"slot_name":{"type":"string","title":"Slot Name"},"slot_time":{"type":"string","format":"time","title":"Slot Time"},"min_adjust_minutes":{"type":"integer","title":"Min Adjust Minutes","default":-60},"max_adjust_minutes":{"type":"integer","title":"Max Adjust Minutes","default":60},"min_event_duration":{"type":"integer","title":"Min Event Duration","default":90},"max_event_duration":{"type":"integer","title":"Max Event Duration","default":120},"is_active":{"type":"boolean","title":"Is Active","default":true}},"type":"object","required":["slot_name","slot_time"],"title":"SlotConfigResponse","description":"Time slot configuration."},"SlotHoldRequest":{"properties":{"station_id":{"type":"string","format":"uuid","title":"Station Id","description":"Station UUID"},"event_date":{"type":"string","format":"date","title":"Event Date","description":"Event date"},"slot_time":{"type":"string","format":"time","title":"Slot Time","description":"Slot time (e.g., 18:00)"},"customer_email":{"type":"string","format":"email","title":"Customer Email","description":"Customer email"},"customer_phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Phone","description":"Customer phone (optional)"}},"type":"object","required":["station_id","event_date","slot_time","customer_email"],"title":"SlotHoldRequest","description":"Request to create a slot hold."},"SlotHoldResponse":{"properties":{"hold_id":{"type":"string","format":"uuid","title":"Hold Id"},"signing_token":{"type":"string","title":"Signing Token"},"expires_at":{"type":"string","format":"date-time","title":"Expires At"},"signing_url":{"type":"string","title":"Signing Url"},"message":{"type":"string","title":"Message"}},"type":"object","required":["hold_id","signing_token","expires_at","signing_url","message"],"title":"SlotHoldResponse","description":"Response after creating slot hold."},"SocialPlatform":{"type":"string","enum":["instagram","facebook","twitter","tiktok","linkedin","google","google_business","yelp","whatsapp","website","email","phone","other"],"title":"SocialPlatform","description":"Supported social media platforms.\n\nMerged from 4 model files to create single source of truth.\n\nCategories:\n    Social Networks: INSTAGRAM, FACEBOOK, TWITTER, TIKTOK, LINKEDIN\n    Review Platforms: GOOGLE, GOOGLE_BUSINESS, YELP\n    Messaging: WHATSAPP\n    Other: WEBSITE, EMAIL, PHONE\n\nNote:\n    - GOOGLE: General Google account/reviews\n    - GOOGLE_BUSINESS: Google Business Profile (Maps, GMB)"},"SocialThreadCreate":{"properties":{"platform":{"$ref":"#/components/schemas/SocialPlatform"},"account_id":{"type":"string","title":"Account Id"},"thread_ref":{"type":"string","title":"Thread Ref"},"lead_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Lead Id"},"customer_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Customer Id"}},"type":"object","required":["platform","account_id","thread_ref"],"title":"SocialThreadCreate"},"SocialThreadResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"platform":{"$ref":"#/components/schemas/SocialPlatform"},"account_id":{"type":"string","title":"Account Id"},"thread_ref":{"type":"string","title":"Thread Ref"},"lead_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Lead Id"},"customer_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Customer Id"},"status":{"type":"string","title":"Status"},"last_message_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Message At"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","platform","account_id","thread_ref","lead_id","customer_id","status","last_message_at","created_at"],"title":"SocialThreadResponse"},"StationChefListResponse":{"properties":{"station_id":{"type":"string","format":"uuid","title":"Station Id"},"station_name":{"type":"string","title":"Station Name"},"chefs":{"items":{"$ref":"#/components/schemas/StationChefSummary"},"type":"array","title":"Chefs"},"total":{"type":"integer","title":"Total"}},"type":"object","required":["station_id","station_name","chefs","total"],"title":"StationChefListResponse","description":"List of chefs in a station."},"StationChefSummary":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"name":{"type":"string","title":"Name"},"email":{"type":"string","title":"Email"},"specialty":{"type":"string","title":"Specialty"},"status":{"$ref":"#/components/schemas/schemas__chef_portal__ChefStatus"},"rating":{"anyOf":[{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"},{"type":"null"}],"title":"Rating"},"pending_timeoff_count":{"type":"integer","title":"Pending Timeoff Count","default":0}},"type":"object","required":["id","name","email","specialty","status"],"title":"StationChefSummary","description":"Summary of a chef for station manager view."},"StationCreateRequest":{"properties":{"name":{"type":"string","maxLength":100,"minLength":1,"title":"Name","description":"Station name"},"display_name":{"type":"string","maxLength":200,"minLength":1,"title":"Display Name","description":"Display name for UI"},"city":{"type":"string","maxLength":100,"minLength":1,"title":"City","description":"City name"},"state":{"type":"string","maxLength":2,"minLength":2,"title":"State","description":"2-letter state code (e.g., CA, TX)"},"country":{"type":"string","maxLength":2,"minLength":2,"title":"Country","description":"Country code","default":"US"},"timezone":{"type":"string","title":"Timezone","description":"IANA timezone (e.g., America/Los_Angeles)"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email","description":"Contact email"},"phone":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Phone","description":"Contact phone"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address","description":"Street address"},"postal_code":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Postal Code","description":"ZIP/Postal code"},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status","description":"Station status","default":"active"},"settings":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Settings","description":"Station settings JSON"},"business_hours":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Business Hours","description":"Operating hours JSON"},"service_area_radius":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Service Area Radius","description":"Service radius in miles"},"max_concurrent_bookings":{"anyOf":[{"type":"integer","minimum":1.0},{"type":"null"}],"title":"Max Concurrent Bookings","description":"Max concurrent bookings","default":10},"booking_lead_time_hours":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Booking Lead Time Hours","description":"Minimum booking lead time","default":24},"branding_config":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Branding Config","description":"Branding configuration JSON"}},"type":"object","required":["name","display_name","city","state","timezone"],"title":"StationCreateRequest","description":"Request model for creating a new station (code is auto-generated).","example":{"address":"123 Mission Blvd","booking_lead_time_hours":24,"business_hours":{"friday":{"close":"23:00","open":"10:00"},"monday":{"close":"22:00","open":"10:00"},"saturday":{"close":"23:00","open":"09:00"},"sunday":{"close":"22:00","open":"09:00"},"thursday":{"close":"22:00","open":"10:00"},"tuesday":{"close":"22:00","open":"10:00"},"wednesday":{"close":"22:00","open":"10:00"}},"city":"Fremont","country":"US","display_name":"MyHibachi - California Bay Area","email":"bay-area@myhibachi.com","max_concurrent_bookings":15,"name":"California Bay Area","phone":"+1-510-555-0100","postal_code":"94539","state":"CA","status":"active","timezone":"America/Los_Angeles"}},"StationLoginRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Password"},"oauth_token":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Oauth Token"},"station_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Station Id"}},"type":"object","required":["email"],"title":"StationLoginRequest"},"StationResponse":{"properties":{"id":{"type":"string","title":"Id"},"code":{"type":"string","title":"Code"},"name":{"type":"string","title":"Name"},"display_name":{"type":"string","title":"Display Name"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"},"city":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"City"},"state":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"State"},"postal_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Postal Code"},"country":{"type":"string","title":"Country"},"timezone":{"type":"string","title":"Timezone"},"status":{"type":"string","title":"Status"},"settings":{"additionalProperties":true,"type":"object","title":"Settings"},"business_hours":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Business Hours"},"service_area_radius":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Service Area Radius"},"escalation_radius_miles":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Escalation Radius Miles"},"max_concurrent_bookings":{"type":"integer","title":"Max Concurrent Bookings"},"booking_lead_time_hours":{"type":"integer","title":"Booking Lead Time Hours"},"branding_config":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Branding Config"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"lat":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Lat"},"lng":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Lng"},"geocoded_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Geocoded At"},"geocode_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Geocode Status"},"is_geocoded":{"type":"boolean","title":"Is Geocoded","default":false},"full_address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Full Address"},"user_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"User Count"},"active_booking_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Active Booking Count"},"total_booking_count":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Total Booking Count"},"last_activity":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Activity"}},"type":"object","required":["id","code","name","display_name","email","phone","address","city","state","postal_code","country","timezone","status","settings","business_hours","service_area_radius","escalation_radius_miles","max_concurrent_bookings","booking_lead_time_hours","branding_config","created_at","updated_at"],"title":"StationResponse","description":"Response model for station information."},"StationUpdateRequest":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":100,"minLength":1},{"type":"null"}],"title":"Name"},"display_name":{"anyOf":[{"type":"string","maxLength":200,"minLength":1},{"type":"null"}],"title":"Display Name"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"phone":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Phone"},"address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Address"},"city":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"City"},"state":{"anyOf":[{"type":"string","maxLength":2},{"type":"null"}],"title":"State"},"postal_code":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Postal Code"},"country":{"anyOf":[{"type":"string","maxLength":2},{"type":"null"}],"title":"Country"},"timezone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Timezone"},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status","description":"Station status: active, inactive, suspended, maintenance"},"settings":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Settings"},"business_hours":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Business Hours"},"service_area_radius":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Service Area Radius","description":"Service radius in miles"},"escalation_radius_miles":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Escalation Radius Miles","description":"Distance beyond which bookings require human escalation"},"max_concurrent_bookings":{"anyOf":[{"type":"integer","minimum":1.0},{"type":"null"}],"title":"Max Concurrent Bookings"},"booking_lead_time_hours":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Booking Lead Time Hours"},"branding_config":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Branding Config"}},"type":"object","title":"StationUpdateRequest","description":"Request model for updating an existing station."},"StationUserResponse":{"properties":{"id":{"type":"integer","title":"Id"},"user_id":{"type":"integer","title":"User Id"},"station_id":{"type":"integer","title":"Station Id"},"role":{"type":"string","title":"Role"},"permissions":{"items":{"type":"string"},"type":"array","title":"Permissions"},"assigned_at":{"type":"string","format":"date-time","title":"Assigned At"},"assigned_by":{"type":"integer","title":"Assigned By"},"is_active":{"type":"boolean","title":"Is Active"},"user_email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Email"},"user_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Name"},"last_login":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Login"}},"type":"object","required":["id","user_id","station_id","role","permissions","assigned_at","assigned_by","is_active"],"title":"StationUserResponse","description":"Response model for station user information."},"SubscriberCreate":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source"},"sms_consent":{"type":"boolean","title":"Sms Consent","default":false},"email_consent":{"type":"boolean","title":"Email Consent","default":true},"tags":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Tags"}},"type":"object","required":["email"],"title":"SubscriberCreate"},"SubscriberResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"customer_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Customer Id"},"email":{"type":"string","title":"Email"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"subscribed":{"type":"boolean","title":"Subscribed"},"source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source"},"sms_consent":{"type":"boolean","title":"Sms Consent"},"email_consent":{"type":"boolean","title":"Email Consent"},"tags":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Tags"},"engagement_score":{"type":"integer","title":"Engagement Score"},"total_emails_sent":{"type":"integer","title":"Total Emails Sent"},"total_emails_opened":{"type":"integer","title":"Total Emails Opened"},"total_clicks":{"type":"integer","title":"Total Clicks"},"last_email_sent_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Email Sent Date"},"last_opened_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Opened Date"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","customer_id","email","phone","subscribed","source","sms_consent","email_consent","tags","engagement_score","total_emails_sent","total_emails_opened","total_clicks","last_email_sent_date","last_opened_date","created_at"],"title":"SubscriberResponse","description":"Subscriber information response model.\n\nIMPORTANT Field Usage Clarification:\n- email: Used for identification, NOT for marketing newsletters\n- sms_consent: Controls SMS newsletters (primary marketing channel via RingCentral)\n- email_consent: Controls admin emails only (invoices, booking confirmations)\n- total_emails_sent: Tracks admin emails, NOT marketing newsletters\n- total_sms_sent: Would track SMS newsletters (primary marketing channel)"},"SubscriberUpdate":{"properties":{"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"sms_consent":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Sms Consent"},"email_consent":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Email Consent"},"tags":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Tags"},"subscribed":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Subscribed"}},"type":"object","title":"SubscriberUpdate"},"SuccessResponse":{"properties":{"success":{"type":"boolean","title":"Success","default":true},"message":{"type":"string","title":"Message"},"data":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Data"}},"type":"object","required":["message"],"title":"SuccessResponse","description":"Generic success response."},"SuggestedTips":{"properties":{"tip_20_percent":{"type":"integer","title":"Tip 20 Percent"},"tip_25_percent":{"type":"integer","title":"Tip 25 Percent"},"tip_30_percent":{"type":"integer","title":"Tip 30 Percent"},"tip_35_percent":{"type":"integer","title":"Tip 35 Percent"}},"type":"object","required":["tip_20_percent","tip_25_percent","tip_30_percent","tip_35_percent"],"title":"SuggestedTips","description":"Suggested tip amounts."},"SuggestionResponse":{"properties":{"requested_date":{"type":"string","format":"date","title":"Requested Date"},"requested_time":{"type":"string","format":"time","title":"Requested Time"},"is_requested_available":{"type":"boolean","title":"Is Requested Available"},"conflict_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Conflict Reason"},"suggestions":{"items":{"$ref":"#/components/schemas/SlotAvailabilityResponse"},"type":"array","title":"Suggestions","default":[]},"message":{"type":"string","title":"Message","default":""}},"type":"object","required":["requested_date","requested_time","is_requested_available"],"title":"SuggestionResponse","description":"Response with availability and suggestions."},"SyncActionRequest":{"properties":{"sources":{"anyOf":[{"items":{"type":"string","enum":["menu","faqs","terms"]},"type":"array"},{"type":"null"}],"title":"Sources"},"force":{"type":"boolean","title":"Force","default":false}},"type":"object","title":"SyncActionRequest","description":"Request model for sync actions"},"SyncActionResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"menu":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Menu"},"faqs":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Faqs"},"terms":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Terms"},"overall_success":{"type":"boolean","title":"Overall Success"},"message":{"type":"string","title":"Message"},"timestamp":{"type":"string","title":"Timestamp"}},"type":"object","required":["success","overall_success","message","timestamp"],"title":"SyncActionResponse","description":"Response model for sync actions"},"SyncHistoryResponse":{"properties":{"records":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Records"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"page_size":{"type":"integer","title":"Page Size"},"timestamp":{"type":"string","title":"Timestamp"}},"type":"object","required":["records","total","page","page_size","timestamp"],"title":"SyncHistoryResponse","description":"Response model for sync history"},"SyncResultResponse":{"properties":{"success":{"type":"boolean","title":"Success"},"menu":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Menu"},"faqs":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Faqs"},"terms":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Terms"},"overall_success":{"type":"boolean","title":"Overall Success"},"timestamp":{"type":"string","title":"Timestamp"},"message":{"type":"string","title":"Message"}},"type":"object","required":["success","overall_success","timestamp","message"],"title":"SyncResultResponse","description":"Response model for sync operation result"},"SyncTriggerRequest":{"properties":{"force":{"type":"boolean","title":"Force","description":"Override conflicts (superadmin only)","default":false},"sources":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Sources","description":"Specific sources to sync (menu, faqs, terms). If None, sync all."}},"type":"object","title":"SyncTriggerRequest","description":"Request model for triggering sync"},"TCPAStatus":{"type":"string","enum":["opted_in","opted_out","pending"],"title":"TCPAStatus","description":"TCPA compliance status"},"TCPAStatusResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"contact_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Contact Id"},"phone_number":{"type":"string","title":"Phone Number"},"status":{"$ref":"#/components/schemas/TCPAStatus"},"channel":{"$ref":"#/components/schemas/api__v1__inbox__models__MessageChannel"},"opt_in_method":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Opt In Method"},"opt_in_source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Opt In Source"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","phone_number","status","channel","created_at","updated_at"],"title":"TCPAStatusResponse","description":"TCPA status response"},"TCPAUpdateRequest":{"properties":{"phone_number":{"type":"string","pattern":"^\\+?1?[0-9]{10,15}$","title":"Phone Number"},"channel":{"$ref":"#/components/schemas/api__v1__inbox__models__MessageChannel"},"status":{"$ref":"#/components/schemas/TCPAStatus"},"opt_in_method":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Opt In Method"},"opt_in_source":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Opt In Source"}},"type":"object","required":["phone_number","channel","status"],"title":"TCPAUpdateRequest","description":"Request to update TCPA status"},"TaxBreakdownResponse":{"properties":{"taxable_amount_cents":{"type":"integer","title":"Taxable Amount Cents"},"tax_amount_cents":{"type":"integer","title":"Tax Amount Cents"},"travel_fee_cents":{"type":"integer","title":"Travel Fee Cents"},"tip_cents":{"type":"integer","title":"Tip Cents"},"subtotal_cents":{"type":"integer","title":"Subtotal Cents"},"total_cents":{"type":"integer","title":"Total Cents"},"tax_rate":{"type":"number","title":"Tax Rate"}},"type":"object","required":["taxable_amount_cents","tax_amount_cents","travel_fee_cents","tip_cents","subtotal_cents","total_cents","tax_rate"],"title":"TaxBreakdownResponse","description":"Tax calculation breakdown."},"TemplateResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"agreement_type":{"type":"string","title":"Agreement Type"},"version":{"type":"string","title":"Version"},"title":{"type":"string","title":"Title"},"content_rendered":{"type":"string","title":"Content Rendered"},"effective_date":{"type":"string","format":"date","title":"Effective Date"},"requires_signature":{"type":"boolean","title":"Requires Signature"}},"type":"object","required":["id","agreement_type","version","title","content_rendered","effective_date","requires_signature"],"title":"TemplateResponse","description":"Agreement template response."},"ThreadCreateRequest":{"properties":{"channel":{"$ref":"#/components/schemas/api__v1__inbox__models__MessageChannel"},"subject":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Subject"},"contact_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Contact Id"},"booking_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Booking Id"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata"}},"type":"object","required":["channel"],"title":"ThreadCreateRequest","description":"Request to create a new thread"},"ThreadStatus":{"type":"string","enum":["open","pending","closed","archived"],"title":"ThreadStatus"},"ThreadUpdate":{"properties":{"status":{"anyOf":[{"$ref":"#/components/schemas/ThreadStatus"},{"type":"null"}]},"customer_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Name"},"subject":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subject"},"tags":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Tags"},"priority":{"anyOf":[{"type":"integer","maximum":5.0,"minimum":1.0},{"type":"null"}],"title":"Priority"},"assigned_to":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assigned To"}},"type":"object","title":"ThreadUpdate"},"ThreadWithMessages":{"properties":{"channel":{"$ref":"#/components/schemas/api__v1__endpoints__inbox__MessageChannel"},"status":{"$ref":"#/components/schemas/ThreadStatus","default":"open"},"customer_identifier":{"type":"string","title":"Customer Identifier","description":"Phone, email, or social username"},"customer_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Name"},"subject":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subject"},"tags":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Tags","default":[]},"priority":{"type":"integer","maximum":5.0,"minimum":1.0,"title":"Priority","description":"1=Low, 5=Urgent","default":1},"id":{"type":"integer","title":"Id"},"message_count":{"type":"integer","title":"Message Count","default":0},"unread_count":{"type":"integer","title":"Unread Count","default":0},"last_message_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Message At"},"last_message_preview":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Message Preview"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"assigned_to":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assigned To"},"customer_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Customer Id"},"lead_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Lead Id"},"messages":{"items":{"$ref":"#/components/schemas/api__v1__endpoints__inbox__MessageResponse"},"type":"array","title":"Messages","default":[]}},"type":"object","required":["channel","customer_identifier","id","created_at","updated_at"],"title":"ThreadWithMessages"},"ThreadWithMessagesResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"subject":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subject"},"channel":{"$ref":"#/components/schemas/api__v1__inbox__models__MessageChannel"},"contact_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Contact Id"},"booking_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Booking Id"},"is_active":{"type":"boolean","title":"Is Active"},"is_archived":{"type":"boolean","title":"Is Archived"},"tcpa_status":{"$ref":"#/components/schemas/TCPAStatus"},"tcpa_updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Tcpa Updated At"},"message_count":{"type":"integer","title":"Message Count","default":0},"unread_count":{"type":"integer","title":"Unread Count","default":0},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"last_message_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Message At"},"latest_message":{"anyOf":[{"$ref":"#/components/schemas/api__v1__inbox__schemas__MessageResponse"},{"type":"null"}]},"messages":{"items":{"$ref":"#/components/schemas/api__v1__inbox__schemas__MessageResponse"},"type":"array","title":"Messages","default":[]}},"type":"object","required":["id","channel","is_active","is_archived","tcpa_status","created_at","updated_at"],"title":"ThreadWithMessagesResponse","description":"Thread with full message history"},"TikTokContentResponse":{"properties":{"video_concept":{"type":"string","title":"Video Concept"},"hooks":{"items":{"type":"string"},"type":"array","title":"Hooks"},"caption":{"type":"string","title":"Caption"},"hashtags":{"items":{"type":"string"},"type":"array","title":"Hashtags"},"music_suggestion":{"type":"string","title":"Music Suggestion"}},"type":"object","required":["video_concept","hooks","caption","hashtags","music_suggestion"],"title":"TikTokContentResponse","description":"TikTok campaign content"},"TimeOffApprovalRequest":{"properties":{"status":{"$ref":"#/components/schemas/schemas__chef_portal__TimeOffStatus","description":"Must be 'approved' or 'denied'"},"notes":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Notes"}},"type":"object","required":["status"],"title":"TimeOffApprovalRequest","description":"Station manager approval/denial of time-off."},"TimeOffRequestCreate":{"properties":{"start_date":{"type":"string","format":"date","title":"Start Date"},"end_date":{"type":"string","format":"date","title":"End Date"},"type":{"$ref":"#/components/schemas/TimeOffType"},"reason":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Reason"}},"type":"object","required":["start_date","end_date","type"],"title":"TimeOffRequestCreate","description":"Create a new time-off request."},"TimeOffRequestResponse":{"properties":{"start_date":{"type":"string","format":"date","title":"Start Date"},"end_date":{"type":"string","format":"date","title":"End Date"},"type":{"$ref":"#/components/schemas/TimeOffType"},"reason":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Reason"},"id":{"type":"string","format":"uuid","title":"Id"},"chef_id":{"type":"string","format":"uuid","title":"Chef Id"},"status":{"$ref":"#/components/schemas/schemas__chef_portal__TimeOffStatus"},"approved_by":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Approved By"},"requested_at":{"type":"string","format":"date-time","title":"Requested At"},"processed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Processed At"}},"type":"object","required":["start_date","end_date","type","id","chef_id","status","requested_at"],"title":"TimeOffRequestResponse","description":"Response for a single time-off request."},"TimeOffType":{"type":"string","enum":["vacation","sick","personal","unpaid"],"title":"TimeOffType","description":"Types of time-off requests."},"TimeSlot":{"properties":{"time":{"type":"string","title":"Time","description":"Time slot label (e.g., '12PM')"},"label":{"type":"string","title":"Label","description":"Human readable label (e.g., '12:00 PM - 2:00 PM')"},"available":{"type":"integer","title":"Available","description":"Number of slots available"},"isAvailable":{"type":"boolean","title":"Isavailable","description":"Whether the slot is available"}},"type":"object","required":["time","label","available","isAvailable"],"title":"TimeSlot","description":"Schema for available time slot."},"TimingConfig":{"properties":{"menu_change_cutoff_hours":{"type":"integer","title":"Menu Change Cutoff Hours","description":"Hours before event when menu changes are no longer allowed"},"guest_count_finalize_hours":{"type":"integer","title":"Guest Count Finalize Hours","description":"Hours before event when guest count must be finalized"},"free_reschedule_hours":{"type":"integer","title":"Free Reschedule Hours","description":"Hours before event to reschedule for free"}},"type":"object","required":["menu_change_cutoff_hours","guest_count_finalize_hours","free_reschedule_hours"],"title":"TimingConfig","description":"Timing and deadline configuration (all values in hours unless noted)."},"Token":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type"},"expires_in":{"type":"integer","title":"Expires In"},"refresh_token":{"type":"string","title":"Refresh Token"},"user":{"$ref":"#/components/schemas/api__v1__endpoints__auth__UserResponse"}},"type":"object","required":["access_token","token_type","expires_in","refresh_token","user"],"title":"Token"},"TokenResponse":{"properties":{"access_token":{"type":"string","title":"Access Token","description":"JWT access token"},"token_type":{"type":"string","title":"Token Type","description":"Token type (always 'bearer')","default":"bearer"},"expires_in":{"type":"integer","title":"Expires In","description":"Token expiration time in seconds"},"refresh_token":{"type":"string","title":"Refresh Token","description":"Refresh token for obtaining new access tokens"}},"type":"object","required":["access_token","expires_in","refresh_token"],"title":"TokenResponse","description":"Authentication token response.","examples":[{"access_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","expires_in":3600,"refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","token_type":"bearer"}]},"ToolCall":{"properties":{"tool_name":{"type":"string","title":"Tool Name"},"parameters":{"additionalProperties":true,"type":"object","title":"Parameters"},"result":{"additionalProperties":true,"type":"object","title":"Result"},"execution_time_ms":{"type":"number","title":"Execution Time Ms"},"success":{"type":"boolean","title":"Success"}},"type":"object","required":["tool_name","parameters","result","execution_time_ms","success"],"title":"ToolCall","description":"Record of a tool execution.\n\nAttributes:\n    tool_name: Name of the tool executed\n    parameters: Parameters passed to the tool\n    result: Tool execution result\n    execution_time_ms: Execution time in milliseconds\n    success: Whether execution succeeded"},"TrackConversionRequest":{"properties":{"referral_code":{"type":"string","title":"Referral Code"},"referee_id":{"type":"integer","title":"Referee Id"},"conversion_value":{"type":"number","title":"Conversion Value"},"conversion_type":{"type":"string","title":"Conversion Type","default":"booking"}},"type":"object","required":["referral_code","referee_id","conversion_value"],"title":"TrackConversionRequest","description":"Request model for tracking referral conversion."},"TrafficSplitUpdate":{"properties":{"intent":{"type":"string","title":"Intent","description":"Intent category (faq/quote/booking)"},"percentage":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Percentage","description":"Percentage of traffic to local model (0-100)"}},"type":"object","required":["intent","percentage"],"title":"TrafficSplitUpdate","description":"Request to update traffic split"},"TravelConfig":{"properties":{"free_miles":{"type":"integer","title":"Free Miles","description":"Free travel radius in miles"},"per_mile_cents":{"type":"integer","title":"Per Mile Cents","description":"Cost per mile in cents after free radius"}},"type":"object","required":["free_miles","per_mile_cents"],"title":"TravelConfig","description":"Travel fee configuration."},"TravelInfo":{"properties":{"distance_miles":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Distance Miles"},"duration_minutes":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Duration Minutes"},"travel_fee":{"type":"number","title":"Travel Fee","default":0.0},"free_miles":{"type":"integer","title":"Free Miles","default":30},"per_mile_rate":{"type":"number","title":"Per Mile Rate","default":2.0},"station_name":{"type":"string","title":"Station Name","default":"Fremont Station"},"source":{"type":"string","title":"Source","default":"estimate"}},"type":"object","title":"TravelInfo","description":"Travel fee calculation details."},"TravelPolicy":{"properties":{"free_miles":{"type":"integer","title":"Free Miles","description":"Free travel radius in miles"},"per_mile_rate":{"type":"number","title":"Per Mile Rate","description":"Cost per mile in dollars"},"text":{"type":"string","title":"Text","description":"Human-readable policy text"}},"type":"object","required":["free_miles","per_mile_rate","text"],"title":"TravelPolicy","description":"Travel policy with rates and human-readable text."},"TravelTimeRequest":{"properties":{"origin_lat":{"anyOf":[{"type":"number"},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"}],"title":"Origin Lat"},"origin_lng":{"anyOf":[{"type":"number"},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"}],"title":"Origin Lng"},"dest_lat":{"anyOf":[{"type":"number"},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"}],"title":"Dest Lat"},"dest_lng":{"anyOf":[{"type":"number"},{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"}],"title":"Dest Lng"},"departure_time":{"anyOf":[{"type":"string","format":"time"},{"type":"null"}],"title":"Departure Time"}},"type":"object","required":["origin_lat","origin_lng","dest_lat","dest_lng"],"title":"TravelTimeRequest","description":"Request for travel time calculation."},"TravelTimeResponse":{"properties":{"duration_minutes":{"type":"integer","title":"Duration Minutes"},"duration_with_traffic":{"type":"integer","title":"Duration With Traffic"},"distance_km":{"type":"string","pattern":"^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$","title":"Distance Km"},"is_rush_hour":{"type":"boolean","title":"Is Rush Hour","default":false},"traffic_multiplier":{"type":"number","title":"Traffic Multiplier","default":1.0}},"type":"object","required":["duration_minutes","duration_with_traffic","distance_km"],"title":"TravelTimeResponse","description":"Response with travel time info."},"UpdateEmailRequest":{"properties":{"is_read":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Read"},"is_starred":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Starred"},"is_archived":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Archived"},"labels":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Labels"}},"type":"object","title":"UpdateEmailRequest","description":"Update email status"},"UpdateUserRequest":{"properties":{"full_name":{"anyOf":[{"type":"string","maxLength":255,"minLength":1},{"type":"null"}],"title":"Full Name"},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status","description":"User status: active, inactive, suspended"},"is_super_admin":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Super Admin","description":"Super admin privileges"}},"type":"object","title":"UpdateUserRequest","description":"Request schema for updating an existing user","example":{"full_name":"John Smith Updated","is_super_admin":false,"status":"active"}},"UserListResponse":{"properties":{"success":{"type":"boolean","title":"Success","default":true},"data":{"items":{"$ref":"#/components/schemas/UserPublic"},"type":"array","title":"Data"},"message":{"type":"string","title":"Message","default":"Users retrieved successfully"}},"type":"object","required":["data"],"title":"UserListResponse","description":"API response for list of users"},"UserPublic":{"properties":{"id":{"type":"string","title":"Id"},"email":{"type":"string","format":"email","title":"Email"},"full_name":{"type":"string","title":"Full Name"},"avatar_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar Url"},"auth_provider":{"$ref":"#/components/schemas/AuthProviderSchema"},"status":{"$ref":"#/components/schemas/UserStatusSchema"},"is_super_admin":{"type":"boolean","title":"Is Super Admin"},"is_email_verified":{"type":"boolean","title":"Is Email Verified"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"last_login_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Login At"}},"type":"object","required":["id","email","full_name","auth_provider","status","is_super_admin","is_email_verified","created_at"],"title":"UserPublic","description":"Public user schema (safe for client exposure)"},"UserRole":{"type":"string","enum":["SUPER_ADMIN","ADMIN","CUSTOMER_SUPPORT","STATION_MANAGER","CHEF"],"title":"UserRole","description":"5-tier role hierarchy for admin access control.\n\nRoles (highest to lowest):\n- SUPER_ADMIN: Full system access, can manage admins\n- ADMIN: Most operations, cannot manage admin accounts\n- CUSTOMER_SUPPORT: Customer-facing operations only (all bookings)\n- STATION_MANAGER: Station-specific view + chef scheduling, can work as chef\n- CHEF: View own schedule, update availability, see assigned event details\n\nROLE-SPECIFIC PAGE VIEWS:\n=========================\nEach role has a dedicated page/view in the admin panel:\n- SUPER_ADMIN: Full admin dashboard with all menu options\n- ADMIN: Admin dashboard scoped to assigned stations\n- CUSTOMER_SUPPORT: Customer-focused dashboard (bookings, reviews, leads)\n- STATION_MANAGER: Station dashboard (chef scheduling, station bookings)\n- CHEF: Chef portal (own schedule, availability, assigned event details)\n\nEach role ONLY sees options relevant to their job tasks.\nNo role can access pages/features outside their scope.\n\nNote:\n    - STAFF role is NOT used (removed from active use)\n    - Regular customers don't have admin accounts - they book as guests\n\nValues use UPPERCASE to match auth.py UserRole (SSoT)."},"UserRolesResponse":{"properties":{"user_id":{"type":"string","title":"User Id"},"user_email":{"type":"string","title":"User Email"},"user_name":{"type":"string","title":"User Name"},"roles":{"items":{"$ref":"#/components/schemas/RoleResponse"},"type":"array","title":"Roles"},"all_permissions":{"items":{"type":"string"},"type":"array","title":"All Permissions"}},"type":"object","required":["user_id","user_email","user_name","roles","all_permissions"],"title":"UserRolesResponse","description":"User's roles and effective permissions"},"UserStationAssignmentRequest":{"properties":{"user_id":{"type":"integer","title":"User Id","description":"User ID to assign"},"role":{"type":"string","pattern":"^(super_admin|admin|station_admin|customer_support)$","title":"Role","description":"Role to assign"},"permissions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Permissions","description":"Additional permissions"}},"type":"object","required":["user_id","role"],"title":"UserStationAssignmentRequest","description":"Request model for assigning users to stations.","example":{"permissions":["manage_bookings","view_analytics"],"role":"station_admin","user_id":123}},"UserStatusSchema":{"type":"string","enum":["pending","active","suspended","deactivated"],"title":"UserStatusSchema","description":"User status types"},"ValidateSignatureRequest":{"properties":{"signature_image_base64":{"type":"string","title":"Signature Image Base64","description":"Base64-encoded signature"}},"type":"object","required":["signature_image_base64"],"title":"ValidateSignatureRequest","description":"Request to validate signature image."},"ValidateSignatureResponse":{"properties":{"is_valid":{"type":"boolean","title":"Is Valid"},"error":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error"},"width":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Width"},"height":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Height"},"format":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Format"}},"type":"object","required":["is_valid"],"title":"ValidateSignatureResponse","description":"Response for signature validation."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VariableCreateRequest":{"properties":{"category":{"type":"string","title":"Category","description":"Category: pricing, deposit, travel, booking"},"key":{"type":"string","title":"Key","description":"Variable key, e.g., adult_price_cents"},"value":{"title":"Value","description":"Variable value"},"value_type":{"type":"string","title":"Value Type","description":"Type: integer, number, boolean, string, json","default":"integer"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Human-readable description"},"effective_from":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Effective From","description":"ISO datetime when value becomes effective"},"effective_to":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Effective To","description":"ISO datetime when value expires"}},"type":"object","required":["category","key","value"],"title":"VariableCreateRequest","description":"Request model for creating a new variable."},"VariableListResponse":{"properties":{"variables":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Variables"},"count":{"type":"integer","title":"Count"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"}},"type":"object","required":["variables","count"],"title":"VariableListResponse","description":"Response model for list of variables."},"VariableUpdateRequest":{"properties":{"value":{"title":"Value","description":"New value"},"change_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Change Reason","description":"Reason for change (for audit log)"},"effective_from":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Effective From","description":"ISO datetime when value becomes effective"},"effective_to":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Effective To","description":"ISO datetime when value expires"}},"type":"object","required":["value"],"title":"VariableUpdateRequest","description":"Request model for updating a variable."},"WebAuthnRegisterFinishRequest":{"properties":{"credential_id":{"type":"string","title":"Credential Id"},"public_key":{"type":"string","title":"Public Key"},"sign_count":{"type":"integer","title":"Sign Count"},"device_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Device Name","default":"Unknown Device"},"attestation_object":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Attestation Object"},"client_data_json":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Data Json"}},"type":"object","required":["credential_id","public_key","sign_count"],"title":"WebAuthnRegisterFinishRequest","description":"Request to complete WebAuthn registration"},"WebAuthnRegisterStartResponse":{"properties":{"challenge":{"type":"string","title":"Challenge"},"rp_id":{"type":"string","title":"Rp Id"},"rp_name":{"type":"string","title":"Rp Name"},"user_id":{"type":"string","title":"User Id"},"user_name":{"type":"string","title":"User Name"},"user_display_name":{"type":"string","title":"User Display Name"},"timeout":{"type":"integer","title":"Timeout"},"attestation":{"type":"string","title":"Attestation"},"authenticator_selection":{"additionalProperties":true,"type":"object","title":"Authenticator Selection"}},"type":"object","required":["challenge","rp_id","rp_name","user_id","user_name","user_display_name","timeout","attestation","authenticator_selection"],"title":"WebAuthnRegisterStartResponse","description":"Response for WebAuthn registration start"},"WebAuthnVerifyFinishRequest":{"properties":{"credential_id":{"type":"string","title":"Credential Id"},"authenticator_data":{"type":"string","title":"Authenticator Data"},"signature":{"type":"string","title":"Signature"},"client_data_json":{"type":"string","title":"Client Data Json"}},"type":"object","required":["credential_id","authenticator_data","signature","client_data_json"],"title":"WebAuthnVerifyFinishRequest","description":"Request to complete WebAuthn verification"},"WebAuthnVerifyStartResponse":{"properties":{"challenge":{"type":"string","title":"Challenge"},"timeout":{"type":"integer","title":"Timeout"},"rp_id":{"type":"string","title":"Rp Id"},"allowed_credentials":{"items":{},"type":"array","title":"Allowed Credentials"}},"type":"object","required":["challenge","timeout","rp_id","allowed_credentials"],"title":"WebAuthnVerifyStartResponse","description":"Response for WebAuthn verification start"},"WebhookEventResponse":{"properties":{"received":{"type":"boolean","title":"Received"},"event_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Event Id"},"event_type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Event Type"},"processed":{"type":"boolean","title":"Processed","default":false},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"}},"type":"object","required":["received"],"title":"WebhookEventResponse","description":"Response model for webhook event processing."},"api__v1__endpoints__analytics__LeadAnalytics":{"properties":{"total_leads":{"type":"integer","title":"Total Leads"},"converted_leads":{"type":"integer","title":"Converted Leads"},"conversion_rate":{"type":"number","title":"Conversion Rate"},"avg_time_to_convert":{"type":"number","title":"Avg Time To Convert"},"leads_by_source":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Leads By Source"},"leads_by_stage":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Leads By Stage"},"lead_quality_distribution":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Lead Quality Distribution"},"top_performing_campaigns":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Top Performing Campaigns"}},"type":"object","required":["total_leads","converted_leads","conversion_rate","avg_time_to_convert","leads_by_source","leads_by_stage","lead_quality_distribution","top_performing_campaigns"],"title":"LeadAnalytics","description":"Lead performance analytics"},"api__v1__endpoints__analytics__NewsletterAnalytics":{"properties":{"total_subscribers":{"type":"integer","title":"Total Subscribers"},"active_campaigns":{"type":"integer","title":"Active Campaigns"},"total_sent":{"type":"integer","title":"Total Sent"},"avg_open_rate":{"type":"number","title":"Avg Open Rate"},"avg_click_rate":{"type":"number","title":"Avg Click Rate"},"subscriber_growth":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Subscriber Growth"},"top_campaigns":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Top Campaigns"},"engagement_by_segment":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Engagement By Segment"}},"type":"object","required":["total_subscribers","active_campaigns","total_sent","avg_open_rate","avg_click_rate","subscriber_growth","top_campaigns","engagement_by_segment"],"title":"NewsletterAnalytics","description":"Newsletter campaign analytics"},"api__v1__endpoints__auth__LoginRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","title":"Password"}},"type":"object","required":["email","password"],"title":"LoginRequest"},"api__v1__endpoints__auth__UserResponse":{"properties":{"id":{"type":"string","title":"Id"},"email":{"type":"string","title":"Email"},"role":{"$ref":"#/components/schemas/UserRole"},"full_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Full Name"},"is_active":{"type":"boolean","title":"Is Active","default":true}},"type":"object","required":["id","email","role"],"title":"UserResponse"},"api__v1__endpoints__health__ReadinessResponse":{"properties":{"status":{"type":"string","title":"Status","description":"ready or not_ready"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp","description":"Response timestamp"},"checks":{"additionalProperties":{"$ref":"#/components/schemas/ServiceHealthCheck"},"type":"object","title":"Checks","description":"Individual service checks"},"ready":{"type":"boolean","title":"Ready","description":"Overall readiness status"},"details":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Details","description":"Additional details"}},"type":"object","required":["status","timestamp","checks","ready"],"title":"ReadinessResponse","description":"Kubernetes readiness probe response.","example":{"checks":{},"ready":true,"status":"ready","timestamp":"2024-10-25T10:30:00Z"}},"api__v1__endpoints__inbox__MessageChannel":{"type":"string","enum":["sms","instagram","facebook","email","whatsapp"],"title":"MessageChannel"},"api__v1__endpoints__inbox__MessageDirection":{"type":"string","enum":["inbound","outbound"],"title":"MessageDirection"},"api__v1__endpoints__inbox__MessageResponse":{"properties":{"content":{"type":"string","maxLength":2000,"minLength":1,"title":"Content"},"channel":{"$ref":"#/components/schemas/api__v1__endpoints__inbox__MessageChannel"},"direction":{"$ref":"#/components/schemas/api__v1__endpoints__inbox__MessageDirection"},"thread_id":{"type":"integer","title":"Thread Id"},"from_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"From Number"},"to_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"To Number"},"from_email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"From Email"},"to_email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"To Email"},"social_user_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Social User Id"},"social_username":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Social Username"},"attachments":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Attachments","default":[]},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata","default":{}},"id":{"type":"integer","title":"Id"},"status":{"$ref":"#/components/schemas/api__v1__endpoints__inbox__MessageStatus"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"sent_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Sent At"},"delivered_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Delivered At"},"read_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Read At"},"assigned_to":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assigned To"},"ai_suggested_reply":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ai Suggested Reply"}},"type":"object","required":["content","channel","direction","thread_id","id","status","created_at","updated_at"],"title":"MessageResponse"},"api__v1__endpoints__inbox__MessageStatus":{"type":"string","enum":["pending","sent","delivered","read","failed"],"title":"MessageStatus"},"api__v1__endpoints__inbox__ThreadResponse":{"properties":{"channel":{"$ref":"#/components/schemas/api__v1__endpoints__inbox__MessageChannel"},"status":{"$ref":"#/components/schemas/ThreadStatus","default":"open"},"customer_identifier":{"type":"string","title":"Customer Identifier","description":"Phone, email, or social username"},"customer_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Customer Name"},"subject":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subject"},"tags":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Tags","default":[]},"priority":{"type":"integer","maximum":5.0,"minimum":1.0,"title":"Priority","description":"1=Low, 5=Urgent","default":1},"id":{"type":"integer","title":"Id"},"message_count":{"type":"integer","title":"Message Count","default":0},"unread_count":{"type":"integer","title":"Unread Count","default":0},"last_message_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Message At"},"last_message_preview":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Last Message Preview"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"assigned_to":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assigned To"},"customer_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Customer Id"},"lead_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Lead Id"}},"type":"object","required":["channel","customer_identifier","id","created_at","updated_at"],"title":"ThreadResponse"},"api__v1__endpoints__leads__LeadCreate":{"properties":{"first_name":{"type":"string","maxLength":50,"minLength":1,"title":"First Name"},"last_name":{"type":"string","maxLength":50,"minLength":1,"title":"Last Name"},"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email"},"phone":{"anyOf":[{"type":"string","pattern":"^\\+?1?[2-9]\\d{2}[2-9]\\d{2}\\d{4}$"},{"type":"null"}],"title":"Phone"},"event_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Event Date"},"guest_count":{"anyOf":[{"type":"integer","maximum":500.0,"minimum":1.0},{"type":"null"}],"title":"Guest Count"},"event_location":{"anyOf":[{"type":"string","maxLength":200},{"type":"null"}],"title":"Event Location"},"budget_range":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Budget Range"},"message":{"anyOf":[{"type":"string","maxLength":1000},{"type":"null"}],"title":"Message"},"source":{"$ref":"#/components/schemas/LeadSource","default":"web_quote"},"status":{"$ref":"#/components/schemas/LeadStatus","default":"new"},"notes":{"anyOf":[{"type":"string","maxLength":2000},{"type":"null"}],"title":"Notes"},"sms_consent":{"type":"boolean","title":"Sms Consent","default":false},"email_consent":{"type":"boolean","title":"Email Consent","default":false}},"type":"object","required":["first_name","last_name"],"title":"LeadCreate"},"api__v1__endpoints__leads__LeadResponse":{"properties":{"first_name":{"type":"string","maxLength":50,"minLength":1,"title":"First Name"},"last_name":{"type":"string","maxLength":50,"minLength":1,"title":"Last Name"},"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email"},"phone":{"anyOf":[{"type":"string","pattern":"^\\+?1?[2-9]\\d{2}[2-9]\\d{2}\\d{4}$"},{"type":"null"}],"title":"Phone"},"event_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Event Date"},"guest_count":{"anyOf":[{"type":"integer","maximum":500.0,"minimum":1.0},{"type":"null"}],"title":"Guest Count"},"event_location":{"anyOf":[{"type":"string","maxLength":200},{"type":"null"}],"title":"Event Location"},"budget_range":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Budget Range"},"message":{"anyOf":[{"type":"string","maxLength":1000},{"type":"null"}],"title":"Message"},"source":{"$ref":"#/components/schemas/LeadSource","default":"web_quote"},"status":{"$ref":"#/components/schemas/LeadStatus","default":"new"},"notes":{"anyOf":[{"type":"string","maxLength":2000},{"type":"null"}],"title":"Notes"},"id":{"type":"integer","title":"Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"last_contact_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Contact Date"},"assigned_to":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assigned To"},"conversion_probability":{"type":"integer","title":"Conversion Probability","default":0}},"type":"object","required":["first_name","last_name","id","created_at","updated_at"],"title":"LeadResponse"},"api__v1__endpoints__leads__LeadUpdate":{"properties":{"first_name":{"anyOf":[{"type":"string","maxLength":50,"minLength":1},{"type":"null"}],"title":"First Name"},"last_name":{"anyOf":[{"type":"string","maxLength":50,"minLength":1},{"type":"null"}],"title":"Last Name"},"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email"},"phone":{"anyOf":[{"type":"string","pattern":"^\\+?1?[2-9]\\d{2}[2-9]\\d{2}\\d{4}$"},{"type":"null"}],"title":"Phone"},"event_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Event Date"},"guest_count":{"anyOf":[{"type":"integer","maximum":500.0,"minimum":1.0},{"type":"null"}],"title":"Guest Count"},"event_location":{"anyOf":[{"type":"string","maxLength":200},{"type":"null"}],"title":"Event Location"},"budget_range":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Budget Range"},"message":{"anyOf":[{"type":"string","maxLength":1000},{"type":"null"}],"title":"Message"},"source":{"anyOf":[{"$ref":"#/components/schemas/LeadSource"},{"type":"null"}]},"status":{"anyOf":[{"$ref":"#/components/schemas/LeadStatus"},{"type":"null"}]},"notes":{"anyOf":[{"type":"string","maxLength":2000},{"type":"null"}],"title":"Notes"}},"type":"object","title":"LeadUpdate"},"api__v1__inbox__models__MessageChannel":{"type":"string","enum":["sms","email","websocket","facebook","instagram","twitter","whatsapp"],"title":"MessageChannel","description":"Communication channel types"},"api__v1__inbox__models__MessageDirection":{"type":"string","enum":["inbound","outbound"],"title":"MessageDirection","description":"Message direction"},"api__v1__inbox__models__MessageStatus":{"type":"string","enum":["pending","delivered","failed","read","replied"],"title":"MessageStatus","description":"Message processing status"},"api__v1__inbox__schemas__MessageResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"channel":{"$ref":"#/components/schemas/api__v1__inbox__models__MessageChannel"},"direction":{"$ref":"#/components/schemas/api__v1__inbox__models__MessageDirection"},"status":{"$ref":"#/components/schemas/api__v1__inbox__models__MessageStatus"},"contact_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Contact Id"},"phone_number":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone Number"},"email_address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email Address"},"social_handle":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Social Handle"},"subject":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subject"},"content":{"type":"string","title":"Content"},"content_type":{"type":"string","title":"Content Type"},"thread_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Thread Id"},"parent_message_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Parent Message Id"},"external_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"External Id"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"sent_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Sent At"},"delivered_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Delivered At"},"read_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Read At"}},"type":"object","required":["id","channel","direction","status","content","content_type","created_at"],"title":"MessageResponse","description":"Message response schema"},"api__v1__inbox__schemas__SendMessageRequest":{"properties":{"channel":{"$ref":"#/components/schemas/api__v1__inbox__models__MessageChannel"},"direction":{"$ref":"#/components/schemas/api__v1__inbox__models__MessageDirection","default":"outbound"},"phone_number":{"anyOf":[{"type":"string","pattern":"^\\+?1?[0-9]{10,15}$"},{"type":"null"}],"title":"Phone Number"},"email_address":{"anyOf":[{"type":"string","pattern":"^[^@]+@[^@]+\\.[^@]+$"},{"type":"null"}],"title":"Email Address"},"social_handle":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Social Handle"},"contact_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Contact Id"},"content":{"type":"string","maxLength":10000,"minLength":1,"title":"Content"},"content_type":{"type":"string","title":"Content Type","default":"text/plain"},"subject":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Subject"},"thread_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Thread Id"},"parent_message_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Parent Message Id"},"metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Metadata"}},"type":"object","required":["channel","content"],"title":"SendMessageRequest","description":"Request to send a message through unified inbox"},"api__v1__inbox__schemas__ThreadResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"subject":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subject"},"channel":{"$ref":"#/components/schemas/api__v1__inbox__models__MessageChannel"},"contact_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Contact Id"},"booking_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Booking Id"},"is_active":{"type":"boolean","title":"Is Active"},"is_archived":{"type":"boolean","title":"Is Archived"},"tcpa_status":{"$ref":"#/components/schemas/TCPAStatus"},"tcpa_updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Tcpa Updated At"},"message_count":{"type":"integer","title":"Message Count","default":0},"unread_count":{"type":"integer","title":"Unread Count","default":0},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"last_message_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Message At"},"latest_message":{"anyOf":[{"$ref":"#/components/schemas/api__v1__inbox__schemas__MessageResponse"},{"type":"null"}]}},"type":"object","required":["id","channel","is_active","is_archived","tcpa_status","created_at","updated_at"],"title":"ThreadResponse","description":"Thread response schema"},"api__v1__knowledge_sync__router__DiffResponse":{"properties":{"source":{"type":"string","enum":["menu","faqs","terms"],"title":"Source"},"file_hash":{"type":"string","title":"File Hash"},"changed":{"type":"boolean","title":"Changed"},"added":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Added"},"modified":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Modified"},"deleted":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Deleted"},"conflicts":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Conflicts"},"summary":{"type":"string","title":"Summary"}},"type":"object","required":["source","file_hash","changed","added","modified","deleted","conflicts","summary"],"title":"DiffResponse","description":"Response model for showing differences"},"api__v1__knowledge_sync__router__SyncStatusResponse":{"properties":{"menu":{"additionalProperties":true,"type":"object","title":"Menu"},"faqs":{"additionalProperties":true,"type":"object","title":"Faqs"},"terms":{"additionalProperties":true,"type":"object","title":"Terms"},"overall_status":{"type":"string","enum":["synced","needs_sync","conflicts"],"title":"Overall Status"},"timestamp":{"type":"string","title":"Timestamp"}},"type":"object","required":["menu","faqs","terms","overall_status","timestamp"],"title":"SyncStatusResponse","description":"Response model for sync status"},"api__v1__schemas__user__UserResponse":{"properties":{"success":{"type":"boolean","title":"Success","default":true},"data":{"$ref":"#/components/schemas/UserPublic"},"message":{"type":"string","title":"Message","default":"User retrieved successfully"}},"type":"object","required":["data"],"title":"UserResponse","description":"API response for single user"},"db__models__ops__ChefStatus":{"type":"string","enum":["active","inactive","on_leave","terminated"],"title":"ChefStatus","description":"Chef employment status"},"db__models__ops__TimeOffStatus":{"type":"string","enum":["pending","approved","denied","cancelled"],"title":"TimeOffStatus","description":"Time-off request status"},"routers__v1__admin__config__AuditLogResponse":{"properties":{"entries":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Entries"},"count":{"type":"integer","title":"Count"},"page":{"type":"integer","title":"Page"},"limit":{"type":"integer","title":"Limit"}},"type":"object","required":["entries","count","page","limit"],"title":"AuditLogResponse","description":"Response model for audit log entries."},"routers__v1__admin_analytics__LeadAnalytics":{"properties":{"total_leads":{"type":"integer","title":"Total Leads"},"new_leads":{"type":"integer","title":"New Leads"},"qualified_leads":{"type":"integer","title":"Qualified Leads"},"converted_leads":{"type":"integer","title":"Converted Leads"},"conversion_rate":{"type":"number","title":"Conversion Rate"},"average_score":{"type":"number","title":"Average Score"},"leads_by_source":{"additionalProperties":{"type":"integer"},"type":"object","title":"Leads By Source"},"leads_by_quality":{"additionalProperties":{"type":"integer"},"type":"object","title":"Leads By Quality"},"daily_lead_count":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Daily Lead Count"}},"type":"object","required":["total_leads","new_leads","qualified_leads","converted_leads","conversion_rate","average_score","leads_by_source","leads_by_quality","daily_lead_count"],"title":"LeadAnalytics"},"routers__v1__admin_analytics__NewsletterAnalytics":{"properties":{"total_subscribers":{"type":"integer","title":"Total Subscribers"},"active_subscribers":{"type":"integer","title":"Active Subscribers"},"total_campaigns":{"type":"integer","title":"Total Campaigns"},"campaigns_sent":{"type":"integer","title":"Campaigns Sent"},"average_open_rate":{"type":"number","title":"Average Open Rate"},"average_click_rate":{"type":"number","title":"Average Click Rate"},"subscriber_growth":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Subscriber Growth"},"campaign_performance":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Campaign Performance"}},"type":"object","required":["total_subscribers","active_subscribers","total_campaigns","campaigns_sent","average_open_rate","average_click_rate","subscriber_growth","campaign_performance"],"title":"NewsletterAnalytics"},"routers__v1__auth__ErrorResponse":{"properties":{"detail":{"type":"string","title":"Detail","description":"Error message"}},"type":"object","required":["detail"],"title":"ErrorResponse","description":"Standard error response."},"routers__v1__auth__LoginRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email","description":"User email address"},"password":{"type":"string","minLength":8,"title":"Password","description":"User password"}},"type":"object","required":["email","password"],"title":"LoginRequest","description":"Login request schema.","examples":[{"email":"john@example.com","password":"SecurePass123!"}]},"routers__v1__auth__UserResponse":{"properties":{"id":{"type":"string","title":"Id","description":"Unique user identifier"},"email":{"type":"string","format":"email","title":"Email","description":"User email address"},"name":{"type":"string","title":"Name","description":"User full name"},"is_admin":{"type":"boolean","title":"Is Admin","description":"Whether user has admin privileges","default":false},"created_at":{"type":"string","title":"Created At","description":"Account creation timestamp (ISO 8601)"}},"type":"object","required":["id","email","name","created_at"],"title":"UserResponse","description":"User information response.","examples":[{"created_at":"2024-10-19T10:30:00Z","email":"john@example.com","id":"user-abc123","is_admin":false,"name":"John Doe"}]},"routers__v1__bookings__schemas__BookingCreate":{"properties":{"date":{"type":"string","title":"Date","description":"Booking date in YYYY-MM-DD format"},"time":{"type":"string","title":"Time","description":"Booking time in HH:MM format"},"guests":{"type":"integer","maximum":50.0,"minimum":1.0,"title":"Guests","description":"Number of guests (1-50)"},"location_address":{"type":"string","minLength":10,"title":"Location Address","description":"Event location address"},"customer_name":{"type":"string","minLength":2,"title":"Customer Name","description":"Customer full name"},"customer_email":{"type":"string","format":"email","title":"Customer Email","description":"Customer email address"},"customer_phone":{"type":"string","title":"Customer Phone","description":"Customer phone number"},"special_requests":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Special Requests","description":"Special requests or dietary restrictions"}},"type":"object","required":["date","time","guests","location_address","customer_name","customer_email","customer_phone"],"title":"BookingCreate","description":"Schema for creating a new booking.","examples":[{"customer_email":"john@example.com","customer_name":"John Doe","customer_phone":"+14155551234","date":"2024-12-25","guests":8,"location_address":"123 Main St, San Jose, CA 95123","special_requests":"Vegetarian option for 2 guests","time":"18:00"}]},"routers__v1__bookings__schemas__ErrorResponse":{"properties":{"detail":{"type":"string","title":"Detail","description":"Error message"}},"type":"object","required":["detail"],"title":"ErrorResponse","description":"Standard error response schema.","examples":[{"detail":"Booking not found"}]},"routers__v1__campaigns__SendMessageRequest":{"properties":{"lead_id":{"type":"integer","title":"Lead Id"},"campaign_type":{"$ref":"#/components/schemas/CampaignType"}},"type":"object","required":["lead_id","campaign_type"],"title":"SendMessageRequest","description":"Request model for sending next campaign message."},"routers__v1__health_checks__HealthResponse":{"properties":{"status":{"type":"string","title":"Status"},"timestamp":{"type":"string","title":"Timestamp"},"version":{"type":"string","title":"Version"},"environment":{"type":"string","title":"Environment"},"uptime_seconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Uptime Seconds"},"components":{"items":{"$ref":"#/components/schemas/ComponentHealth"},"type":"array","title":"Components"},"overall_response_time_ms":{"type":"integer","title":"Overall Response Time Ms"}},"type":"object","required":["status","timestamp","version","environment","components","overall_response_time_ms"],"title":"HealthResponse","description":"Overall health check response"},"routers__v1__knowledge_sync__DiffResponse":{"properties":{"menu":{"additionalProperties":true,"type":"object","title":"Menu"},"faqs":{"additionalProperties":true,"type":"object","title":"Faqs"},"terms":{"additionalProperties":true,"type":"object","title":"Terms"},"has_changes":{"type":"boolean","title":"Has Changes"},"has_conflicts":{"type":"boolean","title":"Has Conflicts"},"timestamp":{"type":"string","title":"Timestamp"}},"type":"object","required":["menu","faqs","terms","has_changes","has_conflicts","timestamp"],"title":"DiffResponse","description":"Response model for detecting changes"},"routers__v1__knowledge_sync__SyncStatusResponse":{"properties":{"menu":{"additionalProperties":true,"type":"object","title":"Menu"},"faqs":{"additionalProperties":true,"type":"object","title":"Faqs"},"terms":{"additionalProperties":true,"type":"object","title":"Terms"},"overall_status":{"type":"string","title":"Overall Status","description":"synced | needs_sync | conflicts"},"timestamp":{"type":"string","title":"Timestamp"}},"type":"object","required":["menu","faqs","terms","overall_status","timestamp"],"title":"SyncStatusResponse","description":"Response model for sync status"},"routers__v1__leads__LeadCreate":{"properties":{"source":{"$ref":"#/components/schemas/LeadSource"},"contacts":{"items":{"$ref":"#/components/schemas/LeadContactCreate"},"type":"array","title":"Contacts"},"context":{"anyOf":[{"$ref":"#/components/schemas/LeadContextCreate"},{"type":"null"}]},"utm_source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Utm Source"},"utm_medium":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Utm Medium"},"utm_campaign":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Utm Campaign"}},"type":"object","required":["source","contacts"],"title":"LeadCreate"},"routers__v1__leads__LeadResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"source":{"$ref":"#/components/schemas/LeadSource"},"status":{"$ref":"#/components/schemas/LeadStatus"},"quality":{"anyOf":[{"$ref":"#/components/schemas/LeadQuality"},{"type":"null"}]},"score":{"type":"number","title":"Score"},"assigned_to":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assigned To"},"last_contact_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Contact Date"},"follow_up_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Follow Up Date"},"conversion_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Conversion Date"},"lost_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lost Reason"},"utm_source":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Utm Source"},"utm_medium":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Utm Medium"},"utm_campaign":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Utm Campaign"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","source","status","quality","score","assigned_to","last_contact_date","follow_up_date","conversion_date","lost_reason","utm_source","utm_medium","created_at","updated_at"],"title":"LeadResponse"},"routers__v1__leads__LeadUpdate":{"properties":{"status":{"anyOf":[{"$ref":"#/components/schemas/LeadStatus"},{"type":"null"}]},"quality":{"anyOf":[{"$ref":"#/components/schemas/LeadQuality"},{"type":"null"}]},"assigned_to":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Assigned To"},"follow_up_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Follow Up Date"},"lost_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lost Reason"}},"type":"object","title":"LeadUpdate"},"routers__v1__station_admin__AuditLogResponse":{"properties":{"id":{"type":"integer","title":"Id"},"station_id":{"type":"integer","title":"Station Id"},"user_id":{"type":"integer","title":"User Id"},"action":{"type":"string","title":"Action"},"resource_type":{"type":"string","title":"Resource Type"},"resource_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Resource Id"},"details":{"additionalProperties":true,"type":"object","title":"Details"},"ip_address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ip Address"},"user_agent":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Agent"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"},"user_email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Email"},"user_role":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Role"}},"type":"object","required":["id","station_id","user_id","action","resource_type","resource_id","details","ip_address","user_agent","timestamp"],"title":"AuditLogResponse","description":"Response model for audit log entries."},"schemas__booking_schemas__BookingCreate":{"properties":{"name":{"type":"string","title":"Name"},"phone":{"type":"string","title":"Phone"},"email":{"type":"string","format":"email","title":"Email"},"address":{"type":"string","title":"Address"},"city":{"type":"string","title":"City"},"zipcode":{"type":"string","title":"Zipcode"},"date":{"type":"string","title":"Date"},"time_slot":{"type":"string","title":"Time Slot"},"contact_preference":{"type":"string","title":"Contact Preference"}},"type":"object","required":["name","phone","email","address","city","zipcode","date","time_slot","contact_preference"],"title":"BookingCreate","description":"Request body for creating a new booking (legacy format).\n\nNote: For enterprise booking with UUID customer references,\nuse schemas.booking.BookingCreate instead."},"schemas__chef_portal__ChefStatus":{"type":"string","enum":["active","inactive","on_leave","suspended"],"title":"ChefStatus","description":"Chef account status."},"schemas__chef_portal__TimeOffStatus":{"type":"string","enum":["pending","approved","denied","cancelled"],"title":"TimeOffStatus","description":"Time-off request status."},"schemas__health__HealthResponse":{"properties":{"status":{"type":"string","title":"Status","description":"Overall health status"},"service":{"type":"string","title":"Service","description":"Service name"},"environment":{"type":"string","title":"Environment","description":"Environment (dev/staging/prod)"},"version":{"type":"string","title":"Version","description":"Service version"},"timestamp":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Timestamp","description":"Check timestamp"},"uptime_seconds":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Uptime Seconds","description":"Service uptime in seconds"},"database_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Database Status","description":"Database connection status"},"database_response_time_ms":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Database Response Time Ms","description":"Database response time"},"checks":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Checks","description":"Detailed checks"}},"type":"object","required":["status","service","environment","version"],"title":"HealthResponse","description":"Enhanced basic health check response."},"schemas__health__ReadinessResponse":{"properties":{"status":{"type":"string","title":"Status","description":"Readiness status"},"service":{"type":"string","title":"Service","description":"Service name"},"environment":{"type":"string","title":"Environment","description":"Environment"},"ready":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Ready","description":"Service is ready to accept traffic"},"timestamp":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Timestamp","description":"Check timestamp"},"checks":{"additionalProperties":true,"type":"object","title":"Checks","description":"Individual checks"},"database_connected":{"type":"boolean","title":"Database Connected","description":"Database connectivity"},"stripe_configured":{"type":"boolean","title":"Stripe Configured","description":"Stripe configuration status"},"email_configured":{"type":"boolean","title":"Email Configured","description":"Email configuration status"}},"type":"object","required":["status","service","environment","database_connected","stripe_configured","email_configured"],"title":"ReadinessResponse","description":"Enhanced readiness check response."}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"},"JWTBearer":{"type":"http","scheme":"bearer"},"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"/api/auth/login"}}}}}}