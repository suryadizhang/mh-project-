# ==========================================
# Backend Environment Variables
# ==========================================
# Copy this file to .env and fill in the values
# NEVER commit the .env file to version control!

# ==========================================
# Database Configuration (REQUIRED)
# ==========================================
# PostgreSQL connection string - must start with postgresql:// or postgresql+asyncpg://
# Format: postgresql+asyncpg://user:password@host:port/database
# Development example:
DATABASE_URL=postgresql+asyncpg://postgres:password@localhost:5432/myhibachi

# Database Connection Pool Settings
DB_POOL_SIZE=10           # Number of connections in pool
DB_MAX_OVERFLOW=20        # Additional connections if pool exhausted
DB_ECHO=False             # Set to True for SQL query logging (development only)

# ==========================================
# Redis Configuration (REQUIRED)
# ==========================================
# Redis connection string - must start with redis://
# Format: redis://host:port/db
# Development example:
REDIS_URL=redis://localhost:6379/0

# ==========================================
# Security Keys (REQUIRED - CRITICAL)
# ==========================================
# WARNING: These MUST be at least 32 characters for cryptographic security!
# Generate with: openssl rand -hex 32

# Secret key for JWT tokens and general security
# Min 32 characters - will fail validation if shorter
SECRET_KEY=your-secret-key-min-32-chars-CHANGE-IN-PRODUCTION-1234567890

# Encryption key for sensitive data in database
# Min 32 characters - will fail validation if shorter
ENCRYPTION_KEY=your-encryption-key-min-32-chars-CHANGE-IN-PRODUCTION-1234567890

# JWT token expiration (minutes)
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ==========================================
# Stripe Payment Integration (REQUIRED)
# ==========================================
# Get from: https://dashboard.stripe.com/apikeys

# Secret key - must start with sk_test_ (dev) or sk_live_ (production)
# REPLACE WITH YOUR ACTUAL KEY - This is just a placeholder format example
STRIPE_SECRET_KEY=sk_test_YOUR_STRIPE_SECRET_KEY_GOES_HERE_REPLACE_THIS

# Publishable key - must start with pk_test_ or pk_live_
STRIPE_PUBLISHABLE_KEY=pk_test_YOUR_STRIPE_PUBLISHABLE_KEY_HERE

# Webhook secret - must start with whsec_
# Get from: https://dashboard.stripe.com/webhooks
STRIPE_WEBHOOK_SECRET=whsec_YOUR_WEBHOOK_SECRET_HERE_REPLACE_THIS

# ==========================================
# RingCentral SMS/Phone Integration (REQUIRED)
# ==========================================
# Get from: https://developers.ringcentral.com/my-account.html
RC_CLIENT_ID=your-ringcentral-client-id
RC_CLIENT_SECRET=your-ringcentral-client-secret
RC_JWT_TOKEN=your-ringcentral-jwt-token
RC_WEBHOOK_SECRET=your-ringcentral-webhook-secret
RC_SMS_FROM=+19167408768
RC_SERVER_URL=https://platform.ringcentral.com

# ==========================================
# OpenAI API (REQUIRED FOR AI FEATURES)
# ==========================================
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-XXXXXXXXXXXXXXXXXXXXXXXX
OPENAI_MODEL=gpt-4
OPENAI_REALTIME_MODEL=gpt-4o-realtime-preview-2024-12-17

# ==========================================
# Plaid Banking Integration (OPTIONAL)
# ==========================================
# Get from: https://dashboard.plaid.com/team/keys
PLAID_CLIENT_ID=your-plaid-client-id
PLAID_SECRET=your-plaid-secret
PLAID_ENV=sandbox  # Options: sandbox | development | production

# ==========================================
# Meta (Facebook/Instagram) Integration (OPTIONAL)
# ==========================================
# Get from: https://developers.facebook.com/apps/
META_APP_ID=your-meta-app-id
META_APP_SECRET=your-meta-app-secret
META_VERIFY_TOKEN=your-meta-verify-token
META_PAGE_ACCESS_TOKEN=your-meta-page-access-token

# ==========================================
# Google Business Integration (OPTIONAL)
# ==========================================
# Get from: https://console.cloud.google.com/
GOOGLE_CLOUD_PROJECT=your-google-cloud-project
GOOGLE_CREDENTIALS_JSON=/path/to/credentials.json
GBP_ACCOUNT_ID=your-google-business-account-id
GBP_LOCATION_ID=your-google-business-location-id

# ==========================================
# Email Configuration (SMTP)
# ==========================================
# Email provider: smtp (recommended for low volume)
EMAIL_ENABLED=True
EMAIL_PROVIDER=smtp

# SMTP Settings for IONOS Business Email
# IONOS SMTP: smtp.ionos.com or smtp.1and1.com
# Port 587 (recommended) or 465 (SSL)
SMTP_HOST=smtp.ionos.com
SMTP_PORT=587
SMTP_USER=your-email@yourdomain.com
SMTP_PASSWORD=your-ionos-email-password
SMTP_USE_TLS=True

# From Email (must match SMTP_USER for IONOS)
FROM_EMAIL=your-email@yourdomain.com
EMAILS_FROM_NAME=My Hibachi Chef

# Email Settings
DISABLE_EMAIL=False
EMAIL_TIMEOUT=30  # seconds

# ==========================================
# Application Settings
# ==========================================
APP_NAME=My Hibachi Chef CRM
DEBUG=False             # Set to True for development debugging
ENVIRONMENT=production  # Options: development | staging | production
API_VERSION=1.0.0

# Server Configuration
HOST=0.0.0.0
PORT=8000

# CORS Origins (comma-separated)
CORS_ORIGINS=https://myhibachichef.com,https://admin.myhibachichef.com

# ==========================================
# Sentry Error Tracking & Monitoring (RECOMMENDED)
# ==========================================
# Get from: https://sentry.io/organizations/your-org/projects/
# Create project â†’ Copy DSN
SENTRY_DSN=https://your-sentry-dsn-here@sentry.io/your-project-id
SENTRY_ENVIRONMENT=production  # Optional: defaults to ENVIRONMENT value
SENTRY_TRACES_SAMPLE_RATE=0.1  # 10% of transactions (adjust for production load)
SENTRY_PROFILES_SAMPLE_RATE=0.1  # 10% profiling (performance monitoring)

# ==========================================
# Business Information (PUBLIC DATA ONLY)
# ==========================================
BUSINESS_NAME=my Hibachi LLC
BUSINESS_EMAIL=cs@myhibachichef.com
BUSINESS_PHONE=+19167408768
BUSINESS_CITY=Fremont
BUSINESS_STATE=California
SERVICE_AREAS=Sacramento, Bay Area, Central Valley

# ==========================================
# AI Settings
# ==========================================
ENABLE_AI_AUTO_REPLY=True
AI_CONFIDENCE_THRESHOLD=80

# ==========================================
# Business Rules
# ==========================================
QUIET_HOURS_START=21      # 9 PM
QUIET_HOURS_END=8         # 8 AM
DEFAULT_TIMEZONE=America/Los_Angeles
MAX_SMS_PER_THREAD=3

# ==========================================
# Rate Limiting Configuration
# ==========================================
# Public API (unauthenticated)
RATE_LIMIT_PUBLIC_PER_MINUTE=20
RATE_LIMIT_PUBLIC_PER_HOUR=1000
RATE_LIMIT_PUBLIC_BURST=30

# Admin API (authenticated admin users)
RATE_LIMIT_ADMIN_PER_MINUTE=100
RATE_LIMIT_ADMIN_PER_HOUR=5000
RATE_LIMIT_ADMIN_BURST=150

# Super Admin (owner/manager)
RATE_LIMIT_ADMIN_SUPER_PER_MINUTE=200
RATE_LIMIT_ADMIN_SUPER_PER_HOUR=10000
RATE_LIMIT_ADMIN_SUPER_BURST=300

# AI Endpoints (cost-controlled)
RATE_LIMIT_AI_PER_MINUTE=10
RATE_LIMIT_AI_PER_HOUR=300
RATE_LIMIT_AI_BURST=15

# Webhooks (external services)
RATE_LIMIT_WEBHOOK_PER_MINUTE=100
RATE_LIMIT_WEBHOOK_PER_HOUR=5000
RATE_LIMIT_WEBHOOK_BURST=200
