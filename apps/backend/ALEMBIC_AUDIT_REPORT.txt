Alembic Migration Audit Report
Generated: 2025-11-23 20:06:42
======================================================================

SUMMARY:
  Files scanned: 54
  Valid revisions: 54
  Duplicates: 0
  Missing parents: 7
  Potential heads: 7

MISSING PARENT REVISIONS:
  001_create_crm_schemas.py references 000_create_base_users  # Depends on base users table (NOT FOUND)
  009_payment_notifications.py references 008_add_user_roles  # Fixed: was cd22216ae9d3 deleted duplicate merge (NOT FOUND)
  016_add_social_account_identity_tables.py references 0e81266c9503  # create_booking_reminders_table current HEAD (NOT FOUND)
  3907a0a8e118_add_error_logs_table.py references a1b2c3d4e5f6  # notification_groups (NOT FOUND)
  4ec9e57ea53e_add_escalation_performance_indexes.py references e636a2d56d82  # Fixed: removed deleted merge migration (NOT FOUND)
  50da543dcbb3_merge_social_and_communications_features.py references a7b8c9d0e1f2  # Updated to use short hash (NOT FOUND)
  f069ddb440f7_merge_payment_notifications.py references 009_payment_notifications  # Fixed: removed reference to deleted cd22216ae9d3 (NOT FOUND)

ALL REVISIONS:
  000_create_base_users_table.py
    revision: 000_create_base_users
    down_revision: None
    branch_labels: None

  001_create_crm_schemas.py
    revision: 001
    down_revision: 000_create_base_users  # Depends on base users table
    branch_labels: None

  001_initial_stripe_tables.py
    revision: 001_initial_stripe_tables
    down_revision: None
    branch_labels: None

  002_create_read_projections.py
    revision: 002
    down_revision: 001
    branch_labels: None

  003_add_lead_newsletter_schemas.py
    revision: 003_add_lead_newsletter_schemas
    down_revision: 002
    branch_labels: None

  003_add_social_media_integration.py
    revision: 003_add_social_media_integration
    down_revision: 002
    branch_labels: None

  004_add_customer_review_system.py
    revision: 004_review_system
    down_revision: 9fd62e8ed3b4
    branch_labels: None

  004_add_station_multi_tenant_rbac.py
    revision: 004_station_rbac
    down_revision: 003_add_lead_newsletter_schemas
    branch_labels: None

  005_add_qr_code_tracking.py
    revision: 005_add_qr_code_tracking
    down_revision: 004_review_system

  005_add_users_table.py
    revision: 005_add_users_table
    down_revision: ea9069521d16
    branch_labels: None

  006_add_roles_permissions.py
    revision: 006_add_roles_permissions
    down_revision: 005_add_users_table
    branch_labels: None

  006_create_audit_logs_system.py
    revision: 006_create_audit_logs_system
    down_revision: 005_add_qr_code_tracking

  007_add_soft_delete_support.py
    revision: 007_add_soft_delete_support
    down_revision: 006_create_audit_logs_system

  007_fix_lead_enum_values.py
    revision: 007_fix_lead_enum_values
    down_revision: 006_add_roles_permissions
    branch_labels: None

  008_add_user_roles.py
    revision: 008_add_user_roles
    down_revision: 007_add_soft_delete_support

  009_payment_notifications.py
    revision: 009_payment_notifications
    down_revision: 008_add_user_roles  # Fixed: was cd22216ae9d3 deleted duplicate merge
    branch_labels: None

  010_add_ai_hospitality_training_system.py
    revision: 010_ai_hospitality_training
    down_revision: 009_payment_notifications
    branch_labels: None

  010_escalation_call_recording.py
    revision: 010_escalation_call_recording
    down_revision: 009_payment_notifications
    branch_labels: None

  012_add_2fa_ip_verification.py
    revision: 012_add_2fa_ip_verification
    down_revision: 010_ai_hospitality_training
    branch_labels: None

  013_add_deposit_deadline.py
    revision: 013_add_deposit_deadline
    down_revision: 012_add_2fa_ip_verification
    branch_labels: None

  014_add_sms_consent.py
    revision: 014_add_sms_consent
    down_revision: 013_add_deposit_deadline

  015_add_terms_acknowledgment.py
    revision: 015_add_terms_acknowledgment
    down_revision: 014_add_sms_consent

  016_add_social_account_identity_tables.py
    revision: 016_add_social_account_identity
    down_revision: 0e81266c9503  # create_booking_reminders_table current HEAD
    branch_labels: None

  017_fix_foreign_key_relationships.py
    revision: a7b8c9d0e1f2
    down_revision: 016_add_social_account_identity
    branch_labels: None

  0e81266c9503_create_booking_reminders_table.py
    revision: 0e81266c9503
    down_revision: 53bf4e839c3c
    branch_labels: None

  198b329960a9_add_customer_review_blog_posts_and_.py
    revision: 198b329960a9
    down_revision: 3907a0a8e118
    branch_labels: None

  25dc17ff6a26_add_message_log_table.py
    revision: 25dc17ff6a26
    down_revision: 90164363b9b9
    branch_labels: None

  2a1a11964b93_phase_0_merge_all_remaining_heads.py
    revision: 2a1a11964b93
    down_revision: 6391276aefcc, bd8856cf6aa0
    branch_labels: None

  3907a0a8e118_add_error_logs_table.py
    revision: 3907a0a8e118
    down_revision: a1b2c3d4e5f6  # notification_groups
    branch_labels: None

  4a931353b079_add_pgvector_for_ai_semantic_search.py
    revision: 4a931353b079
    down_revision: 4ec9e57ea53e
    branch_labels: None

  4ec9e57ea53e_add_escalation_performance_indexes.py
    revision: 4ec9e57ea53e
    down_revision: e636a2d56d82  # Fixed: removed deleted merge migration
    branch_labels: None

  5034d1bfa5f0_add_conversation_linking_indexes.py
    revision: 5034d1bfa5f0
    down_revision: 6e2245429ea8
    branch_labels: None

  50da543dcbb3_merge_social_and_communications_features.py
    revision: 50da543dcbb3
    down_revision: 010_escalation_call_recording, a7b8c9d0e1f2  # Updated to use short hash
    branch_labels: None

  53bf4e839c3c_merge_terms_system_with_main.py
    revision: 53bf4e839c3c
    down_revision: 015_add_terms_acknowledgment, e1814ce1d0e9, f5a8b9c2d3e4
    branch_labels: None

  573ac0543ebb_create_alert_rules_table.py
    revision: 573ac0543ebb
    down_revision: 5f6cb2dfed84
    branch_labels: None

  5f6cb2dfed84_add_monitoring_alert_tables.py
    revision: 5f6cb2dfed84
    down_revision: 987eae60d297
    branch_labels: None

  6391276aefcc_merge_station_rbac_with_main_chain.py
    revision: 6391276aefcc
    down_revision: 004_station_rbac, cafcd735e7fe
    branch_labels: None

  6e2245429ea8_add_ringcentral_ai_transcript_fields.py
    revision: 6e2245429ea8
    down_revision: 9c41683cf436
    branch_labels: None

  7ca3dac9d866_create_system_events_table.py
    revision: 7ca3dac9d866
    down_revision: f069ddb440f7
    branch_labels: None

  8ecb9a7d48f7_add_menu_items_table.py
    revision: 8ecb9a7d48f7
    down_revision: 5034d1bfa5f0
    branch_labels: None

  8f571102b6b2_add_performance_indexes_for_ai_and_.py
    revision: 8f571102b6b2
    down_revision: 198b329960a9
    branch_labels: None

  90164363b9b9_add_referral_tables.py
    revision: 90164363b9b9
    down_revision: ba857522523f
    branch_labels: None

  987eae60d297_add_ai_training_quality_index.py
    revision: 987eae60d297
    down_revision: 4a931353b079
    branch_labels: None

  9c41683cf436_merge_ai_training_and_alerts.py
    revision: 9c41683cf436
    down_revision: 010_ai_hospitality_training, 573ac0543ebb
    branch_labels: None

  9fd62e8ed3b4_merge_migrations.py
    revision: 9fd62e8ed3b4
    down_revision: 001_initial_stripe_tables, 003_add_social_media_integration
    branch_labels: None

  a1b2c3d4e5f6_create_notification_groups_tables.py
    revision: a1b2c3d4e5f6
    down_revision: f069ddb440f7
    branch_labels: None

  ba857522523f_add_consent_records_table.py
    revision: ba857522523f
    down_revision: 8ecb9a7d48f7
    branch_labels: None

  bd8856cf6aa0_create_knowledge_base_tables.py
    revision: bd8856cf6aa0
    down_revision: 5034d1bfa5f0
    branch_labels: None

  cafcd735e7fe_fix_all_schema_issues_and_create_.py
    revision: cafcd735e7fe
    down_revision: 50da543dcbb3
    branch_labels: None

  e1814ce1d0e9_final_master_merge_all_12_heads.py
    revision: e1814ce1d0e9
    down_revision: 007_fix_lead_enum_values, 25dc17ff6a26, 7ca3dac9d866
    branch_labels: None

  e636a2d56d82_add_businesses_table_for_white_label.py
    revision: e636a2d56d82
    down_revision: 8f571102b6b2
    branch_labels: None

  ea9069521d16_update_indexes_and_constraints.py
    revision: ea9069521d16
    down_revision: 9fd62e8ed3b4
    branch_labels: None

  f069ddb440f7_merge_payment_notifications.py
    revision: f069ddb440f7
    down_revision: 009_payment_notifications  # Fixed: removed reference to deleted cd22216ae9d3
    branch_labels: None

  f5a8b9c2d3e4_add_sms_tracking_and_delivery_events.py
    revision: f5a8b9c2d3e4
    down_revision: f069ddb440f7
    branch_labels: None

